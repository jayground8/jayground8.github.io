<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>Writing Helm Values With Gemini</title><meta name="robots" content="follow, index"/><meta name="description" content="I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."/><meta property="og:url" content="https://jayground8.github.io/blog/20250719-writing-helm-values-with-gemini"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."/><meta property="og:title" content="Writing Helm Values With Gemini"/><meta property="og:image" content="https://jayground8.github.io/static/images/thumbnail/writing-helm-values-with-gemini.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="Writing Helm Values With Gemini"/><meta name="twitter:description" content="I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/thumbnail/writing-helm-values-with-gemini.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20250719-writing-helm-values-with-gemini"/><meta property="article:published_time" content="2025-07-19T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20250719-writing-helm-values-with-gemini"
  },
  "headline": "Writing Helm Values With Gemini",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/thumbnail/writing-helm-values-with-gemini.png"
    }
  ],
  "datePublished": "2025-07-19T00:00:00.000Z",
  "dateModified": "2025-07-19T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ea6d3fdbf67a6641.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/WTiGgcjIxdebIMrH_uVPJ/_buildManifest.js" defer=""></script><script src="/_next/static/WTiGgcjIxdebIMrH_uVPJ/_ssgManifest.js" defer=""></script><script src="/_next/static/WTiGgcjIxdebIMrH_uVPJ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2025-07-19T00:00:00.000Z">Saturday, July 19, 2025</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Writing Helm Values With Gemini</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="installing-sentry-with-helm-chart"><a href="#installing-sentry-with-helm-chart" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Installing Sentry With Helm Chart</h2><p>Sentry provides a self-hosting option under a license that allows free usage, as long as you’re not selling a product that includes Sentry. They offer a script and a Docker Compose file that make it easy to install all necessary components on your server.</p><p>If you want to run self-hosted Sentry on a Kubernetes cluster, you can use the <a target="_blank" rel="noopener noreferrer" href="https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml">Sentry Helm Chart</a>. Thanks to this chart, deploying all components to your cluster is fast and straightforward.</p><h2 id="overriding-helm-values"><a href="#overriding-helm-values" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Overriding Helm Values</h2><p>In my case, I needed to override the Helm values to set tolerations for all components in the self-hosted Sentry setup. If you check the <a target="_blank" rel="noopener noreferrer" href="https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/values.yaml">Sentry Chart values</a>, you’ll find the toleration configuration under the global section. You can add your required tolerations there.</p><p>However, that’s not the whole story. If you look at the <a target="_blank" rel="noopener noreferrer" href="https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml">Chart.yaml</a>, you’ll see that there are many dependent charts. The global configuration doesn’t automatically override tolerations for all of these dependencies, so you need to define them separately for each one.</p><p><code>chart.yaml</code></p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v2
</span><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> sentry
</span><span class="code-line"><span class="token atrule key">description</span><span class="token punctuation">:</span> A Helm chart for Kubernetes
</span><span class="code-line"><span class="token atrule key">type</span><span class="token punctuation">:</span> application
</span><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> 26.21.0
</span><span class="code-line"><span class="token atrule key">appVersion</span><span class="token punctuation">:</span> 25.5.1
</span><span class="code-line"><span class="token atrule key">dependencies</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> memcached
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 7.5.2
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> sourcemaps.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> redis
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 17.11.3
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> redis.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> kafka
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 29.3.14
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> kafka.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> clickhouse
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//sentry<span class="token punctuation">-</span>kubernetes.github.io/charts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 3.14.1
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> clickhouse.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> zookeeper
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 11.4.11
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> zookeeper.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> rabbitmq
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 11.16.2
</span><span class="code-line">    <span class="token atrule key">alias</span><span class="token punctuation">:</span> rabbitmq
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> rabbitmq.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> postgresql
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 12.5.1
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> postgresql.enabled
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> nginx
</span><span class="code-line">    <span class="token atrule key">repository</span><span class="token punctuation">:</span> oci<span class="token punctuation">:</span>//registry<span class="token punctuation">-</span>1.docker.io/bitnamicharts
</span><span class="code-line">    <span class="token atrule key">version</span><span class="token punctuation">:</span> 18.2.5
</span><span class="code-line">    <span class="token atrule key">condition</span><span class="token punctuation">:</span> nginx.enabled
</span><span class="code-line"><span class="token atrule key">maintainers</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> sentry<span class="token punctuation">-</span>kubernetes
</span></code></pre></div><h2 id="using-gemini"><a href="#using-gemini" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Using Gemini</h2><p>Manually checking all the dependent chart values and adding tolerations can be a tedious task. So, I thought—why not leverage AI to help? I prompted Gemini 2.5 Pro on the Web Console with the following:</p><blockquote><p>Please provide the values.yaml configuration to add tolerations to all components in the Sentry Helm chart, version 26.21.0. The chart can be found at: <a target="_blank" rel="noopener noreferrer" href="https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry">https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry</a>.</p></blockquote><p>Gemini generated a fairly good values.yaml, but it wasn’t perfect. Even though I included the URL in the prompt, it didn’t seem to thoroughly check all the dependent charts.</p><p>For example, it included tolerations for Kafka like this. However, the Kafka chart doesn’t actually support a top-level tolerations configuration, so this wouldn’t work.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">kafka</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</span><span class="code-line">  <span class="token atrule key">tolerations</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">key</span><span class="token punctuation">:</span> <span class="token string">&#x27;your-key&#x27;</span>
</span><span class="code-line">      <span class="token atrule key">operator</span><span class="token punctuation">:</span> <span class="token string">&#x27;Exists&#x27;</span>
</span><span class="code-line">      <span class="token atrule key">effect</span><span class="token punctuation">:</span> <span class="token string">&#x27;NoSchedule&#x27;</span>
</span></code></pre></div><p>It also missed the fact that the global section can be used for all templates provided by the Sentry Helm chart itself, which could simplify the configuration. However, when I used the same prompt with Gemini later, it correctly recognized the global section and simply added the tolerations there.</p><h2 id="giving-more-context"><a href="#giving-more-context" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Giving More Context</h2><p>To address the issues mentioned earlier, I tried providing more context using the Gemini CLI. First, I downloaded the Sentry Helm chart along with all its dependent Helm charts.</p><div class="relative"><pre><code class="code-highlight language-sh"><span class="code-line">helm repo add sentry https://sentry-kubernetes.github.io/charts
</span><span class="code-line">helm pull sentry/sentry --untar
</span><span class="code-line">helm dependency build sentry --skip-refresh
</span></code></pre></div><p>In Gemini CLI, you can include all files in a specific directory by using the <code>@</code> symbol, like this:</p><blockquote><p>can you generate helm values.yaml to add tolerations to all compenents in sentry when I install it with sentry helm chart? all helm charts are located in @sentry you can generate precise values.yaml with the files.</p></blockquote><p>At first, Gemini correctly identified the global configuration option and understood that it could be applied to all templates within the Sentry Helm chart. However, it missed adding tolerations to the dependent Helm charts.</p><div class="relative"><pre><code class="code-highlight language-sh"><span class="code-line"> 1 # This values.yaml adds tolerations to all components deployed by the Sentry Helm chart.
</span><span class="code-line"> 2 # You can customize the key, value, and effect to match the taints on your nodes.
</span><span class="code-line"> 3 global:
</span><span class="code-line"> 4   tolerations:
</span><span class="code-line"> 5     # This toleration allows pods to be scheduled on nodes with the taint:
</span><span class="code-line"> 6     # key: &quot;dedicated&quot;, value: &quot;sentry&quot;, effect: &quot;NoSchedule&quot;
</span><span class="code-line"> 7     - key: &quot;dedicated&quot;
</span><span class="code-line"> 8       operator: &quot;Equal&quot;
</span><span class="code-line"> 9       value: &quot;sentry&quot;
</span><span class="code-line">10       effect: &quot;NoSchedule&quot;
</span><span class="code-line">11     # This toleration allows pods to be scheduled on nodes with any taint that has the key &quot;project&quot;
</span><span class="code-line">12     # regardless of the taint&#x27;s value, with effect &quot;NoExecute&quot;
</span><span class="code-line">13     - key: &quot;project&quot;
</span><span class="code-line">14       operator: &quot;Exists&quot;
</span><span class="code-line">15       effect: &quot;NoExecute&quot;
</span><span class="code-line">16
</span><span class="code-line">17 # You can also add tolerations to specific components if needed.
</span><span class="code-line">18 # For example, to add a toleration only to the web component:
</span><span class="code-line">19 # sentry:
</span><span class="code-line">20 #   web:
</span><span class="code-line">21 #     tolerations:
</span><span class="code-line">22 #       - key: &quot;web-only&quot;
</span><span class="code-line">23 #         operator: &quot;Exists&quot;
</span><span class="code-line">24 #         effect: &quot;NoSchedule&quot;
</span></code></pre></div><p>I then gave a more specific prompt to address that:</p><blockquote><p>you need to add tolerations to dependent helm charts too.</p></blockquote><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"> <span class="token number">1</span> <span class="token comment"># This values.yaml adds a toleration to all Sentry components and their dependencies.</span>
</span><span class="code-line"> <span class="token number">2</span> <span class="token comment"># The toleration allows pods to be scheduled on nodes with the taint:</span>
</span><span class="code-line"> <span class="token number">3</span> <span class="token comment"># key: &quot;dedicated&quot;, value: &quot;sentry&quot;, effect: &quot;NoSchedule&quot;</span>
</span><span class="code-line"> <span class="token number">4</span>
</span><span class="code-line"> <span class="token number">5</span> <span class="token comment"># This global toleration applies to all Sentry-specific components</span>
</span><span class="code-line"> <span class="token number">6</span> <span class="token comment"># (web, workers, cron, relay, snuba, symbolicator, etc.) and hooks.</span>
</span><span class="code-line"> <span class="token number">7</span> global:
</span><span class="code-line"> <span class="token number">8</span>   tolerations:
</span><span class="code-line"> <span class="token number">9</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">10</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">11</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">12</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">13</span>
</span><span class="code-line"><span class="token number">14</span> <span class="token comment"># The following sections apply the same toleration to each of the dependent charts.</span>
</span><span class="code-line"><span class="token number">15</span> clickhouse:
</span><span class="code-line"><span class="token number">16</span>   tolerations:
</span><span class="code-line"><span class="token number">17</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">18</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">19</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">20</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">21</span>
</span><span class="code-line"><span class="token number">22</span> kafka:
</span><span class="code-line"><span class="token number">23</span>   controller:
</span><span class="code-line"><span class="token number">24</span>     tolerations:
</span><span class="code-line"><span class="token number">25</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">26</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">27</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">28</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">29</span>   broker:
</span><span class="code-line"><span class="token number">30</span>     tolerations:
</span><span class="code-line"><span class="token number">31</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">32</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">33</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">34</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">35</span>
</span><span class="code-line"><span class="token number">36</span> memcached:
</span><span class="code-line"><span class="token number">37</span>   tolerations:
</span><span class="code-line"><span class="token number">38</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">39</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">40</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">41</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">42</span>
</span><span class="code-line"><span class="token number">43</span> nginx:
</span><span class="code-line"><span class="token number">44</span>   tolerations:
</span><span class="code-line"><span class="token number">45</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">46</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">47</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">48</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">49</span>
</span><span class="code-line"><span class="token number">50</span> postgresql:
</span><span class="code-line"><span class="token number">51</span>   primary:
</span><span class="code-line"><span class="token number">52</span>     tolerations:
</span><span class="code-line"><span class="token number">53</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">54</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">55</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">56</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">57</span>   readReplicas:
</span><span class="code-line"><span class="token number">58</span>     tolerations:
</span><span class="code-line"><span class="token number">59</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">60</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">61</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">62</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">63</span>
</span><span class="code-line"><span class="token number">64</span> rabbitmq:
</span><span class="code-line"><span class="token number">65</span>   tolerations:
</span><span class="code-line"><span class="token number">66</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">67</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">68</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">69</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">70</span>
</span><span class="code-line"><span class="token number">71</span> redis:
</span><span class="code-line"><span class="token number">72</span>   master:
</span><span class="code-line"><span class="token number">73</span>     tolerations:
</span><span class="code-line"><span class="token number">74</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">75</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">76</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">77</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">78</span>   replica:
</span><span class="code-line"><span class="token number">79</span>     tolerations:
</span><span class="code-line"><span class="token number">80</span>       - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">81</span>         operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">82</span>         value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">83</span>         effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span><span class="code-line"><span class="token number">84</span>
</span><span class="code-line"><span class="token number">85</span> zookeeper:
</span><span class="code-line"><span class="token number">86</span>   tolerations:
</span><span class="code-line"><span class="token number">87</span>     - key: <span class="token string">&quot;dedicated&quot;</span>
</span><span class="code-line"><span class="token number">88</span>       operator: <span class="token string">&quot;Equal&quot;</span>
</span><span class="code-line"><span class="token number">89</span>       value: <span class="token string">&quot;sentry&quot;</span>
</span><span class="code-line"><span class="token number">90</span>       effect: <span class="token string">&quot;NoSchedule&quot;</span>
</span></code></pre></div><p>This time, Gemini correctly set up tolerations for the Kafka dependent chart. I proceeded to install Sentry using the generated values.yaml file. However, the Kafka provisioning job wasn’t scheduled correctly due to taints on the node.</p><p>I prompted Gemini again to fix the issue, and it finally returned a working values.yaml file with all necessary tolerations correctly applied.</p><blockquote><p>you missed adding tolearations to sentry-kafka-provisioning</p></blockquote><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">kafka</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">controller</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">tolerations</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">key</span><span class="token punctuation">:</span> <span class="token string">&#x27;dedicated&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">operator</span><span class="token punctuation">:</span> <span class="token string">&#x27;Equal&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;sentry&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">effect</span><span class="token punctuation">:</span> <span class="token string">&#x27;NoSchedule&#x27;</span>
</span><span class="code-line">  <span class="token atrule key">broker</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">tolerations</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">key</span><span class="token punctuation">:</span> <span class="token string">&#x27;dedicated&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">operator</span><span class="token punctuation">:</span> <span class="token string">&#x27;Equal&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;sentry&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">effect</span><span class="token punctuation">:</span> <span class="token string">&#x27;NoSchedule&#x27;</span>
</span><span class="code-line">  <span class="token atrule key">provisioning</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">tolerations</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">key</span><span class="token punctuation">:</span> <span class="token string">&#x27;dedicated&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">operator</span><span class="token punctuation">:</span> <span class="token string">&#x27;Equal&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;sentry&#x27;</span>
</span><span class="code-line">        <span class="token atrule key">effect</span><span class="token punctuation">:</span> <span class="token string">&#x27;NoSchedule&#x27;</span>
</span></code></pre></div><h2 id="burning-out-tokens"><a href="#burning-out-tokens" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Burning Out Tokens</h2><p>Well, it didn’t generate a working values.yaml on the first try. That made me question which approach is more efficient: generating the file with AI or manually configuring it by reviewing each dependent Helm chart.</p><p>Even though Gemini offers a generous token limit, it felt wasteful for this task. it read 595 files!</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">Successfully read and concatenated content from **593 file(s)**.
</span></code></pre></div><p>I tried reducing the number of files by deleting everything except the <code>values.yaml</code> and <code>Chart.yaml</code> files.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">find</span> ./sentry -type f <span class="token operator">!</span> <span class="token punctuation">\</span><span class="token punctuation">(</span> -name <span class="token string">&#x27;values.yaml&#x27;</span> -o -name <span class="token string">&#x27;Chart.yaml&#x27;</span> <span class="token punctuation">\</span><span class="token punctuation">)</span> -delet
</span></code></pre></div><p>However, in this case, Gemini didn’t recognize the global section and kept trying to apply tolerations to each individual component using the global configuration incorrectly. I tried refining the prompt several times, but eventually, I gave up.</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h2><p>I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly.</p><p>However, the generated file wasn’t accurate, and it took some experimentation to improve the results. I tried adding all the Helm chart files to the context, which did help Gemini provide better answers—but at the cost of processing a large number of files and consuming a lot of tokens for a relatively simple task.</p><p>I then reduced the number of files, keeping only the values.yaml and Chart.yaml files, and continued experimenting. Unfortunately, the results still didn’t meet my expectations. In the end, I decided to stop experimenting and leave the issue unresolved for now.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/kubernetes">kubernetes</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/heml">heml</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/gemini">Gemini</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20250716-docker-v2-api">How To Authenticate With Docker API</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20250722-sentry-saml2">Configuring Sentry&#x27;s SAML2 Provider with Keycloak</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2025</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var o=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003ec(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{i(a);for(var l in s)c(a,l,{get:s[l],enumerable:!0})},k=(a,s,l)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003es[n],enumerable:!(l=d(s,n))||l.enumerable});return a},y=a=\u003ek(i(c(a!=null?o(p(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=u((S,t)=\u003e{t.exports=_jsx_runtime});var v={};N(v,{default:()=\u003ef,frontmatter:()=\u003eg});var e=y(r()),g={title:\"Writing Helm Values With Gemini\",date:\"2025-07-19\",tags:[\"kubernetes\",\"heml\",\"Gemini\"],images:[\"/static/images/thumbnail/writing-helm-values-with-gemini.png\"],summary:\"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly.\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",pre:\"pre\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"installing-sentry-with-helm-chart\",children:[(0,e.jsx)(n.a,{href:\"#installing-sentry-with-helm-chart\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Installing Sentry With Helm Chart\"]}),(0,e.jsx)(n.p,{children:\"Sentry provides a self-hosting option under a license that allows free usage, as long as you\\u2019re not selling a product that includes Sentry. They offer a script and a Docker Compose file that make it easy to install all necessary components on your server.\"}),(0,e.jsxs)(n.p,{children:[\"If you want to run self-hosted Sentry on a Kubernetes cluster, you can use the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml\",children:\"Sentry Helm Chart\"}),\". Thanks to this chart, deploying all components to your cluster is fast and straightforward.\"]}),(0,e.jsxs)(n.h2,{id:\"overriding-helm-values\",children:[(0,e.jsx)(n.a,{href:\"#overriding-helm-values\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Overriding Helm Values\"]}),(0,e.jsxs)(n.p,{children:[\"In my case, I needed to override the Helm values to set tolerations for all components in the self-hosted Sentry setup. If you check the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/values.yaml\",children:\"Sentry Chart values\"}),\", you\\u2019ll find the toleration configuration under the global section. You can add your required tolerations there.\"]}),(0,e.jsxs)(n.p,{children:[\"However, that\\u2019s not the whole story. If you look at the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml\",children:\"Chart.yaml\"}),\", you\\u2019ll see that there are many dependent charts. The global configuration doesn\\u2019t automatically override tolerations for all of these dependencies, so you need to define them separately for each one.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"chart.yaml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sentry\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"description\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` A Helm chart for Kubernetes\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` application\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 26.21.0\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"appVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 25.5.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dependencies\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` memcached\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 7.5.2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sourcemaps.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` redis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 17.11.3\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` redis.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` kafka\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 29.3.14\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` kafka.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` clickhouse\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//sentry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`kubernetes.github.io/charts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3.14.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` clickhouse.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` zookeeper\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 11.4.11\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` zookeeper.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 11.16.2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"alias\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` postgresql\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 12.5.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` postgresql.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 18.2.5\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"maintainers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sentry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`kubernetes\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"using-gemini\",children:[(0,e.jsx)(n.a,{href:\"#using-gemini\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Using Gemini\"]}),(0,e.jsx)(n.p,{children:\"Manually checking all the dependent chart values and adding tolerations can be a tedious task. So, I thought\\u2014why not leverage AI to help? I prompted Gemini 2.5 Pro on the Web Console with the following:\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"Please provide the values.yaml configuration to add tolerations to all components in the Sentry Helm chart, version 26.21.0. The chart can be found at: \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry\",children:\"https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry\"}),\".\"]})}),(0,e.jsx)(n.p,{children:\"Gemini generated a fairly good values.yaml, but it wasn\\u2019t perfect. Even though I included the URL in the prompt, it didn\\u2019t seem to thoroughly check all the dependent charts.\"}),(0,e.jsx)(n.p,{children:\"For example, it included tolerations for Kafka like this. However, the Kafka chart doesn\\u2019t actually support a top-level tolerations configuration, so this wouldn\\u2019t work.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kafka\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'your-key'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Exists'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"It also missed the fact that the global section can be used for all templates provided by the Sentry Helm chart itself, which could simplify the configuration. However, when I used the same prompt with Gemini later, it correctly recognized the global section and simply added the tolerations there.\"}),(0,e.jsxs)(n.h2,{id:\"giving-more-context\",children:[(0,e.jsx)(n.a,{href:\"#giving-more-context\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Giving More Context\"]}),(0,e.jsx)(n.p,{children:\"To address the issues mentioned earlier, I tried providing more context using the Gemini CLI. First, I downloaded the Sentry Helm chart along with all its dependent Helm charts.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-sh\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`helm repo add sentry https://sentry-kubernetes.github.io/charts\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`helm pull sentry/sentry --untar\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`helm dependency build sentry --skip-refresh\n`})]})}),(0,e.jsxs)(n.p,{children:[\"In Gemini CLI, you can include all files in a specific directory by using the \",(0,e.jsx)(n.code,{children:\"@\"}),\" symbol, like this:\"]}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"can you generate helm values.yaml to add tolerations to all compenents in sentry when I install it with sentry helm chart? all helm charts are located in @sentry you can generate\\xA0precise values.yaml with the files.\"})}),(0,e.jsx)(n.p,{children:\"At first, Gemini correctly identified the global configuration option and understood that it could be applied to all templates within the Sentry Helm chart. However, it missed adding tolerations to the dependent Helm charts.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-sh\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:` 1 # This values.yaml adds tolerations to all components deployed by the Sentry Helm chart.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 2 # You can customize the key, value, and effect to match the taints on your nodes.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 3 global:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 4   tolerations:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 5     # This toleration allows pods to be scheduled on nodes with the taint:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 6     # key: \"dedicated\", value: \"sentry\", effect: \"NoSchedule\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 7     - key: \"dedicated\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 8       operator: \"Equal\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 9       value: \"sentry\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`10       effect: \"NoSchedule\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`11     # This toleration allows pods to be scheduled on nodes with any taint that has the key \"project\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`12     # regardless of the taint's value, with effect \"NoExecute\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`13     - key: \"project\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`14       operator: \"Exists\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`15       effect: \"NoExecute\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`16\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`17 # You can also add tolerations to specific components if needed.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`18 # For example, to add a toleration only to the web component:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`19 # sentry:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`20 #   web:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`21 #     tolerations:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`22 #       - key: \"web-only\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`23 #         operator: \"Exists\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`24 #         effect: \"NoSchedule\"\n`})]})}),(0,e.jsx)(n.p,{children:\"I then gave a more specific prompt to address that:\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"you need to add tolerations to dependent helm charts too.\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# This values.yaml adds a toleration to all Sentry components and their dependencies.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The toleration allows pods to be scheduled on nodes with the taint:\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'# key: \"dedicated\", value: \"sentry\", effect: \"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# This global toleration applies to all Sentry-specific components\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# (web, workers, cron, relay, snuba, symbolicator, etc.) and hooks.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),` global:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"9\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"11\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"13\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The following sections apply the same toleration to each of the dependent charts.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),` clickhouse:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"17\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"18\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"19\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"20\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"21\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"22\"}),` kafka:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"23\"}),`   controller:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"24\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"25\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"26\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"27\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"28\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"29\"}),`   broker:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"30\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"31\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"32\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"33\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"34\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"35\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"36\"}),` memcached:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"37\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"38\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"39\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"40\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"41\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"42\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"43\"}),` nginx:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"44\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"45\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"46\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"47\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"48\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"49\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"50\"}),` postgresql:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"51\"}),`   primary:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"52\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"53\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"54\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"55\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"56\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"57\"}),`   readReplicas:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"58\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"59\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"60\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"61\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"62\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"63\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"64\"}),` rabbitmq:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"65\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"66\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"67\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"68\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"69\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"70\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"71\"}),` redis:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"72\"}),`   master:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"73\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"74\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"75\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"76\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"77\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"78\"}),`   replica:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"79\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"81\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"82\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"83\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"84\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"85\"}),` zookeeper:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"86\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"87\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"88\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"89\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"90\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"This time, Gemini correctly set up tolerations for the Kafka dependent chart. I proceeded to install Sentry using the generated values.yaml file. However, the Kafka provisioning job wasn\\u2019t scheduled correctly due to taints on the node.\"}),(0,e.jsx)(n.p,{children:\"I prompted Gemini again to fix the issue, and it finally returned a working values.yaml file with all necessary tolerations correctly applied.\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"you missed adding tolearations to sentry-kafka-provisioning\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kafka\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"controller\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"broker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioning\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"burning-out-tokens\",children:[(0,e.jsx)(n.a,{href:\"#burning-out-tokens\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Burning Out Tokens\"]}),(0,e.jsx)(n.p,{children:\"Well, it didn\\u2019t generate a working values.yaml on the first try. That made me question which approach is more efficient: generating the file with AI or manually configuring it by reviewing each dependent Helm chart.\"}),(0,e.jsx)(n.p,{children:\"Even though Gemini offers a generous token limit, it felt wasteful for this task. it read 595 files!\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Successfully read and concatenated content from **593 file(s)**.\n`})})}),(0,e.jsxs)(n.p,{children:[\"I tried reducing the number of files by deleting everything except the \",(0,e.jsx)(n.code,{children:\"values.yaml\"}),\" and \",(0,e.jsx)(n.code,{children:\"Chart.yaml\"}),\" files.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"find\"}),\" ./sentry -type f \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\" -name \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'values.yaml'\"}),\" -o -name \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Chart.yaml'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),` -delet\n`]})})}),(0,e.jsx)(n.p,{children:\"However, in this case, Gemini didn\\u2019t recognize the global section and kept trying to apply tolerations to each individual component using the global configuration incorrectly. I tried refining the prompt several times, but eventually, I gave up.\"}),(0,e.jsxs)(n.h2,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,e.jsx)(n.p,{children:\"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly.\"}),(0,e.jsx)(n.p,{children:\"However, the generated file wasn\\u2019t accurate, and it took some experimentation to improve the results. I tried adding all the Helm chart files to the context, which did help Gemini provide better answers\\u2014but at the cost of processing a large number of files and consuming a lot of tokens for a relatively simple task.\"}),(0,e.jsx)(n.p,{children:\"I then reduced the number of files, keeping only the values.yaml and Chart.yaml files, and continued experimenting. Unfortunately, the results still didn\\u2019t meet my expectations. In the end, I decided to stop experimenting and leave the issue unresolved for now.\"})]})}}var f=b;return v;})();\n;return Component;","toc":[{"value":"Installing Sentry With Helm Chart","url":"#installing-sentry-with-helm-chart","depth":2},{"value":"Overriding Helm Values","url":"#overriding-helm-values","depth":2},{"value":"Using Gemini","url":"#using-gemini","depth":2},{"value":"Giving More Context","url":"#giving-more-context","depth":2},{"value":"Burning Out Tokens","url":"#burning-out-tokens","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}],"frontMatter":{"readingTime":{"text":"10 min read","minutes":9.77,"time":586200,"words":1954},"slug":"20250719-writing-helm-values-with-gemini","fileName":"20250719-writing-helm-values-with-gemini.md","title":"Writing Helm Values With Gemini","date":"2025-07-19T00:00:00.000Z","tags":["kubernetes","heml","Gemini"],"images":["/static/images/thumbnail/writing-helm-values-with-gemini.png"],"summary":"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"How To Authenticate With Docker API","date":"2025-07-16T00:00:00.000Z","tags":["docker","Gemini","Claude"],"images":["/static/images/thumbnail/write-bash-script.png"],"summary":"I needed to iterate through all image repositories in my private container registry, find the latest build for each, and save them as individual tar files. Although an LLM can generate code for this task quickly, it's worth knowing how to issue an authentication token for the Docker API. This could be important for guiding the LLM to produce a correct final version.","slug":"20250716-docker-v2-api"},"next":{"title":"Configuring Sentry's SAML2 Provider with Keycloak","date":"2025-07-22T00:00:00.000Z","tags":["sentry","keycloak","saml2"],"images":["/static/images/thumbnail/sentry-saml2-keycloak.png"],"summary":"This time, I integrated Sentry with Keycloak. There are several helpful blog posts available that make the process easy to follow. However, out of curiosity, I wanted to understand exactly what was happening behind the scenes—and clarify which steps are truly necessary.","slug":"20250722-sentry-saml2"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20250719-writing-helm-values-with-gemini"]},"buildId":"WTiGgcjIxdebIMrH_uVPJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>