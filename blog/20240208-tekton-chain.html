<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>Tekton Chain</title><meta name="robots" content="follow, index"/><meta name="description" content="Kubernetes에서 Tekton Chain을 통해서 어떻게 Software Supply Chain Security를 구성할 수 있는지 확인했다. Tekton Pipeline으로 git clone을 하고, container image를 build하고, 최종적으로 OCI registry에 push하도록 구성했다. 그리고 Tekton Chain이 어떻게 in-toto spec의 Attestation 정보를 남기는지 확인하였다."/><meta property="og:url" content="https://jayground8.github.io/blog/20240208-tekton-chain"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="Kubernetes에서 Tekton Chain을 통해서 어떻게 Software Supply Chain Security를 구성할 수 있는지 확인했다. Tekton Pipeline으로 git clone을 하고, container image를 build하고, 최종적으로 OCI registry에 push하도록 구성했다. 그리고 Tekton Chain이 어떻게 in-toto spec의 Attestation 정보를 남기는지 확인하였다."/><meta property="og:title" content="Tekton Chain"/><meta property="og:image" content="https://jayground8.github.io/static/images/social-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="Tekton Chain"/><meta name="twitter:description" content="Kubernetes에서 Tekton Chain을 통해서 어떻게 Software Supply Chain Security를 구성할 수 있는지 확인했다. Tekton Pipeline으로 git clone을 하고, container image를 build하고, 최종적으로 OCI registry에 push하도록 구성했다. 그리고 Tekton Chain이 어떻게 in-toto spec의 Attestation 정보를 남기는지 확인하였다."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/social-banner.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20240208-tekton-chain"/><meta property="article:published_time" content="2024-02-11T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20240208-tekton-chain"
  },
  "headline": "Tekton Chain",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/social-banner.png"
    }
  ],
  "datePublished": "2024-02-11T00:00:00.000Z",
  "dateModified": "2024-02-11T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "Kubernetes에서 Tekton Chain을 통해서 어떻게 Software Supply Chain Security를 구성할 수 있는지 확인했다. Tekton Pipeline으로 git clone을 하고, container image를 build하고, 최종적으로 OCI registry에 push하도록 구성했다. 그리고 Tekton Chain이 어떻게 in-toto spec의 Attestation 정보를 남기는지 확인하였다."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e2d77424a41fbd44.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/ksiuSPzS48Y1bzknjW1u9/_buildManifest.js" defer=""></script><script src="/_next/static/ksiuSPzS48Y1bzknjW1u9/_ssgManifest.js" defer=""></script><script src="/_next/static/ksiuSPzS48Y1bzknjW1u9/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">블로그</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">블로그</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2024-02-11T00:00:00.000Z">2024년 2월 11일 일요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Tekton Chain</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p>Tekton Chain은 Tekton으로 Pipeline을 운영할 때, Supply Chain Security를 쉽게 관리할 수 있도록 해주는 Kubernetes controller이다. Tekton Chain을 이해하기 위해 알아야 할 용어들을 먼저 살펴보고, Tekton Chain을 사용하여 Container Registry에 Attestation 정보를 남겨보자.</p><h2 id="software-supply-chain-security"><a href="#software-supply-chain-security" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Software Supply Chain Security</h2><p>다양한 공급업체에서 만들어진 부품들이 모여서 완성차가 만들어지게 되는데, 사용된 부품 중에 일부에 결함이 생겨도 완성차에 안전 문제를 야기할 수 있다. 소프트웨어도 마찬가지로 다양한 Library, Package, Tool들이 합쳐져 최종 결과물이 만들어지게 된다. 이렇게 의존성을 가지는 다양한 소스에서 소프트웨어의 보안 이슈를 가져올 수 있다. <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=XHW3pxXg_dc&amp;t=1240s">CNCF In-Toto에 대해서 발표한 세션</a>에서 Cloud Native Application에서 어떻게 Software Supply Chain 보안을 가져갈 수 있을지 <code>In-Toto</code> 프로젝트와 함께 설명한다. Git으로부터 Source code를 가져오고, Compile하여 최종적으로 package를 publish하는 pipeline를 예를 들어서 생각해보자. 우리가 public repository에서 소스 코드를 받아 올 때, 해커에 의해서 해당 repository가 다른 쪽으로 Mirror가 되어 조작된 소스코드를 받을 수도 있다. 마찬가지로 Package manager도 해커에 의해서 다른 곳에서 변경된 package를 받아서 사용하게 될 수 있다. 발표에서 설명한 <code>In-Toto</code> 프로젝트를 통한 해결책은 각 단계마다 출처를 남기고 그것을 통해서 믿을 수 있는 프로세스를 구축하는 것이다. 예를 들어서 소스코드는 어떤 repository URL에서 어떤 commit을 사용했고, signing commit으로 어떤 public key로 확인할 수 있는지 정보를 남긴다. Build단계에서는 compiler의 종류, 버전, 사용된 명령어에 대한 정보들을 남길 수 있을 것이다. 이러한 각 단계의 정보들을 연결한 메타데이터를 최종 결과물과 함께 같이 보관한다. 사용자는 최종 결과물과 같이 저장된 메타데이터를 통해서 간 단계마다 출처를 확인하고 출처를 증명할 수 있게 된다.</p><h2 id="in-toto-attestation"><a href="#in-toto-attestation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>In-Toto Attestation</h2><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/in-toto/attestation">In-toto Attestation Framework</a>는 어떤 정보를 남겨야하는지 규격을 제공한다. [attestation layer v1 규격] (<a target="_blank" rel="noopener noreferrer" href="https://github.com/in-toto/attestation/tree/main/spec/v1)%EC%9D%84">https://github.com/in-toto/attestation/tree/main/spec/v1)을</a> 확인해보면 아래와 같은 용어가 설명되어 있다.</p><ul><li>Envelope: Handles authentication and serialization</li><li>Statement: Binds the attestation to a particular subject and unambiguously identifies the types of the predicate</li><li>Predicate: Contains arbitrary metadata about a subject artifact, with a type-specific schema.</li></ul><p>Tekton Chain으로 생성되는 데이터를 확인하면, 먼저 아래와 같이 Envlope이라는 규격 정의를 볼 수 있다. <code>payloadType</code>에서 <code>json</code>형식으로 정의가 되었고, <code>payload</code>는 base64로 인코딩 된 값이 들어가 있다.</p><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/vnd.in-toto+json&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{base64 encoded payload}&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>Envelope 설명에 <code>Handles authentication</code>이라고 되어 있다. Tekton Chain에서 Envelope 데이터를 저장할 때 아래와 같이 signing을 하고 signature을 같이 남기게 된다. signatures은 Envelope 규격에 정의되어 있는 field는 아니지만, Envelope을 siging하고 verify하기 때문에 <code>Handles authentication</code>이라고 설명해놓은거 아닐까 생각한다.</p><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/vnd.in-toto+json&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{base64 encoded payload}&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;signatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;keyid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;sig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>이제 Envelope의 <code>payload</code> 값을 디코딩하면 아래와 같은 데이터 형식을 가지게 된다. <a target="_blank" rel="noopener noreferrer" href="https://github.com/in-toto/attestation/tree/main/spec/v0.1.0#statement">Statement</a>의 규격과 <a target="_blank" rel="noopener noreferrer" href="https://github.com/in-toto/attestation/tree/main/spec/v0.1.0#predicate">Predicate</a> 규격을 함께 확인할 수 있다. 예를 들어서 소스코드로부터 Container Image가 생성되고 Container Registry에 Push되는 Tekton Pipeline이 있다면, <code>subject</code>는 최종 산출물인 container image가 저장된 container registry URL과 해당 image의 digest 값이 정의 된다. <code>Predicate</code>는 <a target="_blank" rel="noopener noreferrer" href="https://slsa.dev/spec/v1.0-rc1/provenance">SLSA Provenance 형식</a>으로 Container Image가 최종 생성되기까지의 각 단계에 대한 정보들을 담게 된다.</p><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://in-toto.io/Statement/v0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;predicateType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://slsa.dev/provenance/v0.2&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{container image의 경우에 container registry URL}&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;digest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;sha256&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{image digest 값}&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;predicate&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>이렇게 규격에 따라서 최종 소프트웨어 산출물이 어떤 단계로 만들어지게 되었는지 메타데이터를 남기고, 그것을 최종 산출물과 같이 보관하여 확인할 수 있게 된다.</p><h2 id="slsa"><a href="#slsa" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>SLSA</h2><p>위에서 Predicate type으로 <code>SLSA Provenance</code>가 사용되었다. SLSA는 <code>The Supply Chain Levels for Software Artifacts</code>의 약자로 SLSA Framework는 Supply chain security에 대한 checklist를 제공한다. SLSA Framework는 Level을 나누어서 각 Level에 해당하는 가이드라인을 제공한다. Level1부터 Level4까지 정의되어 있는데, Level이 높을 수록 Supply chain에 대한 더 높은 신뢰를 제공할 수 있는 구성이라고 판단할 수 있다. 그런데 <a target="_blank" rel="noopener noreferrer" href="https://tekton.dev/blog/2023/04/19/getting-to-slsa-level-2-with-tekton-and-tekton-chains/">Tekton Chain을 사용할 경우에 기본적으로 SLSA Level 2에 대한 가이드라인을 준수</a>하여 파이프라인을 구성할 수 있다. 이렇게 SLSA framework의 가이드라인에 따라서 구성되기 때문에 Predicate가 SLSA Provenance 형식으로 남게 되는 것이다.</p><h2 id="sigstore"><a href="#sigstore" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Sigstore</h2><p><a target="_blank" rel="noopener noreferrer" href="https://tekton.dev/docs/chains/signed-provenance-tutorial/">Tekton 문서에 Tekton Chain을 통해서 전자서명된 출처 정보를 남기는 예제</a>가 잘 설명되어 있다. 해당 문서에 구조도 이미지가 아래처럼 있다. 그림에서 <code>Cosign</code>과 <code>Rekor</code>가 보인다.</p><img src="/static/images/supply-chain-security-tekton-example.png" alt="tekton chain example"/><p><code>Cosign</code>과 <code>Rekor</code>는 <a target="_blank" rel="noopener noreferrer" href="https://www.sigstore.dev/how-it-works">Sigstore Project</a>에 속해있는데, <code>Cosign</code>은 다양한 Artifact들을 Sign하고 Verify할 수 있는 툴을 제공한다. Rekor는 원장으로 변경될 수 없도록 Log entry를 저장할 수 있도록 해준다. Tekon Chain을 구성할 때, <code>Cosign</code>을 통해서 만들어진 Container Image를 Sign하고 Signature를 OCI Registry에 저장할 수 있다. 또 Tekon Chain에서 생성된 Attestation 데이터를 Sign하고 동일하게 Signature와 함께 OCI Registry에 저장할 수 있다. 그리고 <code>Cosign</code>을 통해서 Image signature, attestation signature를 verify할 수 있다. Rekor에는 Attestation 정보를 저장할 수 있는데, 블록체인 기반으로 나중에 변경할 수 없도록 저장하게 되고 원장에서 ID로 검색하여 출처 정보들을 확인할 수 있다.</p><h3 id="cosign-sign--verify"><a href="#cosign-sign--verify" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Cosign sign / verify</h3><p>Cosign으로 Container image를 sign하고 verify해보자. 먼저 cosign를 설치한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">brew <span class="token function">install</span> cosign
</span></code></pre></div><p>openssl과 비교해보기 위해서 openssl으로 Private key를 생성한다. <a target="_blank" rel="noopener noreferrer" href="https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#signature-schemes">Cosign Signature SPEC 문서</a>를 확인하면 ECDSA-P256를 지원해야한다고 나와서 아래와 같이 생성했다. Elliptic Curve Digital Signature Algorithm(ECDSA)는 Elliptic Curve Cryptography(ECC)로 만들어진 key로 Signature를 만드는 것을 말한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl ecparam -name prime256v1 -genkey -noout -out private.key
</span></code></pre></div><p>openssl된 private key를 cosign으로 import할 수 있는 명령어가 있어서 아래와 같이 실행한다. cosign에서 private key는 암호를 설정해서 key를 암호화한다. 정상적으로 실행되면 <code>import-cosign.key</code>와 <code>import-cosign.pub</code> 파일이 생성된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ cosign import-key-pair -key private.key
</span><span class="code-line">WARNING: the -key flag is deprecated and will be removed <span class="token keyword">in</span> a future release. Please use the --key flag instead.
</span><span class="code-line">Enter password <span class="token keyword">for</span> private key:
</span><span class="code-line">Enter password <span class="token keyword">for</span> private key again:
</span><span class="code-line">Private key written to import-cosign.key
</span><span class="code-line">Public key written to import-cosign.pub
</span></code></pre></div><p>이제 생성된 key pair로 아래와 같이 sign을 하고 verify할 수 있다. <code>tlog-upload=false</code>는 Rekor에 log entry를 upload하지 않도록 하기 위해서 설정했고, <code>upload=false</code>는 OCI registry에 signature을 올리지 않도록 설정하였다. 대신에 <code>output-signature</code>와 <code>output-payload</code>를 통해서 해당 값을 Local에 저장하도록 하였다. <code>upload=true</code>로 하면 OCI registry에 해당 데이터를 올리게 된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign sign <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.key <span class="token punctuation">\</span>
</span><span class="code-line">--tlog-upload<span class="token operator">=</span>false <span class="token punctuation">\</span>
</span><span class="code-line">--upload<span class="token operator">=</span>false <span class="token punctuation">\</span>
</span><span class="code-line">--output-signature<span class="token operator">=</span>signature.dat <span class="token punctuation">\</span>
</span><span class="code-line">--output-payload<span class="token operator">=</span>payload.dat <span class="token punctuation">\</span>
</span><span class="code-line">registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.pub <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">--signature<span class="token operator">=</span>signature.dat <span class="token punctuation">\</span>
</span><span class="code-line">--payload<span class="token operator">=</span>payload.dat <span class="token punctuation">\</span>
</span><span class="code-line">registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414
</span></code></pre></div><p>payload.dat를 보면, <a target="_blank" rel="noopener noreferrer" href="https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#payloads">Cosign Signature SPEC 문서에 나온 것처럼</a> 되어 있는 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">cat</span> payload.dat<span class="token operator">|</span> jq <span class="token builtin class-name">.</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string">&quot;critical&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token string">&quot;identity&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token string">&quot;docker-reference&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;registry.hub.docker.com/library/busybox&quot;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>,
</span><span class="code-line">    <span class="token string">&quot;image&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token string">&quot;docker-manifest-digest&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414&quot;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>,
</span><span class="code-line">    <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cosign container image signature&quot;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>,
</span><span class="code-line">  <span class="token string">&quot;optional&quot;</span><span class="token builtin class-name">:</span> null
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p><code>crane</code>을 사용해서 DockerHub public image <code>busybox</code>의 manifest를 저장한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">crane manifest registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414 <span class="token operator">&gt;</span> manifest.json
</span></code></pre></div><p>그리고 sha256 digest를 생성하면, 위의 payload에서 <code>docker-manifest-digest</code> 값과 동일한 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ sha256sum manifest.json
</span><span class="code-line">538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414  manifest.json
</span></code></pre></div><p>openssl을 통해서 이 payload를 private key로 sign 해본다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl dgst -sha256 -sign private.key -out sig.openssl payload.dat
</span></code></pre></div><p>openssl로 생성된 signature로 cosign verify를 해도 이제 정상적으로 verify가 된다. <code>insecure-ignore-tlog</code>는 rekor에서 log entry를 가져와서 검증하는 단계를 생략하는 설정이다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.pub <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">--signature<span class="token operator">=</span>sig.openssl <span class="token punctuation">\</span>
</span><span class="code-line">--payload<span class="token operator">=</span>payload.dat <span class="token punctuation">\</span>
</span><span class="code-line">registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">WARNING: Skipping tlog verification is an insecure practice that lacks of transparency and auditability verification <span class="token keyword">for</span> the signature.
</span><span class="code-line">
</span><span class="code-line">Verification <span class="token keyword">for</span> registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414 --
</span><span class="code-line">The following checks were performed on each of these signatures:
</span><span class="code-line">  - The cosign claims were validated
</span><span class="code-line">  - The signatures were verified against the specified public key
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;critical&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;identity&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;docker-reference&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;registry.hub.docker.com/library/busybox&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;image&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;docker-manifest-digest&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;cosign container image signature&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;optional&quot;</span>:null<span class="token punctuation">}</span><span class="token punctuation">]</span>
</span></code></pre></div><p>이제 네이버 클라우드 Container Registry에 cosign을 통해서 signature를 upload해본다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">docker login -u <span class="token punctuation">{</span>username<span class="token punctuation">}</span> <span class="token punctuation">{</span>private image registry url<span class="token punctuation">}</span>
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign sign <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.key <span class="token punctuation">\</span>
</span><span class="code-line">--tlog-upload<span class="token operator">=</span>false <span class="token punctuation">\</span>
</span><span class="code-line">-a <span class="token variable assign-left">timestamp</span><span class="token operator">=</span><span class="token number">1707360932</span> <span class="token punctuation">\</span>
</span><span class="code-line">--upload<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">examle.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc
</span></code></pre></div><p><code>triangulate</code> 명령어로 signature가 OCI registry에 어떤 tag로 저장이 되었는지 확인할 수 있다. <code>image digest</code>에 <code>.sig</code>가 붙은 tag가 생성된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ cosign triangulate example.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc
</span><span class="code-line">example.ncr.gov-ntruss.com/sample:sha256-9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc.sig
</span></code></pre></div><p>이제 signature을 image로부터 받아오면 <a target="_blank" rel="noopener noreferrer" href="https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#payloads">Cosign Signature SPEC</a>형식에 맞춰서 데이터가 저장되어 있는 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ cosign download signature example.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string">&quot;Base64Signature&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{sig값}&quot;</span>,
</span><span class="code-line">  <span class="token string">&quot;Payload&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;{payload값}&quot;</span>
</span><span class="code-line">  <span class="token string">&quot;Cert&quot;</span><span class="token builtin class-name">:</span> null,
</span><span class="code-line">  <span class="token string">&quot;Chain&quot;</span><span class="token builtin class-name">:</span> null,
</span><span class="code-line">  <span class="token string">&quot;Bundle&quot;</span><span class="token builtin class-name">:</span> null,
</span><span class="code-line">  <span class="token string">&quot;RFC3161Timestamp&quot;</span><span class="token builtin class-name">:</span> null
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>이제 정상적으로 verify할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.pub <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">examle.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc
</span></code></pre></div><h3 id="attestation"><a href="#attestation" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Attestation</h3><p>Tekon Pipeline으로 Bitbucket에 Source Code를 Clone하고, Dockerfile으로 image를 build하고 Container Registry에 push했다고 하자. 그러면 Tekton Chain을 통해서 아래와 같이 Attestation 정보가 생성된다.</p><p><code>sample.json</code></p><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://in-toto.io/Statement/v0.1&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;predicateType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://slsa.dev/provenance/v0.2&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.ncr.gov-ntruss.com/sample&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;digest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;sha256&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;predicate&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">&quot;builder&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://tekton.dev/chains/v2&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;buildType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tekton.dev/v1beta1/TaskRun&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;invocation&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;configSource&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property">&quot;BUILDER_IMAGE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gcr.io/kaniko-project/executor:v1.20.0-debug&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;CHAINS-GIT_COMMIT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aaf7c80a512c1d7ee146f8462af19596497c4616&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;CHAINS-GIT_URL&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@bitbucket.org:example/sample.git&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;CONTEXT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;DOCKERFILE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./Dockerfile&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;EXTRA_ARGS&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;IMAGE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;example.ncr.gov-ntruss.com/sample&quot;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;environment&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property">&quot;annotations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token property">&quot;pipeline.tekton.dev/affinity-assistant&quot;</span><span class="token operator">:</span> <span class="token string">&quot;affinity-assistant-fdbbf5ed3d&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;pipeline.tekton.dev/release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e1c7828&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/categories&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Image Build&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Build and upload container image using Kaniko&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/pipelines.minVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.17.0&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/platforms&quot;</span><span class="token operator">:</span> <span class="token string">&quot;linux/amd64,linux/arm64,linux/ppc64le&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/tags&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image-build&quot;</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;labels&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token property">&quot;app.kubernetes.io/managed-by&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tekton-pipelines&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;app.kubernetes.io/version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.6&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;hub.tekton.dev/catalog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tekton&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/memberOf&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tasks&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/pipeline&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clone-build-push&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/pipelineRun&quot;</span><span class="token operator">:</span> <span class="token string">&quot;clone-build-push-run-pp4vp&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/pipelineTask&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build-push&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;tekton.dev/task&quot;</span><span class="token operator">:</span> <span class="token string">&quot;kaniko&quot;</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;buildConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;steps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token property">&quot;entryPoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">            <span class="token string">&quot;--dockerfile=./Dockerfile&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;--context=/workspace/source/./&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;--destination=example.ncr.gov-ntruss.com/sample&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token string">&quot;--digest-file=/tekton/results/IMAGE_DIGEST&quot;</span>
</span><span class="code-line">          <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;environment&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token property">&quot;container&quot;</span><span class="token operator">:</span> <span class="token string">&quot;build-and-push&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oci://gcr.io/kaniko-project/executor@sha256:6976d731d1fc2a4e89986d833c1538946bd36b43e21fb1d0db38fe9499adc49c&quot;</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;annotations&quot;</span><span class="token operator">:</span> <span class="token keyword null">null</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token property">&quot;entryPoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;set -e\nimage=\&quot;example.ncr.gov-ntruss.com/sample\&quot;\necho -n \&quot;${image}\&quot; | tee \&quot;/tekton/results/IMAGE_URL\&quot;\n&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token keyword null">null</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;environment&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token property">&quot;container&quot;</span><span class="token operator">:</span> <span class="token string">&quot;write-url&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">            <span class="token property">&quot;image&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oci://docker.io/library/bash@sha256:c523c636b722339f41b6a431b44588ab2f762c5de5ec3bd7964420ff982fb1d9&quot;</span>
</span><span class="code-line">          <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">          <span class="token property">&quot;annotations&quot;</span><span class="token operator">:</span> <span class="token keyword null">null</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;buildStartedOn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-02-09T09:14:02Z&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;buildFinishedOn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-02-09T09:18:07Z&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;completeness&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token property">&quot;environment&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token property">&quot;materials&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;reproducible&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;materials&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oci://gcr.io/kaniko-project/executor&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;digest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;sha256&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6976d731d1fc2a4e89986d833c1538946bd36b43e21fb1d0db38fe9499adc49c&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oci://docker.io/library/bash&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;digest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;sha256&quot;</span><span class="token operator">:</span> <span class="token string">&quot;c523c636b722339f41b6a431b44588ab2f762c5de5ec3bd7964420ff982fb1d9&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git@bitbucket.org:example/sample.git&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token property">&quot;digest&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;sha1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;aaf7c80a512c1d7ee146f8462af19596497c4616&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>container image를 cosign으로 sign해서 OCI registry에 올린 것처럼, attestation 파일도 cosign으로 sign해서 OCI resgistry에 올릴 수 있다. 아래와 같이 <code>attest</code> 명령어를 사용하면 <code>image digest</code>에 <code>.attr</code>가 붙어서 OCI registry에 저장된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign attest --key import-cosign.key --predicate sample.json example.ncr.gov-ntruss.com/sample
</span></code></pre></div><p><code>download attestation</code> 명령어로 데이터를 보면 위에서 우리가 <code>In-toto</code> Envelope 규격에 맞춰서 들어가 있는 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign download attestation example.ncr.gov-ntruss.com/sample <span class="token operator">|</span> jq <span class="token builtin class-name">.</span>
</span></code></pre></div><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;payloadType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;application/vnd.in-toto+json&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token string">&quot;payload 값&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;signatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token property">&quot;keyid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token property">&quot;sig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sig 값&quot;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>signature를 verify하는 것처럼 attestation도 private key로 sign되어 있기 때문에, public key로 verify를 하게 된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify-attestation <span class="token punctuation">\</span>
</span><span class="code-line">-d <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog <span class="token punctuation">\</span>
</span><span class="code-line">--key import-cosign.pub  <span class="token punctuation">\</span>
</span><span class="code-line">example.ncr.gov-ntruss.com/sample
</span></code></pre></div><h2 id="tekton-chain"><a href="#tekton-chain" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Tekton Chain</h2><p>이제 Tekton Chain을 <a target="_blank" rel="noopener noreferrer" href="https://tekton.dev/docs/chains/signed-provenance-tutorial/">Tekton 문서의 예제</a>를 참고하여 설정해본다.</p><p>Tekton peipline은 아래와 같은 작업을 할 수 있도록 구성한다.</p><ul><li>Bitbucket에서 Source code를 가져옴</li><li>source code에 정의된 Dockerfile로 Container image를 빌드함</li><li>해당 Container image를 container registry에 Push함</li></ul><h3 id="secret-설정"><a href="#secret-설정" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Secret 설정</h3><p>Bitbucket private registry의 경우에는 Kubernetes secret에 read only ssh key를 저장한다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Secret
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>credentials
</span><span class="code-line"><span class="token atrule key">data</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">id_rsa</span><span class="token punctuation">:</span> AS0tLS<span class="token punctuation">...</span>
</span><span class="code-line">  <span class="token atrule key">known_hosts</span><span class="token punctuation">:</span> AG033S<span class="token punctuation">...</span>
</span></code></pre></div><p><code>known_hosts</code> 값은 <a target="_blank" rel="noopener noreferrer" href="https://support.atlassian.com/bitbucket-cloud/docs/configure-ssh-and-two-step-verification/">bitbucket 문서</a>에 따라서 아래처럼 요청해서 가지고온 값으로 설정해준다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">curl</span> https://bitbucket.org/site/ssh <span class="token operator">|</span> base64
</span></code></pre></div><p>그리고 Docker image를 push할 수 있도록 Secret을 생성해준다. <code>Kaniko</code>라는 tekton task를 사용할 때, Secret은 <code>config.json</code>으로 저장해야 한다. <code>주의해야 할 점</code>은 <code>아래처럼 생성하면 .dockerconfigjson으로 데이터가 저장된다.</code></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">create secret docker-registry docker-credentials <span class="token punctuation">\</span>
</span><span class="code-line">--docker-server<span class="token operator">=</span><span class="token punctuation">{</span>registry url<span class="token punctuation">}</span> <span class="token punctuation">\</span>
</span><span class="code-line">--docker-username<span class="token operator">=</span><span class="token punctuation">{</span>username<span class="token punctuation">}</span>
</span><span class="code-line">--docker-password<span class="token operator">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span>
</span></code></pre></div><p>아래와 같이 <code>config.json</code>으로 저장되어야지 <code>Kaniko</code>에서 정상적으로 해당 credentials로 Docker private registry에 push할 수 있다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Secret
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>credentials
</span><span class="code-line"><span class="token atrule key">data</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">config.json</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> base64 데이터 <span class="token punctuation">}</span>
</span></code></pre></div><h3 id="tekton-pipeline-셋팅"><a href="#tekton-pipeline-셋팅" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Tekton Pipeline 셋팅</h3><p>먼저 <code>tkn</code> 명령어를 사용하기 위해서 cli를 설치한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">brew <span class="token function">install</span> tektoncd-cli
</span></code></pre></div><p>tekon pipeline을 설치하고,</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl apply -f <span class="token punctuation">\</span>
</span><span class="code-line">https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml
</span></code></pre></div><p>tekton hub을 통해서 필요한 task를 설치한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">tkn hub <span class="token function">install</span> task git-clone
</span><span class="code-line">tkn hub <span class="token function">install</span> task kaniko
</span></code></pre></div><p>아래처럼 yaml 파일로 저장하여 배포할 수도 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">tkn hub get task git-clone --version <span class="token number">0.9</span> <span class="token operator">&gt;</span> tkn-git-clone.yaml
</span></code></pre></div><p>tekton chain을 설치한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl apply -f <span class="token punctuation">\</span>
</span><span class="code-line">https://storage.googleapis.com/tekton-releases/chains/previous/v0.20.0/release.yaml
</span></code></pre></div><p>Tekton Chain으로 SLSA attestation version 0.2 규격을 맞춰서 생성하도록 <code>slsa/v1</code>으로 지정해줬고, OCI registry에 저장할 수 있도록 stroage를 oci로 지정하였다. cosign에 생성된 signature가 위에서 본것처럼 <code>{image digest}.sig</code> tag로 registry에 push되고, attestation도 <code>{image digest}.att</code> tag로 registry에 push된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl patch configmap chains-config -n tekton-chains -p<span class="token operator">=</span><span class="token string">&#x27;{&quot;data&quot;:{&quot;artifacts.taskrun.format&quot;: &quot;slsa/v1&quot;}}&#x27;</span>
</span><span class="code-line">kubectl patch configmap chains-config -n tekton-chains -p<span class="token operator">=</span><span class="token string">&#x27;{&quot;data&quot;:{&quot;artifacts.taskrun.storage&quot;: &quot;oci&quot;}}&#x27;</span>
</span><span class="code-line">kubectl patch configmap chains-config -n tekton-chains -p<span class="token operator">=</span><span class="token string">&#x27;{&quot;data&quot;:{&quot;artifacts.oci.storage&quot;: &quot;oci&quot;}}&#x27;</span>
</span></code></pre></div><p>cosign에서는 key 생성을 Kubernetes secret에 저장할 수 있는 명령어를 아래처럼 제공한다. 이렇게 생성하면 tekton-chains namespace에 signing-secrets이라는 이름으로 cosign.pub, consign.key, cosign.password 값으로 저장된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign generate-key-pair k8s://tekton-chains/signing-secrets
</span></code></pre></div><p>Tekton pipeline을 아래와 같이 정의하고 쿠버네티스에 생성한다.</p><p>```tekton-pipeline.yaml`</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> tekton.dev/v1beta1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Pipeline
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> clone<span class="token punctuation">-</span>build<span class="token punctuation">-</span>push
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token string scalar">
</span></span><span class="code-line"><span class="token string scalar">    This pipeline clones a git repo, builds a Docker image with Kaniko and
</span></span><span class="code-line"><span class="token string scalar">    pushes it to a registry</span>
</span><span class="code-line">  <span class="token atrule key">params</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> repo<span class="token punctuation">-</span>url
</span><span class="code-line">      <span class="token atrule key">type</span><span class="token punctuation">:</span> string
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> image<span class="token punctuation">-</span>reference
</span><span class="code-line">      <span class="token atrule key">type</span><span class="token punctuation">:</span> string
</span><span class="code-line">  <span class="token atrule key">workspaces</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> shared<span class="token punctuation">-</span>data
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>credentials
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>credentials
</span><span class="code-line">  <span class="token atrule key">tasks</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> fetch<span class="token punctuation">-</span>source
</span><span class="code-line">      <span class="token atrule key">taskRef</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">name</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>clone
</span><span class="code-line">      <span class="token atrule key">workspaces</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> output
</span><span class="code-line">          <span class="token atrule key">workspace</span><span class="token punctuation">:</span> shared<span class="token punctuation">-</span>data
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> ssh<span class="token punctuation">-</span>directory
</span><span class="code-line">          <span class="token atrule key">workspace</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>credentials
</span><span class="code-line">      <span class="token atrule key">params</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> url
</span><span class="code-line">          <span class="token atrule key">value</span><span class="token punctuation">:</span> $(params.repo<span class="token punctuation">-</span>url)
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>push
</span><span class="code-line">      <span class="token atrule key">runAfter</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;fetch-source&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">taskRef</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">name</span><span class="token punctuation">:</span> kaniko
</span><span class="code-line">      <span class="token atrule key">workspaces</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> source
</span><span class="code-line">          <span class="token atrule key">workspace</span><span class="token punctuation">:</span> shared<span class="token punctuation">-</span>data
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> dockerconfig
</span><span class="code-line">          <span class="token atrule key">workspace</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>credentials
</span><span class="code-line">      <span class="token atrule key">params</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> IMAGE
</span><span class="code-line">          <span class="token atrule key">value</span><span class="token punctuation">:</span> $(params.image<span class="token punctuation">-</span>reference)
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> BUILDER_IMAGE
</span><span class="code-line">          <span class="token atrule key">value</span><span class="token punctuation">:</span> gcr.io/kaniko<span class="token punctuation">-</span>project/executor<span class="token punctuation">:</span>v1.20.0<span class="token punctuation">-</span>debug
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> CHAINS<span class="token punctuation">-</span>GIT_COMMIT
</span><span class="code-line">          <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;$(tasks.fetch-source.results.commit)&#x27;</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> CHAINS<span class="token punctuation">-</span>GIT_URL
</span><span class="code-line">          <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;$(tasks.fetch-source.results.url)&#x27;</span>
</span></code></pre></div><p>Attestation에 Build할 때 사용한 source code의 git commit과 url을 같이 남기고 싶어서 <a target="_blank" rel="noopener noreferrer" href="https://tekton.dev/docs/chains/slsa-provenance/#git-results">Tekton 문서</a>을 참고하여 params에 아래와 같이 추가를 해주었다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> CHAINS<span class="token punctuation">-</span>GIT_COMMIT
</span><span class="code-line">  <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;$(tasks.fetch-source.results.commit)&#x27;</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> CHAINS<span class="token punctuation">-</span>GIT_URL
</span><span class="code-line">  <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token string">&#x27;$(tasks.fetch-source.results.url)&#x27;</span>
</span></code></pre></div><p>이제 PipelineRun을 아래와 같이 정의하고, 생성하면 Pipeline이 실행된다.</p><p><code>tekton-pipeline-run.yaml</code></p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> tekton.dev/v1beta1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> PipelineRun
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">generateName</span><span class="token punctuation">:</span> clone<span class="token punctuation">-</span>build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>run<span class="token punctuation">-</span>
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">serviceAccountName</span><span class="token punctuation">:</span> tekton<span class="token punctuation">-</span>sa
</span><span class="code-line">  <span class="token atrule key">pipelineRef</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">name</span><span class="token punctuation">:</span> clone<span class="token punctuation">-</span>build<span class="token punctuation">-</span>push
</span><span class="code-line">  <span class="token atrule key">podTemplate</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">securityContext</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">fsGroup</span><span class="token punctuation">:</span> <span class="token number">65532</span>
</span><span class="code-line">  <span class="token atrule key">workspaces</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> shared<span class="token punctuation">-</span>data
</span><span class="code-line">      <span class="token atrule key">volumeClaimTemplate</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token atrule key">accessModes</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token punctuation">-</span> ReadWriteOnce
</span><span class="code-line">          <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token atrule key">requests</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token atrule key">storage</span><span class="token punctuation">:</span> 1Gi
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>credentials
</span><span class="code-line">      <span class="token atrule key">secret</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">secretName</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>credentials
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>credentials
</span><span class="code-line">      <span class="token atrule key">secret</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">secretName</span><span class="token punctuation">:</span> git<span class="token punctuation">-</span>credentials
</span><span class="code-line">  <span class="token atrule key">params</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> repo<span class="token punctuation">-</span>url
</span><span class="code-line">      <span class="token atrule key">value</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> bitbucket repository url 값 <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> image<span class="token punctuation">-</span>reference
</span><span class="code-line">      <span class="token atrule key">value</span><span class="token punctuation">:</span> example.ncr.gov<span class="token punctuation">-</span>ntruss.com/sample
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl create -f tekton-pipeline-run.yaml
</span></code></pre></div><p>이제 정상적으로 모든 Tekton Task가 동작하고 나면, build된 Container Image와 함께 <code>.sig</code>, <code>.att</code>의 데이터가 OCI registry에 같이 올라가게 된다. 이제 cosign으로 signature와 attestation을 verify할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify <span class="token punctuation">\</span>
</span><span class="code-line">--key k8s://tekton-chains/signing-secrets <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">example.ncr.gov-ntruss.com/sample
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify-attestation <span class="token punctuation">\</span>
</span><span class="code-line">--key k8s://tekton-chains/signing-secrets <span class="token punctuation">\</span>
</span><span class="code-line">--type slsaprovenance <span class="token punctuation">\</span>
</span><span class="code-line">--insecure-ignore-tlog<span class="token operator">=</span>true <span class="token punctuation">\</span>
</span><span class="code-line">example.ncr.gov-ntruss.com/sample
</span></code></pre></div><h2 id="npm"><a href="#npm" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>NPM</h2><p><a target="_blank" rel="noopener noreferrer" href="https://github.blog/2023-04-19-introducing-npm-package-provenance/">npm에서도 in-toto Spec에 따라서 Provenance를 같이 배포할 수 있도록 지원한다고 작년 4월에 블로그를 통해서 소개하였다.</a> 예를 들어서 <a target="_blank" rel="noopener noreferrer" href="https://www.npmjs.com/package/@sigstore/cli/v/0.6.0">@sigstore/cli</a> 패키지의 경우에는 아래와 같이 Github Action으로 Provenance를 같이 배포하여 정보가 나와있다.</p><img src="/static/images/supply-chain-security-npm.png" alt="provenance in npm"/><p><code>Transparency log entry</code>를 누르면, 이러한 metadata들이 변경되지 않게 보관할 수 있는 rekor server에 저장된 entry를 확인할 수 있다.</p><img src="/static/images/supply-chain-security-rekor.png" alt="log entry in rekor"/><p>아래와 같은 명령어로 signature를 확인하는데, Rekor log entry에서 이 signature가 변경되지 않았는지 확인하는 과정을 가진다. <code>npm install</code>할 때도 동일하게 npm registry에서 signature를 verify하고 download하게 된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> audit signatures
</span></code></pre></div><h2 id="rekor로-tekon-pipeline-image-확인"><a href="#rekor로-tekon-pipeline-image-확인" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>rekor로 tekon pipeline image 확인</h2><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/tektoncd/pipeline/releases">Tekton Pipeline release 페이지</a>에서 container image들을 rekor로 verify하는 과정을 설명하고 있다.</p><p>먼저 Go를 통해서 reckor-cli를 설치한다. binary 파일은 아래와 같이 GOPATH 경로에서 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">go <span class="token function">install</span> -v github.com/sigstore/rekor/cmd/rekor-cli@latest
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ go <span class="token function">env</span> GOPATH
</span><span class="code-line">/Users/jayground8/go
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">export</span> <span class="token variable assign-left"><span class="token constant environment">PATH</span></span><span class="token operator">=</span><span class="token constant environment">$PATH</span>:/Users/jayground8/go/bin
</span></code></pre></div><p>Rekor 서버에서 서명된 메타데이터를 올리면 UUID를 생성된다. 해당 UUID로 저장된 데이터를 가져올 수 있다. 그런데 rekor-cli 문서를 보면 UUID entry가 merkle tree hash라고 설명이 있다. Rekor에 대한 설명에서 <code>Ledger</code>라고 나와있었는데, 데이터 조작이 될 수 없도록 블록체인 방식으로 저장이 되어 있고 그래서 merkel tree hash 값을 사용하고 있는 것 같다. 이제 아래와 같이 UUID로 entry log를 가져오면 container image의 sha256 digest을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token variable assign-left">REKOR_UUID</span><span class="token operator">=</span>24296fb24b8ad77a0c94b8ccf25fa815c6b01ab90941b17a37373885d8f62efc99b17eea417bed4d
</span><span class="code-line"><span class="token variable assign-left">REKOR_ATTESTATION_IMAGES</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>rekor-cli get --uuid <span class="token string">&quot;<span class="token variable">$REKOR_UUID</span>&quot;</span> --format json <span class="token operator">|</span> jq -r .Attestation <span class="token operator">|</span> jq -r <span class="token string">&#x27;.subject[]|.name + &quot;:v0.56.0@sha256:&quot; + .digest.sha256&#x27;</span><span class="token variable">)</span></span>
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ <span class="token builtin class-name">echo</span> <span class="token variable">$REKOR_ATTESTATION_IMAGES</span>
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/controller:v0.56.0@sha256:fc5669e1bbabbf24b0ee4591ff20793643d778942e91ae52b3f7cca26d81a99b
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/entrypoint:v0.56.0@sha256:381ca58f0f911b6954530ea820bdda12850e535db9c6a85a17a02e3dd49345fb
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/nop:v0.56.0@sha256:4e627be53f78f30f73084ea0695d97397930d6f12d4cfab28d97b1aa57842881
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/sidecarlogresults:v0.56.0@sha256:4db16701d6e54d80cbb7b51e021d3f5698196d08d2f1ff33728154807ef1fe86
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/workingdirinit:v0.56.0@sha256:c488368eff45a745dd58e65f526d746abcad431796bb0e719ecf2d5f71491692
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/events:v0.56.0@sha256:c7fe97153fc32ea3eae343bcaf96761c9b0d80c8098ee35922550f0caf6887e0
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/resolvers:v0.56.0@sha256:8c0598a04420caa0ee3aeb6fef7521f93f4c41f7308ccb0c616167dc1d5fa00a
</span><span class="code-line">gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/webhook:v0.56.0@sha256:99824836bb47c1d9e21efdeff56e02b9426fe2323a22625b7af4f66a4028a5b4
</span></code></pre></div><p>최종적으로 아래와 같이 Rekor에서 가져온 Entry log의 sha256 digest 값을 release.yaml에서 정의된 container image들의 sha256 digest값과 비교해서 일치하는지 확인한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token variable assign-left">RELEASE_FILE</span><span class="token operator">=</span>https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml
</span><span class="code-line"><span class="token variable assign-left">REKOR_UUID</span><span class="token operator">=</span>24296fb24b8ad77a0c94b8ccf25fa815c6b01ab90941b17a37373885d8f62efc99b17eea417bed4d
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Obtains the list of images with sha from the attestation</span>
</span><span class="code-line"><span class="token variable assign-left">REKOR_ATTESTATION_IMAGES</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>rekor-cli get --uuid <span class="token string">&quot;<span class="token variable">$REKOR_UUID</span>&quot;</span> --format json <span class="token operator">|</span> jq -r .Attestation <span class="token operator">|</span> jq -r <span class="token string">&#x27;.subject[]|.name + &quot;:v0.56.0@sha256:&quot; + .digest.sha256&#x27;</span><span class="token variable">)</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Download the release file</span>
</span><span class="code-line"><span class="token function">curl</span> <span class="token string">&quot;<span class="token variable">$RELEASE_FILE</span>&quot;</span> <span class="token operator">&gt;</span> release.yaml
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># For each image in the attestation, match it to the release file</span>
</span><span class="code-line"><span class="token keyword">for</span> <span class="token variable for-or-select">image</span> <span class="token keyword">in</span> <span class="token variable">$REKOR_ATTESTATION_IMAGES</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
</span><span class="code-line">  <span class="token builtin class-name">printf</span> <span class="token variable">$image</span><span class="token punctuation">;</span> <span class="token function">grep</span> -q <span class="token variable">$image</span> release.yaml <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot; ===&gt; ok&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot; ===&gt; no match&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">done</span>
</span></code></pre></div><p>이렇게 container image들을 verify하고 tekon pipelie 설치를 진행한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl apply -f <span class="token punctuation">\</span>
</span><span class="code-line">https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml
</span></code></pre></div><h2 id="cosign-verify-distroless"><a href="#cosign-verify-distroless" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>cosign verify distroless</h2><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/GoogleContainerTools/distroless">Google에서 관리하는 Distoless Container Image</a>를 보면 consign으로 서명을 확인한다. Sigstore에서는 keyless 방식으로 sign하고 verify하는 것을 추천한다. keyless mode를 이해하는 것도 재미있는 주제인데, 다음에 블로그로 정리해볼려고 한다. 아래와 같이 public key 대신에 identity로 verify를 할 수가 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cosign verify <span class="token variable">$IMAGE_NAME</span> --certificate-oidc-issuer https://accounts.google.com  --certificate-identity keyless@distroless.iam.gserviceaccount.com
</span></code></pre></div><h2 id="결론"><a href="#결론" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>결론</h2><p>Kubernetes cluster를 운영할 때, Tekon Chain을 통해서 Software Supply Chain Security를 고려할 수 있다. Tekton Chain을 통해서 Container Image와 In-toto Attestation을 sign하고, OCI Registry에 push를 했다. 해당 데이터들이 OCI Registry에 <code>{image digest}.sig</code>와 <code>{image digest}.att</code> tag로 push 된다. 이렇게 Cosign으로 sign해서 저장했기 때문에, 해당 파일을 signature와 public key로 verify할 수 있다. 추가로 Rekor에 log entry가 등록되어 있으면, 변경될 수 있는 log 데이터를 통해서 signature를 추가 검증할 수 있다. 또한 GateKeeper로 Policy를 추가하여 올바르게 sign된 container image만 Kubernetes cluster에 적용할 수 있도록 구성할 수 있다. Attestation도 동일하게 sign하고 verify할 수 있는데, cosign으로 verify하는 것은 Provenance에 있는 정보들을 verify하는 것은 아니다. 따라서 Attestation으로 Software Supply Chain Security를 강화하기 위해서는 Attestation에 저장되어 있는 정보를 verify하는 로직을 추가해야 한다.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/kubernetes">kubernetes</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/tekton">tekton</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/devsecops">devsecops</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20240207-cilium-host-port">Cilium CNI와 HostPort</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20240214-containerd-LimitNOFILE">containerd nofile default 설정값</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2024</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=d(s,n))||c.enumerable});return a},g=a=\u003ek(i(l(a!=null?r(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((S,t)=\u003e{t.exports=_jsx_runtime});var v={};N(v,{default:()=\u003ef,frontmatter:()=\u003ey});var e=g(o()),y={title:\"Tekton Chain\",date:\"2024-02-11\",tags:[\"kubernetes\",\"tekton\",\"devsecops\"],images:[\"/static/images/social-banner.png\"],summary:\"Kubernetes\\uC5D0\\uC11C Tekton Chain\\uC744 \\uD1B5\\uD574\\uC11C \\uC5B4\\uB5BB\\uAC8C Software Supply Chain Security\\uB97C \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB294\\uC9C0 \\uD655\\uC778\\uD588\\uB2E4. Tekton Pipeline\\uC73C\\uB85C git clone\\uC744 \\uD558\\uACE0, container image\\uB97C build\\uD558\\uACE0, \\uCD5C\\uC885\\uC801\\uC73C\\uB85C OCI registry\\uC5D0 push\\uD558\\uB3C4\\uB85D \\uAD6C\\uC131\\uD588\\uB2E4. \\uADF8\\uB9AC\\uACE0 Tekton Chain\\uC774 \\uC5B4\\uB5BB\\uAC8C in-toto spec\\uC758 Attestation \\uC815\\uBCF4\\uB97C \\uB0A8\\uAE30\\uB294\\uC9C0 \\uD655\\uC778\\uD558\\uC600\\uB2E4.\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",code:\"code\",ul:\"ul\",li:\"li\",pre:\"pre\",h3:\"h3\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"Tekton Chain\\uC740 Tekton\\uC73C\\uB85C Pipeline\\uC744 \\uC6B4\\uC601\\uD560 \\uB54C, Supply Chain Security\\uB97C \\uC27D\\uAC8C \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD574\\uC8FC\\uB294 Kubernetes controller\\uC774\\uB2E4. Tekton Chain\\uC744 \\uC774\\uD574\\uD558\\uAE30 \\uC704\\uD574 \\uC54C\\uC544\\uC57C \\uD560 \\uC6A9\\uC5B4\\uB4E4\\uC744 \\uBA3C\\uC800 \\uC0B4\\uD3B4\\uBCF4\\uACE0, Tekton Chain\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC Container Registry\\uC5D0 Attestation \\uC815\\uBCF4\\uB97C \\uB0A8\\uACA8\\uBCF4\\uC790.\"}),(0,e.jsxs)(n.h2,{id:\"software-supply-chain-security\",children:[(0,e.jsx)(n.a,{href:\"#software-supply-chain-security\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Software Supply Chain Security\"]}),(0,e.jsxs)(n.p,{children:[\"\\uB2E4\\uC591\\uD55C \\uACF5\\uAE09\\uC5C5\\uCCB4\\uC5D0\\uC11C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 \\uBD80\\uD488\\uB4E4\\uC774 \\uBAA8\\uC5EC\\uC11C \\uC644\\uC131\\uCC28\\uAC00 \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uAC8C \\uB418\\uB294\\uB370, \\uC0AC\\uC6A9\\uB41C \\uBD80\\uD488 \\uC911\\uC5D0 \\uC77C\\uBD80\\uC5D0 \\uACB0\\uD568\\uC774 \\uC0DD\\uACA8\\uB3C4 \\uC644\\uC131\\uCC28\\uC5D0 \\uC548\\uC804 \\uBB38\\uC81C\\uB97C \\uC57C\\uAE30\\uD560 \\uC218 \\uC788\\uB2E4. \\uC18C\\uD504\\uD2B8\\uC6E8\\uC5B4\\uB3C4 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C \\uB2E4\\uC591\\uD55C Library, Package, Tool\\uB4E4\\uC774 \\uD569\\uCCD0\\uC838 \\uCD5C\\uC885 \\uACB0\\uACFC\\uBB3C\\uC774 \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uAC8C \\uB41C\\uB2E4. \\uC774\\uB807\\uAC8C \\uC758\\uC874\\uC131\\uC744 \\uAC00\\uC9C0\\uB294 \\uB2E4\\uC591\\uD55C \\uC18C\\uC2A4\\uC5D0\\uC11C \\uC18C\\uD504\\uD2B8\\uC6E8\\uC5B4\\uC758 \\uBCF4\\uC548 \\uC774\\uC288\\uB97C \\uAC00\\uC838\\uC62C \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/watch?v=XHW3pxXg_dc\u0026t=1240s\",children:\"CNCF In-Toto\\uC5D0 \\uB300\\uD574\\uC11C \\uBC1C\\uD45C\\uD55C \\uC138\\uC158\"}),\"\\uC5D0\\uC11C Cloud Native Application\\uC5D0\\uC11C \\uC5B4\\uB5BB\\uAC8C Software Supply Chain \\uBCF4\\uC548\\uC744 \\uAC00\\uC838\\uAC08 \\uC218 \\uC788\\uC744\\uC9C0 \",(0,e.jsx)(n.code,{children:\"In-Toto\"}),\" \\uD504\\uB85C\\uC81D\\uD2B8\\uC640 \\uD568\\uAED8 \\uC124\\uBA85\\uD55C\\uB2E4. Git\\uC73C\\uB85C\\uBD80\\uD130 Source code\\uB97C \\uAC00\\uC838\\uC624\\uACE0, Compile\\uD558\\uC5EC \\uCD5C\\uC885\\uC801\\uC73C\\uB85C package\\uB97C publish\\uD558\\uB294 pipeline\\uB97C \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C \\uC0DD\\uAC01\\uD574\\uBCF4\\uC790. \\uC6B0\\uB9AC\\uAC00 public repository\\uC5D0\\uC11C \\uC18C\\uC2A4 \\uCF54\\uB4DC\\uB97C \\uBC1B\\uC544 \\uC62C \\uB54C, \\uD574\\uCEE4\\uC5D0 \\uC758\\uD574\\uC11C \\uD574\\uB2F9 repository\\uAC00 \\uB2E4\\uB978 \\uCABD\\uC73C\\uB85C Mirror\\uAC00 \\uB418\\uC5B4 \\uC870\\uC791\\uB41C \\uC18C\\uC2A4\\uCF54\\uB4DC\\uB97C \\uBC1B\\uC744 \\uC218\\uB3C4 \\uC788\\uB2E4. \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C Package manager\\uB3C4 \\uD574\\uCEE4\\uC5D0 \\uC758\\uD574\\uC11C \\uB2E4\\uB978 \\uACF3\\uC5D0\\uC11C \\uBCC0\\uACBD\\uB41C package\\uB97C \\uBC1B\\uC544\\uC11C \\uC0AC\\uC6A9\\uD558\\uAC8C \\uB420 \\uC218 \\uC788\\uB2E4. \\uBC1C\\uD45C\\uC5D0\\uC11C \\uC124\\uBA85\\uD55C \",(0,e.jsx)(n.code,{children:\"In-Toto\"}),\" \\uD504\\uB85C\\uC81D\\uD2B8\\uB97C \\uD1B5\\uD55C \\uD574\\uACB0\\uCC45\\uC740 \\uAC01 \\uB2E8\\uACC4\\uB9C8\\uB2E4 \\uCD9C\\uCC98\\uB97C \\uB0A8\\uAE30\\uACE0 \\uADF8\\uAC83\\uC744 \\uD1B5\\uD574\\uC11C \\uBBFF\\uC744 \\uC218 \\uC788\\uB294 \\uD504\\uB85C\\uC138\\uC2A4\\uB97C \\uAD6C\\uCD95\\uD558\\uB294 \\uAC83\\uC774\\uB2E4. \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C \\uC18C\\uC2A4\\uCF54\\uB4DC\\uB294 \\uC5B4\\uB5A4 repository URL\\uC5D0\\uC11C \\uC5B4\\uB5A4 commit\\uC744 \\uC0AC\\uC6A9\\uD588\\uACE0, signing commit\\uC73C\\uB85C \\uC5B4\\uB5A4 public key\\uB85C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB294\\uC9C0 \\uC815\\uBCF4\\uB97C \\uB0A8\\uAE34\\uB2E4. Build\\uB2E8\\uACC4\\uC5D0\\uC11C\\uB294 compiler\\uC758 \\uC885\\uB958, \\uBC84\\uC804, \\uC0AC\\uC6A9\\uB41C \\uBA85\\uB839\\uC5B4\\uC5D0 \\uB300\\uD55C \\uC815\\uBCF4\\uB4E4\\uC744 \\uB0A8\\uAE38 \\uC218 \\uC788\\uC744 \\uAC83\\uC774\\uB2E4. \\uC774\\uB7EC\\uD55C \\uAC01 \\uB2E8\\uACC4\\uC758 \\uC815\\uBCF4\\uB4E4\\uC744 \\uC5F0\\uACB0\\uD55C \\uBA54\\uD0C0\\uB370\\uC774\\uD130\\uB97C \\uCD5C\\uC885 \\uACB0\\uACFC\\uBB3C\\uACFC \\uD568\\uAED8 \\uAC19\\uC774 \\uBCF4\\uAD00\\uD55C\\uB2E4. \\uC0AC\\uC6A9\\uC790\\uB294 \\uCD5C\\uC885 \\uACB0\\uACFC\\uBB3C\\uACFC \\uAC19\\uC774 \\uC800\\uC7A5\\uB41C \\uBA54\\uD0C0\\uB370\\uC774\\uD130\\uB97C \\uD1B5\\uD574\\uC11C \\uAC04 \\uB2E8\\uACC4\\uB9C8\\uB2E4 \\uCD9C\\uCC98\\uB97C \\uD655\\uC778\\uD558\\uACE0 \\uCD9C\\uCC98\\uB97C \\uC99D\\uBA85\\uD560 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsxs)(n.h2,{id:\"in-toto-attestation\",children:[(0,e.jsx)(n.a,{href:\"#in-toto-attestation\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"In-Toto Attestation\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/in-toto/attestation\",children:\"In-toto Attestation Framework\"}),\"\\uB294 \\uC5B4\\uB5A4 \\uC815\\uBCF4\\uB97C \\uB0A8\\uACA8\\uC57C\\uD558\\uB294\\uC9C0 \\uADDC\\uACA9\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. [attestation layer v1 \\uADDC\\uACA9] (\",(0,e.jsx)(n.a,{href:\"https://github.com/in-toto/attestation/tree/main/spec/v1)%EC%9D%84\",children:\"https://github.com/in-toto/attestation/tree/main/spec/v1)\\uC744\"}),\" \\uD655\\uC778\\uD574\\uBCF4\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC6A9\\uC5B4\\uAC00 \\uC124\\uBA85\\uB418\\uC5B4 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Envelope: Handles authentication and serialization\"}),(0,e.jsx)(n.li,{children:\"Statement: Binds the attestation to a particular subject and unambiguously identifies the types of the predicate\"}),(0,e.jsx)(n.li,{children:\"Predicate: Contains arbitrary metadata about a subject artifact, with a type-specific schema.\"})]}),(0,e.jsxs)(n.p,{children:[\"Tekton Chain\\uC73C\\uB85C \\uC0DD\\uC131\\uB418\\uB294 \\uB370\\uC774\\uD130\\uB97C \\uD655\\uC778\\uD558\\uBA74, \\uBA3C\\uC800 \\uC544\\uB798\\uC640 \\uAC19\\uC774 Envlope\\uC774\\uB77C\\uB294 \\uADDC\\uACA9 \\uC815\\uC758\\uB97C \\uBCFC \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(n.code,{children:\"payloadType\"}),\"\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"json\"}),\"\\uD615\\uC2DD\\uC73C\\uB85C \\uC815\\uC758\\uAC00 \\uB418\\uC5C8\\uACE0, \",(0,e.jsx)(n.code,{children:\"payload\"}),\"\\uB294 base64\\uB85C \\uC778\\uCF54\\uB529 \\uB41C \\uAC12\\uC774 \\uB4E4\\uC5B4\\uAC00 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payloadType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"application/vnd.in-toto+json\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payload\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{base64 encoded payload}\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Envelope \\uC124\\uBA85\\uC5D0 \",(0,e.jsx)(n.code,{children:\"Handles authentication\"}),\"\\uC774\\uB77C\\uACE0 \\uB418\\uC5B4 \\uC788\\uB2E4. Tekton Chain\\uC5D0\\uC11C Envelope \\uB370\\uC774\\uD130\\uB97C \\uC800\\uC7A5\\uD560 \\uB54C \\uC544\\uB798\\uC640 \\uAC19\\uC774 signing\\uC744 \\uD558\\uACE0 signature\\uC744 \\uAC19\\uC774 \\uB0A8\\uAE30\\uAC8C \\uB41C\\uB2E4. signatures\\uC740 Envelope \\uADDC\\uACA9\\uC5D0 \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uB294 field\\uB294 \\uC544\\uB2C8\\uC9C0\\uB9CC, Envelope\\uC744 siging\\uD558\\uACE0 verify\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 \",(0,e.jsx)(n.code,{children:\"Handles authentication\"}),\"\\uC774\\uB77C\\uACE0 \\uC124\\uBA85\\uD574\\uB193\\uC740\\uAC70 \\uC544\\uB2D0\\uAE4C \\uC0DD\\uAC01\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payloadType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"application/vnd.in-toto+json\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payload\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{base64 encoded payload}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"signatures\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"keyid\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sig\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C Envelope\\uC758 \",(0,e.jsx)(n.code,{children:\"payload\"}),\" \\uAC12\\uC744 \\uB514\\uCF54\\uB529\\uD558\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uB370\\uC774\\uD130 \\uD615\\uC2DD\\uC744 \\uAC00\\uC9C0\\uAC8C \\uB41C\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://github.com/in-toto/attestation/tree/main/spec/v0.1.0#statement\",children:\"Statement\"}),\"\\uC758 \\uADDC\\uACA9\\uACFC \",(0,e.jsx)(n.a,{href:\"https://github.com/in-toto/attestation/tree/main/spec/v0.1.0#predicate\",children:\"Predicate\"}),\" \\uADDC\\uACA9\\uC744 \\uD568\\uAED8 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4. \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C \\uC18C\\uC2A4\\uCF54\\uB4DC\\uB85C\\uBD80\\uD130 Container Image\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0 Container Registry\\uC5D0 Push\\uB418\\uB294 Tekton Pipeline\\uC774 \\uC788\\uB2E4\\uBA74, \",(0,e.jsx)(n.code,{children:\"subject\"}),\"\\uB294 \\uCD5C\\uC885 \\uC0B0\\uCD9C\\uBB3C\\uC778 container image\\uAC00 \\uC800\\uC7A5\\uB41C container registry URL\\uACFC \\uD574\\uB2F9 image\\uC758 digest \\uAC12\\uC774 \\uC815\\uC758 \\uB41C\\uB2E4. \",(0,e.jsx)(n.code,{children:\"Predicate\"}),\"\\uB294 \",(0,e.jsx)(n.a,{href:\"https://slsa.dev/spec/v1.0-rc1/provenance\",children:\"SLSA Provenance \\uD615\\uC2DD\"}),\"\\uC73C\\uB85C Container Image\\uAC00 \\uCD5C\\uC885 \\uC0DD\\uC131\\uB418\\uAE30\\uAE4C\\uC9C0\\uC758 \\uAC01 \\uB2E8\\uACC4\\uC5D0 \\uB300\\uD55C \\uC815\\uBCF4\\uB4E4\\uC744 \\uB2F4\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"_type\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"https://in-toto.io/Statement/v0.1\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"predicateType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"https://slsa.dev/provenance/v0.2\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"subject\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"name\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{container image\\uC758 \\uACBD\\uC6B0\\uC5D0 container registry URL}\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"digest\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sha256\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{image digest \\uAC12}\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"predicate\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uB807\\uAC8C \\uADDC\\uACA9\\uC5D0 \\uB530\\uB77C\\uC11C \\uCD5C\\uC885 \\uC18C\\uD504\\uD2B8\\uC6E8\\uC5B4 \\uC0B0\\uCD9C\\uBB3C\\uC774 \\uC5B4\\uB5A4 \\uB2E8\\uACC4\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uAC8C \\uB418\\uC5C8\\uB294\\uC9C0 \\uBA54\\uD0C0\\uB370\\uC774\\uD130\\uB97C \\uB0A8\\uAE30\\uACE0, \\uADF8\\uAC83\\uC744 \\uCD5C\\uC885 \\uC0B0\\uCD9C\\uBB3C\\uACFC \\uAC19\\uC774 \\uBCF4\\uAD00\\uD558\\uC5EC \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"slsa\",children:[(0,e.jsx)(n.a,{href:\"#slsa\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SLSA\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC704\\uC5D0\\uC11C Predicate type\\uC73C\\uB85C \",(0,e.jsx)(n.code,{children:\"SLSA Provenance\"}),\"\\uAC00 \\uC0AC\\uC6A9\\uB418\\uC5C8\\uB2E4. SLSA\\uB294 \",(0,e.jsx)(n.code,{children:\"The Supply Chain Levels for Software Artifacts\"}),\"\\uC758 \\uC57D\\uC790\\uB85C SLSA Framework\\uB294 Supply chain security\\uC5D0 \\uB300\\uD55C checklist\\uB97C \\uC81C\\uACF5\\uD55C\\uB2E4. SLSA Framework\\uB294 Level\\uC744 \\uB098\\uB204\\uC5B4\\uC11C \\uAC01 Level\\uC5D0 \\uD574\\uB2F9\\uD558\\uB294 \\uAC00\\uC774\\uB4DC\\uB77C\\uC778\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. Level1\\uBD80\\uD130 Level4\\uAE4C\\uC9C0 \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uB294\\uB370, Level\\uC774 \\uB192\\uC744 \\uC218\\uB85D Supply chain\\uC5D0 \\uB300\\uD55C \\uB354 \\uB192\\uC740 \\uC2E0\\uB8B0\\uB97C \\uC81C\\uACF5\\uD560 \\uC218 \\uC788\\uB294 \\uAD6C\\uC131\\uC774\\uB77C\\uACE0 \\uD310\\uB2E8\\uD560 \\uC218 \\uC788\\uB2E4. \\uADF8\\uB7F0\\uB370 \",(0,e.jsx)(n.a,{href:\"https://tekton.dev/blog/2023/04/19/getting-to-slsa-level-2-with-tekton-and-tekton-chains/\",children:\"Tekton Chain\\uC744 \\uC0AC\\uC6A9\\uD560 \\uACBD\\uC6B0\\uC5D0 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C SLSA Level 2\\uC5D0 \\uB300\\uD55C \\uAC00\\uC774\\uB4DC\\uB77C\\uC778\\uC744 \\uC900\\uC218\"}),\"\\uD558\\uC5EC \\uD30C\\uC774\\uD504\\uB77C\\uC778\\uC744 \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB2E4. \\uC774\\uB807\\uAC8C SLSA framework\\uC758 \\uAC00\\uC774\\uB4DC\\uB77C\\uC778\\uC5D0 \\uB530\\uB77C\\uC11C \\uAD6C\\uC131\\uB418\\uAE30 \\uB54C\\uBB38\\uC5D0 Predicate\\uAC00 SLSA Provenance \\uD615\\uC2DD\\uC73C\\uB85C \\uB0A8\\uAC8C \\uB418\\uB294 \\uAC83\\uC774\\uB2E4.\"]}),(0,e.jsxs)(n.h2,{id:\"sigstore\",children:[(0,e.jsx)(n.a,{href:\"#sigstore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Sigstore\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://tekton.dev/docs/chains/signed-provenance-tutorial/\",children:\"Tekton \\uBB38\\uC11C\\uC5D0 Tekton Chain\\uC744 \\uD1B5\\uD574\\uC11C \\uC804\\uC790\\uC11C\\uBA85\\uB41C \\uCD9C\\uCC98 \\uC815\\uBCF4\\uB97C \\uB0A8\\uAE30\\uB294 \\uC608\\uC81C\"}),\"\\uAC00 \\uC798 \\uC124\\uBA85\\uB418\\uC5B4 \\uC788\\uB2E4. \\uD574\\uB2F9 \\uBB38\\uC11C\\uC5D0 \\uAD6C\\uC870\\uB3C4 \\uC774\\uBBF8\\uC9C0\\uAC00 \\uC544\\uB798\\uCC98\\uB7FC \\uC788\\uB2E4. \\uADF8\\uB9BC\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"Cosign\"}),\"\\uACFC \",(0,e.jsx)(n.code,{children:\"Rekor\"}),\"\\uAC00 \\uBCF4\\uC778\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/supply-chain-security-tekton-example.png\",alt:\"tekton chain example\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Cosign\"}),\"\\uACFC \",(0,e.jsx)(n.code,{children:\"Rekor\"}),\"\\uB294 \",(0,e.jsx)(n.a,{href:\"https://www.sigstore.dev/how-it-works\",children:\"Sigstore Project\"}),\"\\uC5D0 \\uC18D\\uD574\\uC788\\uB294\\uB370, \",(0,e.jsx)(n.code,{children:\"Cosign\"}),\"\\uC740 \\uB2E4\\uC591\\uD55C Artifact\\uB4E4\\uC744 Sign\\uD558\\uACE0 Verify\\uD560 \\uC218 \\uC788\\uB294 \\uD234\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. Rekor\\uB294 \\uC6D0\\uC7A5\\uC73C\\uB85C \\uBCC0\\uACBD\\uB420 \\uC218 \\uC5C6\\uB3C4\\uB85D Log entry\\uB97C \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uD574\\uC900\\uB2E4. Tekon Chain\\uC744 \\uAD6C\\uC131\\uD560 \\uB54C, \",(0,e.jsx)(n.code,{children:\"Cosign\"}),\"\\uC744 \\uD1B5\\uD574\\uC11C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 Container Image\\uB97C Sign\\uD558\\uACE0 Signature\\uB97C OCI Registry\\uC5D0 \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB2E4. \\uB610 Tekon Chain\\uC5D0\\uC11C \\uC0DD\\uC131\\uB41C Attestation \\uB370\\uC774\\uD130\\uB97C Sign\\uD558\\uACE0 \\uB3D9\\uC77C\\uD558\\uAC8C Signature\\uC640 \\uD568\\uAED8 OCI Registry\\uC5D0 \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(n.code,{children:\"Cosign\"}),\"\\uC744 \\uD1B5\\uD574\\uC11C Image signature, attestation signature\\uB97C verify\\uD560 \\uC218 \\uC788\\uB2E4. Rekor\\uC5D0\\uB294 Attestation \\uC815\\uBCF4\\uB97C \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB294\\uB370, \\uBE14\\uB85D\\uCCB4\\uC778 \\uAE30\\uBC18\\uC73C\\uB85C \\uB098\\uC911\\uC5D0 \\uBCC0\\uACBD\\uD560 \\uC218 \\uC5C6\\uB3C4\\uB85D \\uC800\\uC7A5\\uD558\\uAC8C \\uB418\\uACE0 \\uC6D0\\uC7A5\\uC5D0\\uC11C ID\\uB85C \\uAC80\\uC0C9\\uD558\\uC5EC \\uCD9C\\uCC98 \\uC815\\uBCF4\\uB4E4\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.h3,{id:\"cosign-sign--verify\",children:[(0,e.jsx)(n.a,{href:\"#cosign-sign--verify\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Cosign sign / verify\"]}),(0,e.jsx)(n.p,{children:\"Cosign\\uC73C\\uB85C Container image\\uB97C sign\\uD558\\uACE0 verify\\uD574\\uBCF4\\uC790. \\uBA3C\\uC800 cosign\\uB97C \\uC124\\uCE58\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"brew \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` cosign\n`]})})}),(0,e.jsxs)(n.p,{children:[\"openssl\\uACFC \\uBE44\\uAD50\\uD574\\uBCF4\\uAE30 \\uC704\\uD574\\uC11C openssl\\uC73C\\uB85C Private key\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#signature-schemes\",children:\"Cosign Signature SPEC \\uBB38\\uC11C\"}),\"\\uB97C \\uD655\\uC778\\uD558\\uBA74 ECDSA-P256\\uB97C \\uC9C0\\uC6D0\\uD574\\uC57C\\uD55C\\uB2E4\\uACE0 \\uB098\\uC640\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC0DD\\uC131\\uD588\\uB2E4. Elliptic Curve Digital Signature Algorithm(ECDSA)\\uB294 Elliptic Curve Cryptography(ECC)\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 key\\uB85C Signature\\uB97C \\uB9CC\\uB4DC\\uB294 \\uAC83\\uC744 \\uB9D0\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl ecparam -name prime256v1 -genkey -noout -out private.key\n`})})}),(0,e.jsxs)(n.p,{children:[\"openssl\\uB41C private key\\uB97C cosign\\uC73C\\uB85C import\\uD560 \\uC218 \\uC788\\uB294 \\uBA85\\uB839\\uC5B4\\uAC00 \\uC788\\uC5B4\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC2E4\\uD589\\uD55C\\uB2E4. cosign\\uC5D0\\uC11C private key\\uB294 \\uC554\\uD638\\uB97C \\uC124\\uC815\\uD574\\uC11C key\\uB97C \\uC554\\uD638\\uD654\\uD55C\\uB2E4. \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC2E4\\uD589\\uB418\\uBA74 \",(0,e.jsx)(n.code,{children:\"import-cosign.key\"}),\"\\uC640 \",(0,e.jsx)(n.code,{children:\"import-cosign.pub\"}),\" \\uD30C\\uC77C\\uC774 \\uC0DD\\uC131\\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ cosign import-key-pair -key private.key\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"WARNING: the -key flag is deprecated and will be removed \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),` a future release. Please use the --key flag instead.\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Enter password \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` private key:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Enter password \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` private key again:\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Private key written to import-cosign.key\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Public key written to import-cosign.pub\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \\uC0DD\\uC131\\uB41C key pair\\uB85C \\uC544\\uB798\\uC640 \\uAC19\\uC774 sign\\uC744 \\uD558\\uACE0 verify\\uD560 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(n.code,{children:\"tlog-upload=false\"}),\"\\uB294 Rekor\\uC5D0 log entry\\uB97C upload\\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC124\\uC815\\uD588\\uACE0, \",(0,e.jsx)(n.code,{children:\"upload=false\"}),\"\\uB294 OCI registry\\uC5D0 signature\\uC744 \\uC62C\\uB9AC\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC600\\uB2E4. \\uB300\\uC2E0\\uC5D0 \",(0,e.jsx)(n.code,{children:\"output-signature\"}),\"\\uC640 \",(0,e.jsx)(n.code,{children:\"output-payload\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C \\uD574\\uB2F9 \\uAC12\\uC744 Local\\uC5D0 \\uC800\\uC7A5\\uD558\\uB3C4\\uB85D \\uD558\\uC600\\uB2E4. \",(0,e.jsx)(n.code,{children:\"upload=true\"}),\"\\uB85C \\uD558\\uBA74 OCI registry\\uC5D0 \\uD574\\uB2F9 \\uB370\\uC774\\uD130\\uB97C \\uC62C\\uB9AC\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign sign \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.key \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--tlog-upload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"false \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--upload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"false \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--output-signature\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"signature.dat \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--output-payload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"payload.dat \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414\n`})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.pub \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--signature\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"signature.dat \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--payload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"payload.dat \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414\n`})]})}),(0,e.jsxs)(n.p,{children:[\"payload.dat\\uB97C \\uBCF4\\uBA74, \",(0,e.jsx)(n.a,{href:\"https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#payloads\",children:\"Cosign Signature SPEC \\uBB38\\uC11C\\uC5D0 \\uB098\\uC628 \\uAC83\\uCC98\\uB7FC\"}),\" \\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"cat\"}),\" payload.dat\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"critical\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"identity\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"docker-reference\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"registry.hub.docker.com/library/busybox\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"image\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"docker-manifest-digest\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"type\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"cosign container image signature\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"optional\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),` null\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"crane\"}),\"\\uC744 \\uC0AC\\uC6A9\\uD574\\uC11C DockerHub public image \",(0,e.jsx)(n.code,{children:\"busybox\"}),\"\\uC758 manifest\\uB97C \\uC800\\uC7A5\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"crane manifest registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),` manifest.json\n`]})})}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB9AC\\uACE0 sha256 digest\\uB97C \\uC0DD\\uC131\\uD558\\uBA74, \\uC704\\uC758 payload\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"docker-manifest-digest\"}),\" \\uAC12\\uACFC \\uB3D9\\uC77C\\uD55C \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ sha256sum manifest.json\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414  manifest.json\n`})]})}),(0,e.jsx)(n.p,{children:\"openssl\\uC744 \\uD1B5\\uD574\\uC11C \\uC774 payload\\uB97C private key\\uB85C sign \\uD574\\uBCF8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl dgst -sha256 -sign private.key -out sig.openssl payload.dat\n`})})}),(0,e.jsxs)(n.p,{children:[\"openssl\\uB85C \\uC0DD\\uC131\\uB41C signature\\uB85C cosign verify\\uB97C \\uD574\\uB3C4 \\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C verify\\uAC00 \\uB41C\\uB2E4. \",(0,e.jsx)(n.code,{children:\"insecure-ignore-tlog\"}),\"\\uB294 rekor\\uC5D0\\uC11C log entry\\uB97C \\uAC00\\uC838\\uC640\\uC11C \\uAC80\\uC99D\\uD558\\uB294 \\uB2E8\\uACC4\\uB97C \\uC0DD\\uB7B5\\uD558\\uB294 \\uC124\\uC815\\uC774\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.pub \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--signature\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"sig.openssl \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--payload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"payload.dat \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414\n`})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"WARNING: Skipping tlog verification is an insecure practice that lacks of transparency and auditability verification \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` the signature.\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Verification \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),` registry.hub.docker.com/library/busybox@sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414 --\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`The following checks were performed on each of these signatures:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - The cosign claims were validated\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  - The signatures were verified against the specified public key\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"critical\"'}),\":\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"identity\"'}),\":\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"docker-reference\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"registry.hub.docker.com/library/busybox\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\",\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"image\"'}),\":\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"docker-manifest-digest\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"sha256:538721340ded10875f4710cad688c70e5d0ecb4dcd5e7d0c161f301f36f79414\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\",\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"type\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"cosign container image signature\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\",\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"optional\"'}),\":null\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC Container Registry\\uC5D0 cosign\\uC744 \\uD1B5\\uD574\\uC11C signature\\uB97C upload\\uD574\\uBCF8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"docker login -u \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"username\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"private image registry url\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign sign \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.key \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--tlog-upload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"false \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"-a \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"timestamp\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1707360932\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--upload\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`examle.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc\n`})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"triangulate\"}),\" \\uBA85\\uB839\\uC5B4\\uB85C signature\\uAC00 OCI registry\\uC5D0 \\uC5B4\\uB5A4 tag\\uB85C \\uC800\\uC7A5\\uC774 \\uB418\\uC5C8\\uB294\\uC9C0 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(n.code,{children:\"image digest\"}),\"\\uC5D0 \",(0,e.jsx)(n.code,{children:\".sig\"}),\"\\uAC00 \\uBD99\\uC740 tag\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ cosign triangulate example.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`example.ncr.gov-ntruss.com/sample:sha256-9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc.sig\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C signature\\uC744 image\\uB85C\\uBD80\\uD130 \\uBC1B\\uC544\\uC624\\uBA74 \",(0,e.jsx)(n.a,{href:\"https://github.com/sigstore/cosign/blob/main/specs/SIGNATURE_SPEC.md#payloads\",children:\"Cosign Signature SPEC\"}),\"\\uD615\\uC2DD\\uC5D0 \\uB9DE\\uCDB0\\uC11C \\uB370\\uC774\\uD130\\uAC00 \\uC800\\uC7A5\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ cosign download signature example.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Base64Signature\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{sig\\uAC12}\"'}),`,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Payload\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"{payload\\uAC12}\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Cert\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),` null,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Chain\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),` null,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Bundle\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),` null,\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"RFC3161Timestamp\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),` null\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C verify\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.pub \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`examle.ncr.gov-ntruss.com/sample@sha256:9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc\n`})]})}),(0,e.jsxs)(n.h3,{id:\"attestation\",children:[(0,e.jsx)(n.a,{href:\"#attestation\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Attestation\"]}),(0,e.jsx)(n.p,{children:\"Tekon Pipeline\\uC73C\\uB85C Bitbucket\\uC5D0 Source Code\\uB97C Clone\\uD558\\uACE0, Dockerfile\\uC73C\\uB85C image\\uB97C build\\uD558\\uACE0 Container Registry\\uC5D0 push\\uD588\\uB2E4\\uACE0 \\uD558\\uC790. \\uADF8\\uB7EC\\uBA74 Tekton Chain\\uC744 \\uD1B5\\uD574\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 Attestation \\uC815\\uBCF4\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"sample.json\"})}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"_type\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"https://in-toto.io/Statement/v0.1\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"predicateType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"https://slsa.dev/provenance/v0.2\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"subject\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"name\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example.ncr.gov-ntruss.com/sample\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"digest\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sha256\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"9a0d19a51878b834282d2acf806f05053a801d79fc1de166973465731cd4b5bc\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"predicate\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"builder\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"id\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"https://tekton.dev/chains/v2\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"buildType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tekton.dev/v1beta1/TaskRun\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"invocation\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"configSource\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"parameters\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"BUILDER_IMAGE\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"gcr.io/kaniko-project/executor:v1.20.0-debug\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"CHAINS-GIT_COMMIT\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"aaf7c80a512c1d7ee146f8462af19596497c4616\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"CHAINS-GIT_URL\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"git@bitbucket.org:example/sample.git\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"CONTEXT\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"DOCKERFILE\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./Dockerfile\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"EXTRA_ARGS\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"IMAGE\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example.ncr.gov-ntruss.com/sample\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"environment\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"annotations\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"pipeline.tekton.dev/affinity-assistant\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"affinity-assistant-fdbbf5ed3d\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"pipeline.tekton.dev/release\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"e1c7828\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/categories\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Image Build\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/displayName\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Build and upload container image using Kaniko\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/pipelines.minVersion\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.17.0\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/platforms\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"linux/amd64,linux/arm64,linux/ppc64le\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/tags\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"image-build\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"labels\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"app.kubernetes.io/managed-by\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tekton-pipelines\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"app.kubernetes.io/version\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.6\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"hub.tekton.dev/catalog\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tekton\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/memberOf\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tasks\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/pipeline\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"clone-build-push\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/pipelineRun\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"clone-build-push-run-pp4vp\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/pipelineTask\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"build-push\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"tekton.dev/task\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"kaniko\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"buildConfig\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"steps\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"entryPoint\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"arguments\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--dockerfile=./Dockerfile\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--context=/workspace/source/./\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--destination=example.ncr.gov-ntruss.com/sample\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--digest-file=/tekton/results/IMAGE_DIGEST\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"environment\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"container\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"build-and-push\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"image\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"oci://gcr.io/kaniko-project/executor@sha256:6976d731d1fc2a4e89986d833c1538946bd36b43e21fb1d0db38fe9499adc49c\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"annotations\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"entryPoint\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"set -e\\\\nimage=\\\\\"example.ncr.gov-ntruss.com/sample\\\\\"\\\\necho -n \\\\\"${image}\\\\\" | tee \\\\\"/tekton/results/IMAGE_URL\\\\\"\\\\n\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"arguments\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword null\",children:\"null\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"environment\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"container\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"write-url\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"image\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"oci://docker.io/library/bash@sha256:c523c636b722339f41b6a431b44588ab2f762c5de5ec3bd7964420ff982fb1d9\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"annotations\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"metadata\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"buildStartedOn\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"2024-02-09T09:14:02Z\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"buildFinishedOn\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"2024-02-09T09:18:07Z\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"completeness\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"parameters\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"environment\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"materials\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"reproducible\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"materials\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"uri\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"oci://gcr.io/kaniko-project/executor\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"digest\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sha256\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"6976d731d1fc2a4e89986d833c1538946bd36b43e21fb1d0db38fe9499adc49c\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"uri\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"oci://docker.io/library/bash\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"digest\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sha256\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"c523c636b722339f41b6a431b44588ab2f762c5de5ec3bd7964420ff982fb1d9\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"uri\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"git@bitbucket.org:example/sample.git\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"digest\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sha1\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"aaf7c80a512c1d7ee146f8462af19596497c4616\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"container image\\uB97C cosign\\uC73C\\uB85C sign\\uD574\\uC11C OCI registry\\uC5D0 \\uC62C\\uB9B0 \\uAC83\\uCC98\\uB7FC, attestation \\uD30C\\uC77C\\uB3C4 cosign\\uC73C\\uB85C sign\\uD574\\uC11C OCI resgistry\\uC5D0 \\uC62C\\uB9B4 \\uC218 \\uC788\\uB2E4. \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"attest\"}),\" \\uBA85\\uB839\\uC5B4\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74 \",(0,e.jsx)(n.code,{children:\"image digest\"}),\"\\uC5D0 \",(0,e.jsx)(n.code,{children:\".attr\"}),\"\\uAC00 \\uBD99\\uC5B4\\uC11C OCI registry\\uC5D0 \\uC800\\uC7A5\\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`cosign attest --key import-cosign.key --predicate sample.json example.ncr.gov-ntruss.com/sample\n`})})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"download attestation\"}),\" \\uBA85\\uB839\\uC5B4\\uB85C \\uB370\\uC774\\uD130\\uB97C \\uBCF4\\uBA74 \\uC704\\uC5D0\\uC11C \\uC6B0\\uB9AC\\uAC00 \",(0,e.jsx)(n.code,{children:\"In-toto\"}),\" Envelope \\uADDC\\uACA9\\uC5D0 \\uB9DE\\uCDB0\\uC11C \\uB4E4\\uC5B4\\uAC00 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign download attestation example.ncr.gov-ntruss.com/sample \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]})})}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payloadType\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"application/vnd.in-toto+json\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"payload\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"payload \\uAC12\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"signatures\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"keyid\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"sig\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sig \\uAC12\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"signature\\uB97C verify\\uD558\\uB294 \\uAC83\\uCC98\\uB7FC attestation\\uB3C4 private key\\uB85C sign\\uB418\\uC5B4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, public key\\uB85C verify\\uB97C \\uD558\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify-attestation \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"-d \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key import-cosign.pub  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`example.ncr.gov-ntruss.com/sample\n`})]})}),(0,e.jsxs)(n.h2,{id:\"tekton-chain\",children:[(0,e.jsx)(n.a,{href:\"#tekton-chain\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Tekton Chain\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C Tekton Chain\\uC744 \",(0,e.jsx)(n.a,{href:\"https://tekton.dev/docs/chains/signed-provenance-tutorial/\",children:\"Tekton \\uBB38\\uC11C\\uC758 \\uC608\\uC81C\"}),\"\\uB97C \\uCC38\\uACE0\\uD558\\uC5EC \\uC124\\uC815\\uD574\\uBCF8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"Tekton peipline\\uC740 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC791\\uC5C5\\uC744 \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uAD6C\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Bitbucket\\uC5D0\\uC11C Source code\\uB97C \\uAC00\\uC838\\uC634\"}),(0,e.jsx)(n.li,{children:\"source code\\uC5D0 \\uC815\\uC758\\uB41C Dockerfile\\uB85C Container image\\uB97C \\uBE4C\\uB4DC\\uD568\"}),(0,e.jsx)(n.li,{children:\"\\uD574\\uB2F9 Container image\\uB97C container registry\\uC5D0 Push\\uD568\"})]}),(0,e.jsxs)(n.h3,{id:\"secret-\\uC124\\uC815\",children:[(0,e.jsx)(n.a,{href:\"#secret-\\uC124\\uC815\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Secret \\uC124\\uC815\"]}),(0,e.jsx)(n.p,{children:\"Bitbucket private registry\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 Kubernetes secret\\uC5D0 read only ssh key\\uB97C \\uC800\\uC7A5\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Secret\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"id_rsa\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" AS0tLS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"...\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"known_hosts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" AG033S\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"...\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"known_hosts\"}),\" \\uAC12\\uC740 \",(0,e.jsx)(n.a,{href:\"https://support.atlassian.com/bitbucket-cloud/docs/configure-ssh-and-two-step-verification/\",children:\"bitbucket \\uBB38\\uC11C\"}),\"\\uC5D0 \\uB530\\uB77C\\uC11C \\uC544\\uB798\\uCC98\\uB7FC \\uC694\\uCCAD\\uD574\\uC11C \\uAC00\\uC9C0\\uACE0\\uC628 \\uAC12\\uC73C\\uB85C \\uC124\\uC815\\uD574\\uC900\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),\" https://bitbucket.org/site/ssh \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),` base64\n`]})})}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB9AC\\uACE0 Docker image\\uB97C push\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D Secret\\uC744 \\uC0DD\\uC131\\uD574\\uC900\\uB2E4. \",(0,e.jsx)(n.code,{children:\"Kaniko\"}),\"\\uB77C\\uB294 tekton task\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C, Secret\\uC740 \",(0,e.jsx)(n.code,{children:\"config.json\"}),\"\\uC73C\\uB85C \\uC800\\uC7A5\\uD574\\uC57C \\uD55C\\uB2E4. \",(0,e.jsx)(n.code,{children:\"\\uC8FC\\uC758\\uD574\\uC57C \\uD560 \\uC810\"}),\"\\uC740 \",(0,e.jsx)(n.code,{children:\"\\uC544\\uB798\\uCC98\\uB7FC \\uC0DD\\uC131\\uD558\\uBA74 .dockerconfigjson\\uC73C\\uB85C \\uB370\\uC774\\uD130\\uAC00 \\uC800\\uC7A5\\uB41C\\uB2E4.\"})]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"create secret docker-registry docker-credentials \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--docker-server\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"registry url\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--docker-username\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"username\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--docker-password\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"password\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"config.json\"}),\"\\uC73C\\uB85C \\uC800\\uC7A5\\uB418\\uC5B4\\uC57C\\uC9C0 \",(0,e.jsx)(n.code,{children:\"Kaniko\"}),\"\\uC5D0\\uC11C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uD574\\uB2F9 credentials\\uB85C Docker private registry\\uC5D0 push\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Secret\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"config.json\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" base64 \\uB370\\uC774\\uD130 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"tekton-pipeline-\\uC14B\\uD305\",children:[(0,e.jsx)(n.a,{href:\"#tekton-pipeline-\\uC14B\\uD305\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Tekton Pipeline \\uC14B\\uD305\"]}),(0,e.jsxs)(n.p,{children:[\"\\uBA3C\\uC800 \",(0,e.jsx)(n.code,{children:\"tkn\"}),\" \\uBA85\\uB839\\uC5B4\\uB97C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C cli\\uB97C \\uC124\\uCE58\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"brew \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` tektoncd-cli\n`]})})}),(0,e.jsx)(n.p,{children:\"tekon pipeline\\uC744 \\uC124\\uCE58\\uD558\\uACE0,\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl apply -f \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml\n`})]})}),(0,e.jsx)(n.p,{children:\"tekton hub\\uC744 \\uD1B5\\uD574\\uC11C \\uD544\\uC694\\uD55C task\\uB97C \\uC124\\uCE58\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"tkn hub \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` task git-clone\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"tkn hub \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` task kaniko\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798\\uCC98\\uB7FC yaml \\uD30C\\uC77C\\uB85C \\uC800\\uC7A5\\uD558\\uC5EC \\uBC30\\uD3EC\\uD560 \\uC218\\uB3C4 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"tkn hub get task git-clone --version \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.9\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),` tkn-git-clone.yaml\n`]})})}),(0,e.jsx)(n.p,{children:\"tekton chain\\uC744 \\uC124\\uCE58\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl apply -f \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`https://storage.googleapis.com/tekton-releases/chains/previous/v0.20.0/release.yaml\n`})]})}),(0,e.jsxs)(n.p,{children:[\"Tekton Chain\\uC73C\\uB85C SLSA attestation version 0.2 \\uADDC\\uACA9\\uC744 \\uB9DE\\uCDB0\\uC11C \\uC0DD\\uC131\\uD558\\uB3C4\\uB85D \",(0,e.jsx)(n.code,{children:\"slsa/v1\"}),\"\\uC73C\\uB85C \\uC9C0\\uC815\\uD574\\uC92C\\uACE0, OCI registry\\uC5D0 \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D stroage\\uB97C oci\\uB85C \\uC9C0\\uC815\\uD558\\uC600\\uB2E4. cosign\\uC5D0 \\uC0DD\\uC131\\uB41C signature\\uAC00 \\uC704\\uC5D0\\uC11C \\uBCF8\\uAC83\\uCC98\\uB7FC \",(0,e.jsx)(n.code,{children:\"{image digest}.sig\"}),\" tag\\uB85C registry\\uC5D0 push\\uB418\\uACE0, attestation\\uB3C4 \",(0,e.jsx)(n.code,{children:\"{image digest}.att\"}),\" tag\\uB85C registry\\uC5D0 push\\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl patch configmap chains-config -n tekton-chains -p\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`'{\"data\":{\"artifacts.taskrun.format\": \"slsa/v1\"}}'`}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl patch configmap chains-config -n tekton-chains -p\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`'{\"data\":{\"artifacts.taskrun.storage\": \"oci\"}}'`}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl patch configmap chains-config -n tekton-chains -p\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:`'{\"data\":{\"artifacts.oci.storage\": \"oci\"}}'`}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"cosign\\uC5D0\\uC11C\\uB294 key \\uC0DD\\uC131\\uC744 Kubernetes secret\\uC5D0 \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB294 \\uBA85\\uB839\\uC5B4\\uB97C \\uC544\\uB798\\uCC98\\uB7FC \\uC81C\\uACF5\\uD55C\\uB2E4. \\uC774\\uB807\\uAC8C \\uC0DD\\uC131\\uD558\\uBA74 tekton-chains namespace\\uC5D0 signing-secrets\\uC774\\uB77C\\uB294 \\uC774\\uB984\\uC73C\\uB85C cosign.pub, consign.key, cosign.password \\uAC12\\uC73C\\uB85C \\uC800\\uC7A5\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`cosign generate-key-pair k8s://tekton-chains/signing-secrets\n`})})}),(0,e.jsx)(n.p,{children:\"Tekton pipeline\\uC744 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC815\\uC758\\uD558\\uACE0 \\uCFE0\\uBC84\\uB124\\uD2F0\\uC2A4\\uC5D0 \\uC0DD\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"```tekton-pipeline.yaml`\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` tekton.dev/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pipeline\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" clone\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`push\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"description\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`    This pipeline clones a git repo, builds a Docker image with Kaniko and\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:\"    pushes it to a registry\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"params\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" repo\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`url\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` string\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`reference\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` string\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspaces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" shared\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tasks\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" fetch\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`source\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"taskRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`clone\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspaces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` output\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" shared\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ssh\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`directory\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"params\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` url\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $(params.repo\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`url)\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`push\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"runAfter\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'fetch-source'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"taskRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` kaniko\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspaces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` source\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" shared\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` dockerconfig\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"params\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` IMAGE\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $(params.image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`reference)\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` BUILDER_IMAGE\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" gcr.io/kaniko\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"project/executor\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"v1.20.0\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`debug\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" CHAINS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`GIT_COMMIT\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$(tasks.fetch-source.results.commit)'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" CHAINS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`GIT_URL\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$(tasks.fetch-source.results.url)'\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Attestation\\uC5D0 Build\\uD560 \\uB54C \\uC0AC\\uC6A9\\uD55C source code\\uC758 git commit\\uACFC url\\uC744 \\uAC19\\uC774 \\uB0A8\\uAE30\\uACE0 \\uC2F6\\uC5B4\\uC11C \",(0,e.jsx)(n.a,{href:\"https://tekton.dev/docs/chains/slsa-provenance/#git-results\",children:\"Tekton \\uBB38\\uC11C\"}),\"\\uC744 \\uCC38\\uACE0\\uD558\\uC5EC params\\uC5D0 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uCD94\\uAC00\\uB97C \\uD574\\uC8FC\\uC5C8\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" CHAINS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`GIT_COMMIT\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$(tasks.fetch-source.results.commit)'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" CHAINS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`GIT_URL\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'$(tasks.fetch-source.results.url)'\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C PipelineRun\\uC744 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC815\\uC758\\uD558\\uACE0, \\uC0DD\\uC131\\uD558\\uBA74 Pipeline\\uC774 \\uC2E4\\uD589\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"tekton-pipeline-run.yaml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` tekton.dev/v1beta1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` PipelineRun\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"generateName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" clone\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"push\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"run\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"serviceAccountName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" tekton\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`sa\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"pipelineRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" clone\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`push\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"podTemplate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"securityContext\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"fsGroup\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"65532\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"workspaces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" shared\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeClaimTemplate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"storage\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 1Gi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secret\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secret\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" git\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"params\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" repo\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`url\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" bitbucket repository url \\uAC12 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" image\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`reference\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" example.ncr.gov\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`ntruss.com/sample\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`kubectl create -f tekton-pipeline-run.yaml\n`})})}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uBAA8\\uB4E0 Tekton Task\\uAC00 \\uB3D9\\uC791\\uD558\\uACE0 \\uB098\\uBA74, build\\uB41C Container Image\\uC640 \\uD568\\uAED8 \",(0,e.jsx)(n.code,{children:\".sig\"}),\", \",(0,e.jsx)(n.code,{children:\".att\"}),\"\\uC758 \\uB370\\uC774\\uD130\\uAC00 OCI registry\\uC5D0 \\uAC19\\uC774 \\uC62C\\uB77C\\uAC00\\uAC8C \\uB41C\\uB2E4. \\uC774\\uC81C cosign\\uC73C\\uB85C signature\\uC640 attestation\\uC744 verify\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key k8s://tekton-chains/signing-secrets \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`example.ncr.gov-ntruss.com/sample\n`})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify-attestation \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--key k8s://tekton-chains/signing-secrets \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--type slsaprovenance \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--insecure-ignore-tlog\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"true \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`example.ncr.gov-ntruss.com/sample\n`})]})}),(0,e.jsxs)(n.h2,{id:\"npm\",children:[(0,e.jsx)(n.a,{href:\"#npm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NPM\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.blog/2023-04-19-introducing-npm-package-provenance/\",children:\"npm\\uC5D0\\uC11C\\uB3C4 in-toto Spec\\uC5D0 \\uB530\\uB77C\\uC11C Provenance\\uB97C \\uAC19\\uC774 \\uBC30\\uD3EC\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC9C0\\uC6D0\\uD55C\\uB2E4\\uACE0 \\uC791\\uB144 4\\uC6D4\\uC5D0 \\uBE14\\uB85C\\uADF8\\uB97C \\uD1B5\\uD574\\uC11C \\uC18C\\uAC1C\\uD558\\uC600\\uB2E4.\"}),\" \\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C \",(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/@sigstore/cli/v/0.6.0\",children:\"@sigstore/cli\"}),\" \\uD328\\uD0A4\\uC9C0\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uC544\\uB798\\uC640 \\uAC19\\uC774 Github Action\\uC73C\\uB85C Provenance\\uB97C \\uAC19\\uC774 \\uBC30\\uD3EC\\uD558\\uC5EC \\uC815\\uBCF4\\uAC00 \\uB098\\uC640\\uC788\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/supply-chain-security-npm.png\",alt:\"provenance in npm\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"Transparency log entry\"}),\"\\uB97C \\uB204\\uB974\\uBA74, \\uC774\\uB7EC\\uD55C metadata\\uB4E4\\uC774 \\uBCC0\\uACBD\\uB418\\uC9C0 \\uC54A\\uAC8C \\uBCF4\\uAD00\\uD560 \\uC218 \\uC788\\uB294 rekor server\\uC5D0 \\uC800\\uC7A5\\uB41C entry\\uB97C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/supply-chain-security-rekor.png\",alt:\"log entry in rekor\"}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uBA85\\uB839\\uC5B4\\uB85C signature\\uB97C \\uD655\\uC778\\uD558\\uB294\\uB370, Rekor log entry\\uC5D0\\uC11C \\uC774 signature\\uAC00 \\uBCC0\\uACBD\\uB418\\uC9C0 \\uC54A\\uC558\\uB294\\uC9C0 \\uD655\\uC778\\uD558\\uB294 \\uACFC\\uC815\\uC744 \\uAC00\\uC9C4\\uB2E4. \",(0,e.jsx)(n.code,{children:\"npm install\"}),\"\\uD560 \\uB54C\\uB3C4 \\uB3D9\\uC77C\\uD558\\uAC8C npm registry\\uC5D0\\uC11C signature\\uB97C verify\\uD558\\uACE0 download\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),` audit signatures\n`]})})}),(0,e.jsxs)(n.h2,{id:\"rekor\\uB85C-tekon-pipeline-image-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{href:\"#rekor\\uB85C-tekon-pipeline-image-\\uD655\\uC778\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"rekor\\uB85C tekon pipeline image \\uD655\\uC778\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/tektoncd/pipeline/releases\",children:\"Tekton Pipeline release \\uD398\\uC774\\uC9C0\"}),\"\\uC5D0\\uC11C container image\\uB4E4\\uC744 rekor\\uB85C verify\\uD558\\uB294 \\uACFC\\uC815\\uC744 \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uBA3C\\uC800 Go\\uB97C \\uD1B5\\uD574\\uC11C reckor-cli\\uB97C \\uC124\\uCE58\\uD55C\\uB2E4. binary \\uD30C\\uC77C\\uC740 \\uC544\\uB798\\uC640 \\uAC19\\uC774 GOPATH \\uACBD\\uB85C\\uC5D0\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"go \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` -v github.com/sigstore/rekor/cmd/rekor-cli@latest\n`]})})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ go \",(0,e.jsx)(n.span,{className:\"token function\",children:\"env\"}),` GOPATH\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`/Users/jayground8/go\n`})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:(0,e.jsx)(n.span,{className:\"token constant environment\",children:\"PATH\"})}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token constant environment\",children:\"$PATH\"}),`:/Users/jayground8/go/bin\n`]})})}),(0,e.jsxs)(n.p,{children:[\"Rekor \\uC11C\\uBC84\\uC5D0\\uC11C \\uC11C\\uBA85\\uB41C \\uBA54\\uD0C0\\uB370\\uC774\\uD130\\uB97C \\uC62C\\uB9AC\\uBA74 UUID\\uB97C \\uC0DD\\uC131\\uB41C\\uB2E4. \\uD574\\uB2F9 UUID\\uB85C \\uC800\\uC7A5\\uB41C \\uB370\\uC774\\uD130\\uB97C \\uAC00\\uC838\\uC62C \\uC218 \\uC788\\uB2E4. \\uADF8\\uB7F0\\uB370 rekor-cli \\uBB38\\uC11C\\uB97C \\uBCF4\\uBA74 UUID entry\\uAC00 merkle tree hash\\uB77C\\uACE0 \\uC124\\uBA85\\uC774 \\uC788\\uB2E4. Rekor\\uC5D0 \\uB300\\uD55C \\uC124\\uBA85\\uC5D0\\uC11C \",(0,e.jsx)(n.code,{children:\"Ledger\"}),\"\\uB77C\\uACE0 \\uB098\\uC640\\uC788\\uC5C8\\uB294\\uB370, \\uB370\\uC774\\uD130 \\uC870\\uC791\\uC774 \\uB420 \\uC218 \\uC5C6\\uB3C4\\uB85D \\uBE14\\uB85D\\uCCB4\\uC778 \\uBC29\\uC2DD\\uC73C\\uB85C \\uC800\\uC7A5\\uC774 \\uB418\\uC5B4 \\uC788\\uACE0 \\uADF8\\uB798\\uC11C merkel tree hash \\uAC12\\uC744 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294 \\uAC83 \\uAC19\\uB2E4. \\uC774\\uC81C \\uC544\\uB798\\uC640 \\uAC19\\uC774 UUID\\uB85C entry log\\uB97C \\uAC00\\uC838\\uC624\\uBA74 container image\\uC758 sha256 digest\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"REKOR_UUID\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`24296fb24b8ad77a0c94b8ccf25fa815c6b01ab90941b17a37373885d8f62efc99b17eea417bed4d\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"REKOR_ATTESTATION_IMAGES\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),\"rekor-cli get --uuid \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$REKOR_UUID\"}),'\"']}),\" --format json \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq -r .Attestation \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq -r \",(0,e.jsx)(n.span,{className:\"token string\",children:`'.subject[]|.name + \":v0.56.0@sha256:\" + .digest.sha256'`}),(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),`\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$REKOR_ATTESTATION_IMAGES\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/controller:v0.56.0@sha256:fc5669e1bbabbf24b0ee4591ff20793643d778942e91ae52b3f7cca26d81a99b\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/entrypoint:v0.56.0@sha256:381ca58f0f911b6954530ea820bdda12850e535db9c6a85a17a02e3dd49345fb\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/nop:v0.56.0@sha256:4e627be53f78f30f73084ea0695d97397930d6f12d4cfab28d97b1aa57842881\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/sidecarlogresults:v0.56.0@sha256:4db16701d6e54d80cbb7b51e021d3f5698196d08d2f1ff33728154807ef1fe86\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/workingdirinit:v0.56.0@sha256:c488368eff45a745dd58e65f526d746abcad431796bb0e719ecf2d5f71491692\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/events:v0.56.0@sha256:c7fe97153fc32ea3eae343bcaf96761c9b0d80c8098ee35922550f0caf6887e0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/resolvers:v0.56.0@sha256:8c0598a04420caa0ee3aeb6fef7521f93f4c41f7308ccb0c616167dc1d5fa00a\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`gcr.io/tekton-releases/github.com/tektoncd/pipeline/cmd/webhook:v0.56.0@sha256:99824836bb47c1d9e21efdeff56e02b9426fe2323a22625b7af4f66a4028a5b4\n`})]})}),(0,e.jsx)(n.p,{children:\"\\uCD5C\\uC885\\uC801\\uC73C\\uB85C \\uC544\\uB798\\uC640 \\uAC19\\uC774 Rekor\\uC5D0\\uC11C \\uAC00\\uC838\\uC628 Entry log\\uC758 sha256 digest \\uAC12\\uC744 release.yaml\\uC5D0\\uC11C \\uC815\\uC758\\uB41C container image\\uB4E4\\uC758 sha256 digest\\uAC12\\uACFC \\uBE44\\uAD50\\uD574\\uC11C \\uC77C\\uCE58\\uD558\\uB294\\uC9C0 \\uD655\\uC778\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"RELEASE_FILE\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"REKOR_UUID\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`24296fb24b8ad77a0c94b8ccf25fa815c6b01ab90941b17a37373885d8f62efc99b17eea417bed4d\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Obtains the list of images with sha from the attestation\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"REKOR_ATTESTATION_IMAGES\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),\"rekor-cli get --uuid \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$REKOR_UUID\"}),'\"']}),\" --format json \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq -r .Attestation \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"|\"}),\" jq -r \",(0,e.jsx)(n.span,{className:\"token string\",children:`'.subject[]|.name + \":v0.56.0@sha256:\" + .digest.sha256'`}),(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Download the release file\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),\" \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$RELEASE_FILE\"}),'\"']}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),` release.yaml\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# For each image in the attestation, match it to the release file\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable for-or-select\",children:\"image\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$REKOR_ATTESTATION_IMAGES\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"do\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"printf\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"grep\"}),\" -q \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$image\"}),\" release.yaml \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u0026\u0026\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" ===\u003e ok\"'}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"||\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\" ===\u003e no match\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"done\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uB807\\uAC8C container image\\uB4E4\\uC744 verify\\uD558\\uACE0 tekon pipelie \\uC124\\uCE58\\uB97C \\uC9C4\\uD589\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl apply -f \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.56.0/release.yaml\n`})]})}),(0,e.jsxs)(n.h2,{id:\"cosign-verify-distroless\",children:[(0,e.jsx)(n.a,{href:\"#cosign-verify-distroless\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"cosign verify distroless\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/GoogleContainerTools/distroless\",children:\"Google\\uC5D0\\uC11C \\uAD00\\uB9AC\\uD558\\uB294 Distoless Container Image\"}),\"\\uB97C \\uBCF4\\uBA74 consign\\uC73C\\uB85C \\uC11C\\uBA85\\uC744 \\uD655\\uC778\\uD55C\\uB2E4. Sigstore\\uC5D0\\uC11C\\uB294 keyless \\uBC29\\uC2DD\\uC73C\\uB85C sign\\uD558\\uACE0 verify\\uD558\\uB294 \\uAC83\\uC744 \\uCD94\\uCC9C\\uD55C\\uB2E4. keyless mode\\uB97C \\uC774\\uD574\\uD558\\uB294 \\uAC83\\uB3C4 \\uC7AC\\uBBF8\\uC788\\uB294 \\uC8FC\\uC81C\\uC778\\uB370, \\uB2E4\\uC74C\\uC5D0 \\uBE14\\uB85C\\uADF8\\uB85C \\uC815\\uB9AC\\uD574\\uBCFC\\uB824\\uACE0 \\uD55C\\uB2E4. \\uC544\\uB798\\uC640 \\uAC19\\uC774 public key \\uB300\\uC2E0\\uC5D0 identity\\uB85C verify\\uB97C \\uD560 \\uC218\\uAC00 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"cosign verify \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$IMAGE_NAME\"}),` --certificate-oidc-issuer https://accounts.google.com  --certificate-identity keyless@distroless.iam.gserviceaccount.com\n`]})})}),(0,e.jsxs)(n.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(n.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsxs)(n.p,{children:[\"Kubernetes cluster\\uB97C \\uC6B4\\uC601\\uD560 \\uB54C, Tekon Chain\\uC744 \\uD1B5\\uD574\\uC11C Software Supply Chain Security\\uB97C \\uACE0\\uB824\\uD560 \\uC218 \\uC788\\uB2E4. Tekton Chain\\uC744 \\uD1B5\\uD574\\uC11C Container Image\\uC640 In-toto Attestation\\uC744 sign\\uD558\\uACE0, OCI Registry\\uC5D0 push\\uB97C \\uD588\\uB2E4. \\uD574\\uB2F9 \\uB370\\uC774\\uD130\\uB4E4\\uC774 OCI Registry\\uC5D0 \",(0,e.jsx)(n.code,{children:\"{image digest}.sig\"}),\"\\uC640 \",(0,e.jsx)(n.code,{children:\"{image digest}.att\"}),\" tag\\uB85C push \\uB41C\\uB2E4. \\uC774\\uB807\\uAC8C Cosign\\uC73C\\uB85C sign\\uD574\\uC11C \\uC800\\uC7A5\\uD588\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uD574\\uB2F9 \\uD30C\\uC77C\\uC744 signature\\uC640 public key\\uB85C verify\\uD560 \\uC218 \\uC788\\uB2E4. \\uCD94\\uAC00\\uB85C Rekor\\uC5D0 log entry\\uAC00 \\uB4F1\\uB85D\\uB418\\uC5B4 \\uC788\\uC73C\\uBA74, \\uBCC0\\uACBD\\uB420 \\uC218 \\uC788\\uB294 log \\uB370\\uC774\\uD130\\uB97C \\uD1B5\\uD574\\uC11C signature\\uB97C \\uCD94\\uAC00 \\uAC80\\uC99D\\uD560 \\uC218 \\uC788\\uB2E4. \\uB610\\uD55C GateKeeper\\uB85C Policy\\uB97C \\uCD94\\uAC00\\uD558\\uC5EC \\uC62C\\uBC14\\uB974\\uAC8C sign\\uB41C container image\\uB9CC Kubernetes cluster\\uC5D0 \\uC801\\uC6A9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uAD6C\\uC131\\uD560 \\uC218 \\uC788\\uB2E4. Attestation\\uB3C4 \\uB3D9\\uC77C\\uD558\\uAC8C sign\\uD558\\uACE0 verify\\uD560 \\uC218 \\uC788\\uB294\\uB370, cosign\\uC73C\\uB85C verify\\uD558\\uB294 \\uAC83\\uC740 Provenance\\uC5D0 \\uC788\\uB294 \\uC815\\uBCF4\\uB4E4\\uC744 verify\\uD558\\uB294 \\uAC83\\uC740 \\uC544\\uB2C8\\uB2E4. \\uB530\\uB77C\\uC11C Attestation\\uC73C\\uB85C Software Supply Chain Security\\uB97C \\uAC15\\uD654\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 Attestation\\uC5D0 \\uC800\\uC7A5\\uB418\\uC5B4 \\uC788\\uB294 \\uC815\\uBCF4\\uB97C verify\\uD558\\uB294 \\uB85C\\uC9C1\\uC744 \\uCD94\\uAC00\\uD574\\uC57C \\uD55C\\uB2E4.\"]})]})}}var f=b;return v;})();\n;return Component;","toc":[{"value":"Software Supply Chain Security","url":"#software-supply-chain-security","depth":2},{"value":"In-Toto Attestation","url":"#in-toto-attestation","depth":2},{"value":"SLSA","url":"#slsa","depth":2},{"value":"Sigstore","url":"#sigstore","depth":2},{"value":"Cosign sign / verify","url":"#cosign-sign--verify","depth":3},{"value":"Attestation","url":"#attestation","depth":3},{"value":"Tekton Chain","url":"#tekton-chain","depth":2},{"value":"Secret 설정","url":"#secret-설정","depth":3},{"value":"Tekton Pipeline 셋팅","url":"#tekton-pipeline-셋팅","depth":3},{"value":"NPM","url":"#npm","depth":2},{"value":"rekor로 tekon pipeline image 확인","url":"#rekor로-tekon-pipeline-image-확인","depth":2},{"value":"cosign verify distroless","url":"#cosign-verify-distroless","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"19 min read","minutes":18.875,"time":1132500,"words":3775},"slug":"20240208-tekton-chain","fileName":"20240208-tekton-chain.md","title":"Tekton Chain","date":"2024-02-11T00:00:00.000Z","tags":["kubernetes","tekton","devsecops"],"images":["/static/images/social-banner.png"],"summary":"Kubernetes에서 Tekton Chain을 통해서 어떻게 Software Supply Chain Security를 구성할 수 있는지 확인했다. Tekton Pipeline으로 git clone을 하고, container image를 build하고, 최종적으로 OCI registry에 push하도록 구성했다. 그리고 Tekton Chain이 어떻게 in-toto spec의 Attestation 정보를 남기는지 확인하였다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Cilium CNI와 HostPort","date":"2024-02-07T00:00:00.000Z","tags":["kubernetes","cilium"],"images":["/static/images/social-banner.png"],"summary":"네이버 클라우드 쿠버네티스 서비스에서 HostPort를 설정하였는데, 정상적으로 Node Port를 통해서 Container에 접근할 수가 없었다. 처음에는 CNI plugin portmap을 설정하여 HostPort를 Iptables Rule로 적용하도록 하였다. 하지만 현재 운영하는 Kernel 버전이 kube proxy를 대체할 수 있는 것을 파악하였고, default로 설정된 KubeProxyReplacement=disabled을 KubeProxyReplacement=strict으로 설정하여 Cilium eBPF로 대체하여 사용하였다.","slug":"20240207-cilium-host-port"},"next":{"title":"containerd nofile default 설정값","date":"2024-02-14T00:00:00.000Z","tags":["kubernetes","containerd"],"images":["/static/images/social-banner.png"],"summary":"Kubernetes에서 pod가 실행될 때, 해당 process의 open file 갯수 limit이 어떻게 되는지 궁금하였다. Containerd가 systemd service로 동작하는 상황에서 systemd에서 LimitNOFILE이 inifinity로 설정되어 있는 것을 확인하였다. infinity가 Ubuntu systemd 240 버전 이상에서는 process에 최대로 할당할 수 있는 File 갯수인 fs.nr_open 값으로 설정된다. 실제로 test용 pod를 띄어서 containerd에 의해서 실행되는 process의 nofile limit이 LimitNOFILE에 설정된 값으로 동일하게 설정되는 것을 확인하였다.","slug":"20240214-containerd-LimitNOFILE"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20240208-tekton-chain"]},"buildId":"ksiuSPzS48Y1bzknjW1u9","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>