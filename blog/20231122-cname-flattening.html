<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>CNAME flattening</title><meta name="robots" content="follow, index"/><meta name="description" content="CNAME flattening이 어떻게 작동하고, 왜 사용하게 되었는지 이해하게 되었다."/><meta property="og:url" content="https://jayground8.github.io/blog/20231122-cname-flattening"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="CNAME flattening이 어떻게 작동하고, 왜 사용하게 되었는지 이해하게 되었다."/><meta property="og:title" content="CNAME flattening"/><meta property="og:image" content="https://jayground8.github.io/static/images/social-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="CNAME flattening"/><meta name="twitter:description" content="CNAME flattening이 어떻게 작동하고, 왜 사용하게 되었는지 이해하게 되었다."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/social-banner.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20231122-cname-flattening"/><meta property="article:published_time" content="2023-11-22T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20231122-cname-flattening"
  },
  "headline": "CNAME flattening",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/social-banner.png"
    }
  ],
  "datePublished": "2023-11-22T00:00:00.000Z",
  "dateModified": "2023-11-22T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "CNAME flattening이 어떻게 작동하고, 왜 사용하게 되었는지 이해하게 되었다."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5e6de87a2df40310.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/_bO-Etl4w39STSwsZombp/_buildManifest.js" defer=""></script><script src="/_next/static/_bO-Etl4w39STSwsZombp/_ssgManifest.js" defer=""></script><script src="/_next/static/_bO-Etl4w39STSwsZombp/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">블로그</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">블로그</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-11-22T00:00:00.000Z">2023년 11월 22일 수요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">CNAME flattening</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="cname-flattening는-무엇인가"><a href="#cname-flattening는-무엇인가" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>CNAME flattening는 무엇인가?</h2><p>DNS specification에서 Domain의 Root record로는 CNAME가 될 수 없도록 되어 있다. 만약 <code>jayground.com</code> 도메인이 있고, 나의 서버가 <code>59.34.124.34</code>이라고 하면 <code>A record</code>로 Root record를 생성할 수는 있다. 하지만 Load balancer가 <code>some.loadbalancer.com</code>를 가지고 있으면, 이걸 CNAME으로 <code>root record</code>로 등록할 수가 없다. <code>jayground.com</code>에 직접 IP address를 연결하는 것보다 CNAME을 등록할 수 있으면 서버가 변경되거나 Scale in/out될 때 유연하게 대처할 수 있다. DNS specification을 벗어나서 CNAME을 등록하도록 할 수 있지만, 이런 규격을 기대하고 만들어진 서비스에서 문제가 발생할 수도 있다. 이러한 규격을 어기지 않고 Root record로 CNAME을 등록할 수 있게 해주는 방법이 <code>CNAME flattening</code>이다. DNS resolve 과정에서 Root record를 query할 때 CNAME에 있는 도메인을 내려주는 것이 아니라, 해당 도메인에 연결된 IP address를 찾아와서 내려주게 된다. 따라서 내부적으로는 이렇게 작업이 추가되지만, 외부에서는 Root record에 <code>A record</code>가 등록된 것처럼 생각 할 수 있는 것이다.</p><h2 id="custom-domain-등록"><a href="#custom-domain-등록" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Custom Domain 등록</h2><p>많은 SaaS product중에 개인이 가지고 있는 Domain을 등록할 수 있게 해주고 있다. Github에서는 <code>Github pages</code>라는 서비스로 간단하게 website를 publish할 수 있다. 만약 <code>jayground.com</code>의 도메인을 가지고 있다면, 먼저 <code>jayground.com</code>을 소유하고 있는지 <code>TXT record</code>를 등록해서 인증한다. 그리고 Github에서 제공하는 IP address들을 <code>A record</code>로 등록하면 된다. <code>https://jayground.com</code>로 접속을 하면 제공된 IP address로 이동하게 되고, <code>Github pages</code>에 custom domain을 등록해줬기 때문에 SSL 인증서와 같이 컨텐츠를 내려주게 된다. 이렇게 <code>A record</code>를 Root record으로 등록하게 된다.</p><p>그런데 <a target="_blank" rel="noopener noreferrer" href="https://webflow.com/">Webflow</a>에서는 Custom domain을 등록할 때, <code>jayground.com</code>에 <code>A record</code>를 등록한다. 그리고 <code>www.jayground.com</code>에는 <code>CNAME</code>으로 <code>proxy-ssl.webflow.com</code>을 등록하게 된다. <a target="_blank" rel="noopener noreferrer" href="https://university.webflow.com/lesson/manually-connect-a-custom-domain?topics=hosting-code-export">Webflow 공식문서</a>에서 <code>www.jayground.com</code>을 webflow 설정 페이지에서 default로 셋팅을 해야 된다고 설명하고 있다.</p><blockquote><p>Your default domain should be set to the www subdomain (e.g., <a target="_blank" rel="noopener noreferrer" href="http://www.yourdomain.com">www.yourdomain.com</a>). Setting the root domain (e.g., yourdomain.com) as the default requires a different setup for your DNS records.</p></blockquote><p>이제 <code>https://jayground.com</code>으로 접속을 하면 <code>https://www.jayground.com</code>으로 Redirect가 된다. 그리고 <code>www.jayground.com</code>은 CNAME으로 <code>proxy-ssl.webflow.com</code>으로 되어 있어서, SSL 인증서와 함께 컨텐츠를 내려주게 된다.</p><h2 id="webflow의-default-domain-변경"><a href="#webflow의-default-domain-변경" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Webflow의 default domain 변경</h2><p>이제 문제는 Webflow에서 default가 <code>www.jayground.com</code>이 아니라 <code>jayground.com</code>으로 사용하고 싶은 경우이다. 이때는 <code>CNAME flattening</code>을 통해서 할 수가 있다. 이제 DNS에서 <code>jaygroud.com</code>과 <code>www.jayground.com</code> 둘 다 CNAME으로 <code>proxy-ssl.webflow.com</code>으로 등록하고, Webflow에서 <code>jayground.com</code>을 Default로 설정하면 된다. 가비아에서 제공하는 DNS으로는 이렇게 <code>CNAME flattening</code>이 가능해서 CNAME을 등록하면, <code>https://www.jayground.com</code>에 접근을 할 때 <code>https://jayground.com</code>으로 Redirect 된다. 하지만 AWS Route53을 사용한다고 하면, <code>CNAME flattening</code> 같은 걸 제공하지 않는다. 따라서 <code>jayground.com</code>으로 CNAME record를 등록 할 수가 없다. AWS Route53에서 Root record로 AWS에 있는 resource들을 Alias로 등록할 수는 있지만, 다른 도메인을 등록할 수는 없다.</p><h2 id="-webflow는-왜-이렇게-되어-있는-걸까"><a href="#-webflow는-왜-이렇게-되어-있는-걸까" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>🤔 Webflow는 왜 이렇게 되어 있는 걸까?</h2><p><code>CNAME flattening</code>의 장점을 생각해보면, Webflow에서 고정된 IP address를 A record로 등록하게 하는 것보다 CNAME을 등록하면 인프라 리소스가 변경되어도 유연하게 대처할 수 있을 것이다. 그런데 기본적으로 <code>Root record</code>로 CNAME을 등록할 수가 없으니깐, <code>jayground.com</code>에는 A record를 등록할 수 있게 IP address를 제공한다. 그리고 이건 아주 간단하게 Redirect만 수행해서 인프라 자원을 최소한으로 쓰도록 한다. 그리고 redirect된 <code>www.jayground.com</code>은 CNAME을 등록할 수 있으니깐, <code>proxy-ssl.webflow.com</code>에서 Let&#x27;s encrypt 인증서도 내려주고, 해당 컨텐츠들을 내려준다. 그런데 만약 <code>CNAME flattening</code> 지원한다고 하면 <code>jayground.com</code>와 <code>www.jayground.com</code> 모두 CNAME으로 등록하여 인프라 자원의 유연함을 가져갈 수 있을 것이다.</p><h2 id="-github-pages는"><a href="#-github-pages는" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>🤔 Github pages는?</h2><p>그런데 Webflow 케이스에 대한 나의 생각이 맞다면, Github pages의 경우에 사용하는 사용자 숫자가 훨씬 많을 텐데 왜 CNAME을 활용하지 않을까?🤔 Github pages의 경우에는 모두에게 <a target="_blank" rel="noopener noreferrer" href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">문서에 나온 것처럼</a> 특정한 IP를 제공하여 A record를 등록하게 한다.</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">185.199.108.153
</span><span class="code-line">185.199.109.153
</span><span class="code-line">185.199.110.153
</span><span class="code-line">185.199.111.153
</span></code></pre></div><p>이 IP의 서버들이 load balancer로 reverse proxy 역할을 할 것이고, 이 서버들의 사양이 충분히 대규모 사용자의 트래픽을 충분히 감당할 수 있게 설계가 되어 있을 것이다. 일단 DNS specification에서는 <code>CNAME record</code>를 root record로 등록할 수가 없고, <code>CNAME flattening</code>같은 건 CNAME을 등록할 수 있는 편법(?)같은 거니깐 <code>CNAME</code>은 생각하지 않는 것일까? 그리고 Github pages는 이미 대규모의 사용자를 가지고 있고, 그것을 위해 변화가 적은 인프라를 유지하고 있어서 구지 <code>CNAME record</code>를 통해서 유연함을 가져갈 필요가 없는 것일까? 🤔🤔🤔</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/dns">DNS</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20231119-book-review">책 &quot;유난한 도전&quot;과 &quot;무브업&quot;을 읽고나서...</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20231205-nginx-allow-ip">Kubernetes에서 Nginx로 IP allow list 제어</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2024</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var t=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var i=c=\u003er(c,\"__esModule\",{value:!0});var g=(c,d)=\u003e()=\u003e(d||c((d={exports:{}}).exports,d),d.exports),w=(c,d)=\u003e{i(c);for(var n in d)r(c,n,{get:d[n],enumerable:!0})},p=(c,d,n)=\u003e{if(d\u0026\u0026typeof d==\"object\"||typeof d==\"function\")for(let o of s(d))!u.call(c,o)\u0026\u0026o!==\"default\"\u0026\u0026r(c,o,{get:()=\u003ed[o],enumerable:!(n=h(d,o))||n.enumerable});return c},f=c=\u003ep(i(r(c!=null?t(m(c)):{},\"default\",c\u0026\u0026c.__esModule\u0026\u0026\"default\"in c?{get:()=\u003ec.default,enumerable:!0}:{value:c,enumerable:!0})),c);var l=g((M,a)=\u003e{a.exports=_jsx_runtime});var y={};w(y,{default:()=\u003eA,frontmatter:()=\u003eb});var e=f(l()),b={title:\"CNAME flattening\",date:\"2023-11-22\",tags:[\"DNS\"],images:[\"/static/images/social-banner.png\"],summary:\"CNAME flattening\\uC774 \\uC5B4\\uB5BB\\uAC8C \\uC791\\uB3D9\\uD558\\uACE0, \\uC65C \\uC0AC\\uC6A9\\uD558\\uAC8C \\uB418\\uC5C8\\uB294\\uC9C0 \\uC774\\uD574\\uD558\\uAC8C \\uB418\\uC5C8\\uB2E4.\"};function N(c={}){let{wrapper:d}=c.components||{};return d?(0,e.jsx)(d,Object.assign({},c,{children:(0,e.jsx)(n,{})})):n();function n(){let o=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",blockquote:\"blockquote\",pre:\"pre\"},c.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(o.h2,{id:\"cname-flattening\\uB294-\\uBB34\\uC5C7\\uC778\\uAC00\",children:[(0,e.jsx)(o.a,{href:\"#cname-flattening\\uB294-\\uBB34\\uC5C7\\uC778\\uAC00\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(o.span,{className:\"icon icon-link\"})}),\"CNAME flattening\\uB294 \\uBB34\\uC5C7\\uC778\\uAC00?\"]}),(0,e.jsxs)(o.p,{children:[\"DNS specification\\uC5D0\\uC11C Domain\\uC758 Root record\\uB85C\\uB294 CNAME\\uAC00 \\uB420 \\uC218 \\uC5C6\\uB3C4\\uB85D \\uB418\\uC5B4 \\uC788\\uB2E4. \\uB9CC\\uC57D \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\" \\uB3C4\\uBA54\\uC778\\uC774 \\uC788\\uACE0, \\uB098\\uC758 \\uC11C\\uBC84\\uAC00 \",(0,e.jsx)(o.code,{children:\"59.34.124.34\"}),\"\\uC774\\uB77C\\uACE0 \\uD558\\uBA74 \",(0,e.jsx)(o.code,{children:\"A record\"}),\"\\uB85C Root record\\uB97C \\uC0DD\\uC131\\uD560 \\uC218\\uB294 \\uC788\\uB2E4. \\uD558\\uC9C0\\uB9CC Load balancer\\uAC00 \",(0,e.jsx)(o.code,{children:\"some.loadbalancer.com\"}),\"\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uC73C\\uBA74, \\uC774\\uAC78 CNAME\\uC73C\\uB85C \",(0,e.jsx)(o.code,{children:\"root record\"}),\"\\uB85C \\uB4F1\\uB85D\\uD560 \\uC218\\uAC00 \\uC5C6\\uB2E4. \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC5D0 \\uC9C1\\uC811 IP address\\uB97C \\uC5F0\\uACB0\\uD558\\uB294 \\uAC83\\uBCF4\\uB2E4 CNAME\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uC73C\\uBA74 \\uC11C\\uBC84\\uAC00 \\uBCC0\\uACBD\\uB418\\uAC70\\uB098 Scale in/out\\uB420 \\uB54C \\uC720\\uC5F0\\uD558\\uAC8C \\uB300\\uCC98\\uD560 \\uC218 \\uC788\\uB2E4. DNS specification\\uC744 \\uBC97\\uC5B4\\uB098\\uC11C CNAME\\uC744 \\uB4F1\\uB85D\\uD558\\uB3C4\\uB85D \\uD560 \\uC218 \\uC788\\uC9C0\\uB9CC, \\uC774\\uB7F0 \\uADDC\\uACA9\\uC744 \\uAE30\\uB300\\uD558\\uACE0 \\uB9CC\\uB4E4\\uC5B4\\uC9C4 \\uC11C\\uBE44\\uC2A4\\uC5D0\\uC11C \\uBB38\\uC81C\\uAC00 \\uBC1C\\uC0DD\\uD560 \\uC218\\uB3C4 \\uC788\\uB2E4. \\uC774\\uB7EC\\uD55C \\uADDC\\uACA9\\uC744 \\uC5B4\\uAE30\\uC9C0 \\uC54A\\uACE0 Root record\\uB85C CNAME\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uAC8C \\uD574\\uC8FC\\uB294 \\uBC29\\uBC95\\uC774 \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\"\\uC774\\uB2E4. DNS resolve \\uACFC\\uC815\\uC5D0\\uC11C Root record\\uB97C query\\uD560 \\uB54C CNAME\\uC5D0 \\uC788\\uB294 \\uB3C4\\uBA54\\uC778\\uC744 \\uB0B4\\uB824\\uC8FC\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C, \\uD574\\uB2F9 \\uB3C4\\uBA54\\uC778\\uC5D0 \\uC5F0\\uACB0\\uB41C IP address\\uB97C \\uCC3E\\uC544\\uC640\\uC11C \\uB0B4\\uB824\\uC8FC\\uAC8C \\uB41C\\uB2E4. \\uB530\\uB77C\\uC11C \\uB0B4\\uBD80\\uC801\\uC73C\\uB85C\\uB294 \\uC774\\uB807\\uAC8C \\uC791\\uC5C5\\uC774 \\uCD94\\uAC00\\uB418\\uC9C0\\uB9CC, \\uC678\\uBD80\\uC5D0\\uC11C\\uB294 Root record\\uC5D0 \",(0,e.jsx)(o.code,{children:\"A record\"}),\"\\uAC00 \\uB4F1\\uB85D\\uB41C \\uAC83\\uCC98\\uB7FC \\uC0DD\\uAC01 \\uD560 \\uC218 \\uC788\\uB294 \\uAC83\\uC774\\uB2E4.\"]}),(0,e.jsxs)(o.h2,{id:\"custom-domain-\\uB4F1\\uB85D\",children:[(0,e.jsx)(o.a,{href:\"#custom-domain-\\uB4F1\\uB85D\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(o.span,{className:\"icon icon-link\"})}),\"Custom Domain \\uB4F1\\uB85D\"]}),(0,e.jsxs)(o.p,{children:[\"\\uB9CE\\uC740 SaaS product\\uC911\\uC5D0 \\uAC1C\\uC778\\uC774 \\uAC00\\uC9C0\\uACE0 \\uC788\\uB294 Domain\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uAC8C \\uD574\\uC8FC\\uACE0 \\uC788\\uB2E4. Github\\uC5D0\\uC11C\\uB294 \",(0,e.jsx)(o.code,{children:\"Github pages\"}),\"\\uB77C\\uB294 \\uC11C\\uBE44\\uC2A4\\uB85C \\uAC04\\uB2E8\\uD558\\uAC8C website\\uB97C publish\\uD560 \\uC218 \\uC788\\uB2E4. \\uB9CC\\uC57D \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC758 \\uB3C4\\uBA54\\uC778\\uC744 \\uAC00\\uC9C0\\uACE0 \\uC788\\uB2E4\\uBA74, \\uBA3C\\uC800 \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC744 \\uC18C\\uC720\\uD558\\uACE0 \\uC788\\uB294\\uC9C0 \",(0,e.jsx)(o.code,{children:\"TXT record\"}),\"\\uB97C \\uB4F1\\uB85D\\uD574\\uC11C \\uC778\\uC99D\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 Github\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 IP address\\uB4E4\\uC744 \",(0,e.jsx)(o.code,{children:\"A record\"}),\"\\uB85C \\uB4F1\\uB85D\\uD558\\uBA74 \\uB41C\\uB2E4. \",(0,e.jsx)(o.code,{children:\"https://jayground.com\"}),\"\\uB85C \\uC811\\uC18D\\uC744 \\uD558\\uBA74 \\uC81C\\uACF5\\uB41C IP address\\uB85C \\uC774\\uB3D9\\uD558\\uAC8C \\uB418\\uACE0, \",(0,e.jsx)(o.code,{children:\"Github pages\"}),\"\\uC5D0 custom domain\\uC744 \\uB4F1\\uB85D\\uD574\\uC92C\\uAE30 \\uB54C\\uBB38\\uC5D0 SSL \\uC778\\uC99D\\uC11C\\uC640 \\uAC19\\uC774 \\uCEE8\\uD150\\uCE20\\uB97C \\uB0B4\\uB824\\uC8FC\\uAC8C \\uB41C\\uB2E4. \\uC774\\uB807\\uAC8C \",(0,e.jsx)(o.code,{children:\"A record\"}),\"\\uB97C Root record\\uC73C\\uB85C \\uB4F1\\uB85D\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsxs)(o.p,{children:[\"\\uADF8\\uB7F0\\uB370 \",(0,e.jsx)(o.a,{href:\"https://webflow.com/\",children:\"Webflow\"}),\"\\uC5D0\\uC11C\\uB294 Custom domain\\uC744 \\uB4F1\\uB85D\\uD560 \\uB54C, \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC5D0 \",(0,e.jsx)(o.code,{children:\"A record\"}),\"\\uB97C \\uB4F1\\uB85D\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\"\\uC5D0\\uB294 \",(0,e.jsx)(o.code,{children:\"CNAME\"}),\"\\uC73C\\uB85C \",(0,e.jsx)(o.code,{children:\"proxy-ssl.webflow.com\"}),\"\\uC744 \\uB4F1\\uB85D\\uD558\\uAC8C \\uB41C\\uB2E4. \",(0,e.jsx)(o.a,{href:\"https://university.webflow.com/lesson/manually-connect-a-custom-domain?topics=hosting-code-export\",children:\"Webflow \\uACF5\\uC2DD\\uBB38\\uC11C\"}),\"\\uC5D0\\uC11C \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\"\\uC744 webflow \\uC124\\uC815 \\uD398\\uC774\\uC9C0\\uC5D0\\uC11C default\\uB85C \\uC14B\\uD305\\uC744 \\uD574\\uC57C \\uB41C\\uB2E4\\uACE0 \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,e.jsx)(o.blockquote,{children:(0,e.jsxs)(o.p,{children:[\"Your default domain should be set to the www subdomain (e.g., \",(0,e.jsx)(o.a,{href:\"http://www.yourdomain.com\",children:\"www.yourdomain.com\"}),\"). Setting the root domain (e.g., yourdomain.com) as the default requires a different setup for your DNS records.\"]})}),(0,e.jsxs)(o.p,{children:[\"\\uC774\\uC81C \",(0,e.jsx)(o.code,{children:\"https://jayground.com\"}),\"\\uC73C\\uB85C \\uC811\\uC18D\\uC744 \\uD558\\uBA74 \",(0,e.jsx)(o.code,{children:\"https://www.jayground.com\"}),\"\\uC73C\\uB85C Redirect\\uAC00 \\uB41C\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\"\\uC740 CNAME\\uC73C\\uB85C \",(0,e.jsx)(o.code,{children:\"proxy-ssl.webflow.com\"}),\"\\uC73C\\uB85C \\uB418\\uC5B4 \\uC788\\uC5B4\\uC11C, SSL \\uC778\\uC99D\\uC11C\\uC640 \\uD568\\uAED8 \\uCEE8\\uD150\\uCE20\\uB97C \\uB0B4\\uB824\\uC8FC\\uAC8C \\uB41C\\uB2E4.\"]}),(0,e.jsxs)(o.h2,{id:\"webflow\\uC758-default-domain-\\uBCC0\\uACBD\",children:[(0,e.jsx)(o.a,{href:\"#webflow\\uC758-default-domain-\\uBCC0\\uACBD\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(o.span,{className:\"icon icon-link\"})}),\"Webflow\\uC758 default domain \\uBCC0\\uACBD\"]}),(0,e.jsxs)(o.p,{children:[\"\\uC774\\uC81C \\uBB38\\uC81C\\uB294 Webflow\\uC5D0\\uC11C default\\uAC00 \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\"\\uC774 \\uC544\\uB2C8\\uB77C \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC73C\\uB85C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC2F6\\uC740 \\uACBD\\uC6B0\\uC774\\uB2E4. \\uC774\\uB54C\\uB294 \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\"\\uC744 \\uD1B5\\uD574\\uC11C \\uD560 \\uC218\\uAC00 \\uC788\\uB2E4. \\uC774\\uC81C DNS\\uC5D0\\uC11C \",(0,e.jsx)(o.code,{children:\"jaygroud.com\"}),\"\\uACFC \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\" \\uB458 \\uB2E4 CNAME\\uC73C\\uB85C \",(0,e.jsx)(o.code,{children:\"proxy-ssl.webflow.com\"}),\"\\uC73C\\uB85C \\uB4F1\\uB85D\\uD558\\uACE0, Webflow\\uC5D0\\uC11C \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC744 Default\\uB85C \\uC124\\uC815\\uD558\\uBA74 \\uB41C\\uB2E4. \\uAC00\\uBE44\\uC544\\uC5D0\\uC11C \\uC81C\\uACF5\\uD558\\uB294 DNS\\uC73C\\uB85C\\uB294 \\uC774\\uB807\\uAC8C \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\"\\uC774 \\uAC00\\uB2A5\\uD574\\uC11C CNAME\\uC744 \\uB4F1\\uB85D\\uD558\\uBA74, \",(0,e.jsx)(o.code,{children:\"https://www.jayground.com\"}),\"\\uC5D0 \\uC811\\uADFC\\uC744 \\uD560 \\uB54C \",(0,e.jsx)(o.code,{children:\"https://jayground.com\"}),\"\\uC73C\\uB85C Redirect \\uB41C\\uB2E4. \\uD558\\uC9C0\\uB9CC AWS Route53\\uC744 \\uC0AC\\uC6A9\\uD55C\\uB2E4\\uACE0 \\uD558\\uBA74, \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\" \\uAC19\\uC740 \\uAC78 \\uC81C\\uACF5\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4. \\uB530\\uB77C\\uC11C \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC73C\\uB85C CNAME record\\uB97C \\uB4F1\\uB85D \\uD560 \\uC218\\uAC00 \\uC5C6\\uB2E4. AWS Route53\\uC5D0\\uC11C Root record\\uB85C AWS\\uC5D0 \\uC788\\uB294 resource\\uB4E4\\uC744 Alias\\uB85C \\uB4F1\\uB85D\\uD560 \\uC218\\uB294 \\uC788\\uC9C0\\uB9CC, \\uB2E4\\uB978 \\uB3C4\\uBA54\\uC778\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218\\uB294 \\uC5C6\\uB2E4.\"]}),(0,e.jsxs)(o.h2,{id:\"-webflow\\uB294-\\uC65C-\\uC774\\uB807\\uAC8C-\\uB418\\uC5B4-\\uC788\\uB294-\\uAC78\\uAE4C\",children:[(0,e.jsx)(o.a,{href:\"#-webflow\\uB294-\\uC65C-\\uC774\\uB807\\uAC8C-\\uB418\\uC5B4-\\uC788\\uB294-\\uAC78\\uAE4C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(o.span,{className:\"icon icon-link\"})}),\"\\u{1F914} Webflow\\uB294 \\uC65C \\uC774\\uB807\\uAC8C \\uB418\\uC5B4 \\uC788\\uB294 \\uAC78\\uAE4C?\"]}),(0,e.jsxs)(o.p,{children:[(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\"\\uC758 \\uC7A5\\uC810\\uC744 \\uC0DD\\uAC01\\uD574\\uBCF4\\uBA74, Webflow\\uC5D0\\uC11C \\uACE0\\uC815\\uB41C IP address\\uB97C A record\\uB85C \\uB4F1\\uB85D\\uD558\\uAC8C \\uD558\\uB294 \\uAC83\\uBCF4\\uB2E4 CNAME\\uC744 \\uB4F1\\uB85D\\uD558\\uBA74 \\uC778\\uD504\\uB77C \\uB9AC\\uC18C\\uC2A4\\uAC00 \\uBCC0\\uACBD\\uB418\\uC5B4\\uB3C4 \\uC720\\uC5F0\\uD558\\uAC8C \\uB300\\uCC98\\uD560 \\uC218 \\uC788\\uC744 \\uAC83\\uC774\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \",(0,e.jsx)(o.code,{children:\"Root record\"}),\"\\uB85C CNAME\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218\\uAC00 \\uC5C6\\uC73C\\uB2C8\\uAE50, \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC5D0\\uB294 A record\\uB97C \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uAC8C IP address\\uB97C \\uC81C\\uACF5\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 \\uC774\\uAC74 \\uC544\\uC8FC \\uAC04\\uB2E8\\uD558\\uAC8C Redirect\\uB9CC \\uC218\\uD589\\uD574\\uC11C \\uC778\\uD504\\uB77C \\uC790\\uC6D0\\uC744 \\uCD5C\\uC18C\\uD55C\\uC73C\\uB85C \\uC4F0\\uB3C4\\uB85D \\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 redirect\\uB41C \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\"\\uC740 CNAME\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uC73C\\uB2C8\\uAE50, \",(0,e.jsx)(o.code,{children:\"proxy-ssl.webflow.com\"}),\"\\uC5D0\\uC11C Let's encrypt \\uC778\\uC99D\\uC11C\\uB3C4 \\uB0B4\\uB824\\uC8FC\\uACE0, \\uD574\\uB2F9 \\uCEE8\\uD150\\uCE20\\uB4E4\\uC744 \\uB0B4\\uB824\\uC900\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uB9CC\\uC57D \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\" \\uC9C0\\uC6D0\\uD55C\\uB2E4\\uACE0 \\uD558\\uBA74 \",(0,e.jsx)(o.code,{children:\"jayground.com\"}),\"\\uC640 \",(0,e.jsx)(o.code,{children:\"www.jayground.com\"}),\" \\uBAA8\\uB450 CNAME\\uC73C\\uB85C \\uB4F1\\uB85D\\uD558\\uC5EC \\uC778\\uD504\\uB77C \\uC790\\uC6D0\\uC758 \\uC720\\uC5F0\\uD568\\uC744 \\uAC00\\uC838\\uAC08 \\uC218 \\uC788\\uC744 \\uAC83\\uC774\\uB2E4.\"]}),(0,e.jsxs)(o.h2,{id:\"-github-pages\\uB294\",children:[(0,e.jsx)(o.a,{href:\"#-github-pages\\uB294\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(o.span,{className:\"icon icon-link\"})}),\"\\u{1F914} Github pages\\uB294?\"]}),(0,e.jsxs)(o.p,{children:[\"\\uADF8\\uB7F0\\uB370 Webflow \\uCF00\\uC774\\uC2A4\\uC5D0 \\uB300\\uD55C \\uB098\\uC758 \\uC0DD\\uAC01\\uC774 \\uB9DE\\uB2E4\\uBA74, Github pages\\uC758 \\uACBD\\uC6B0\\uC5D0 \\uC0AC\\uC6A9\\uD558\\uB294 \\uC0AC\\uC6A9\\uC790 \\uC22B\\uC790\\uAC00 \\uD6E8\\uC52C \\uB9CE\\uC744 \\uD150\\uB370 \\uC65C CNAME\\uC744 \\uD65C\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC744\\uAE4C?\\u{1F914} Github pages\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uBAA8\\uB450\\uC5D0\\uAC8C \",(0,e.jsx)(o.a,{href:\"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site\",children:\"\\uBB38\\uC11C\\uC5D0 \\uB098\\uC628 \\uAC83\\uCC98\\uB7FC\"}),\" \\uD2B9\\uC815\\uD55C IP\\uB97C \\uC81C\\uACF5\\uD558\\uC5EC A record\\uB97C \\uB4F1\\uB85D\\uD558\\uAC8C \\uD55C\\uB2E4.\"]}),(0,e.jsx)(o.pre,{children:(0,e.jsxs)(o.code,{className:\"code-highlight\",children:[(0,e.jsx)(o.span,{className:\"code-line\",children:`185.199.108.153\n`}),(0,e.jsx)(o.span,{className:\"code-line\",children:`185.199.109.153\n`}),(0,e.jsx)(o.span,{className:\"code-line\",children:`185.199.110.153\n`}),(0,e.jsx)(o.span,{className:\"code-line\",children:`185.199.111.153\n`})]})}),(0,e.jsxs)(o.p,{children:[\"\\uC774 IP\\uC758 \\uC11C\\uBC84\\uB4E4\\uC774 load balancer\\uB85C reverse proxy \\uC5ED\\uD560\\uC744 \\uD560 \\uAC83\\uC774\\uACE0, \\uC774 \\uC11C\\uBC84\\uB4E4\\uC758 \\uC0AC\\uC591\\uC774 \\uCDA9\\uBD84\\uD788 \\uB300\\uADDC\\uBAA8 \\uC0AC\\uC6A9\\uC790\\uC758 \\uD2B8\\uB798\\uD53D\\uC744 \\uCDA9\\uBD84\\uD788 \\uAC10\\uB2F9\\uD560 \\uC218 \\uC788\\uAC8C \\uC124\\uACC4\\uAC00 \\uB418\\uC5B4 \\uC788\\uC744 \\uAC83\\uC774\\uB2E4. \\uC77C\\uB2E8 DNS specification\\uC5D0\\uC11C\\uB294 \",(0,e.jsx)(o.code,{children:\"CNAME record\"}),\"\\uB97C root record\\uB85C \\uB4F1\\uB85D\\uD560 \\uC218\\uAC00 \\uC5C6\\uACE0, \",(0,e.jsx)(o.code,{children:\"CNAME flattening\"}),\"\\uAC19\\uC740 \\uAC74 CNAME\\uC744 \\uB4F1\\uB85D\\uD560 \\uC218 \\uC788\\uB294 \\uD3B8\\uBC95(?)\\uAC19\\uC740 \\uAC70\\uB2C8\\uAE50 \",(0,e.jsx)(o.code,{children:\"CNAME\"}),\"\\uC740 \\uC0DD\\uAC01\\uD558\\uC9C0 \\uC54A\\uB294 \\uAC83\\uC77C\\uAE4C? \\uADF8\\uB9AC\\uACE0 Github pages\\uB294 \\uC774\\uBBF8 \\uB300\\uADDC\\uBAA8\\uC758 \\uC0AC\\uC6A9\\uC790\\uB97C \\uAC00\\uC9C0\\uACE0 \\uC788\\uACE0, \\uADF8\\uAC83\\uC744 \\uC704\\uD574 \\uBCC0\\uD654\\uAC00 \\uC801\\uC740 \\uC778\\uD504\\uB77C\\uB97C \\uC720\\uC9C0\\uD558\\uACE0 \\uC788\\uC5B4\\uC11C \\uAD6C\\uC9C0 \",(0,e.jsx)(o.code,{children:\"CNAME record\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C \\uC720\\uC5F0\\uD568\\uC744 \\uAC00\\uC838\\uAC08 \\uD544\\uC694\\uAC00 \\uC5C6\\uB294 \\uAC83\\uC77C\\uAE4C? \\u{1F914}\\u{1F914}\\u{1F914}\"]})]})}}var A=N;return y;})();\n;return Component;","toc":[{"value":"CNAME flattening는 무엇인가?","url":"#cname-flattening는-무엇인가","depth":2},{"value":"Custom Domain 등록","url":"#custom-domain-등록","depth":2},{"value":"Webflow의 default domain 변경","url":"#webflow의-default-domain-변경","depth":2},{"value":"🤔 Webflow는 왜 이렇게 되어 있는 걸까?","url":"#-webflow는-왜-이렇게-되어-있는-걸까","depth":2},{"value":"🤔 Github pages는?","url":"#-github-pages는","depth":2}],"frontMatter":{"readingTime":{"text":"3 min read","minutes":3,"time":180000,"words":600},"slug":"20231122-cname-flattening","fileName":"20231122-cname-flattening.md","title":"CNAME flattening","date":"2023-11-22T00:00:00.000Z","tags":["DNS"],"images":["/static/images/social-banner.png"],"summary":"CNAME flattening이 어떻게 작동하고, 왜 사용하게 되었는지 이해하게 되었다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"책 \"유난한 도전\"과 \"무브업\"을 읽고나서...","date":"2023-11-19T00:00:00.000Z","tags":["book"],"images":["/static/images/social-banner.png"],"summary":"책 \"유난한 도전\"를 시간 가는 줄 모르고 재미있게 읽었다. 토스의 초기부터 최근까지 겪었던 우여곡절과 그 속에서 만들어낸 성공 스토리들을 읽으면서, 내 가슴에 뭔가 꿈틀꿈틀 거리는 열정과 흥분을 느꼈다. 또 다시 주도적인 변화를 만들어내고 싶다는 열정을 가지게 된 것과 동시에 나는 그러한 치열함과 멋진 커리어를 가지지 못했다는 불안감을 가지게 되었다. 책 \"무브업\"은 나의 커리어적인 불암감에 위에 양념을 살짝 더 뿌려줬다. 하지만 그래도 이제는 그러한 불안감에 압도당하지 않고, 내가 주어진 하루에서 내가 할 수 있는 최선을 고민하는 할 수 있다.","slug":"20231119-book-review"},"next":{"title":"Kubernetes에서 Nginx로 IP allow list 제어","date":"2023-12-05T00:00:00.000Z","tags":["Kubernetes","Nginx"],"images":["/static/images/social-banner.png"],"summary":"Kubernetes cluster에서 Nginx로 허용 가능한 IP를 설정하고 싶었다. 간단하게 끝날 줄 알았던 작업은 또다른 삽질기가 되었다.😭 Kubernetes에서 SNAT이 되는 과정을 이해하고 externalTrafficPolicy를 Local로 설정했다. 그리고 External Load balancer에서는 client IP를 전달하기 위해서 Proxy Protocol와 같은 것을 설정하고, Nginx에서 그 Proxy protocol로 전달된 IP address로 Access control을 할 수 있도록 설정하였다.","slug":"20231205-nginx-allow-ip"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20231122-cname-flattening"]},"buildId":"_bO-Etl4w39STSwsZombp","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>