<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>OpenTelmetry로 auth.log와 syslog 수집하기</title><meta name="robots" content="follow, index"/><meta name="description" content="Ubuntu 20.04 서버의 auth.log, syslog 로그 값들을 OpenTelemetry를 통해서 수집하고 싶었다. 처음에는 Filelog Receiver를 통해서 수집하려고 하였고, rsyslog의 설정값을 변경하여 Filelog로 수집하도록 구성했다. 그런데 이후에 Syslog Receiver가 존재하는 것을 확인하게 되었고, 훨씬 간단하게 syslog를 수집할 수 있었다."/><meta property="og:url" content="https://jayground8.github.io/blog/20240501-opentelemetry-syslog"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="Ubuntu 20.04 서버의 auth.log, syslog 로그 값들을 OpenTelemetry를 통해서 수집하고 싶었다. 처음에는 Filelog Receiver를 통해서 수집하려고 하였고, rsyslog의 설정값을 변경하여 Filelog로 수집하도록 구성했다. 그런데 이후에 Syslog Receiver가 존재하는 것을 확인하게 되었고, 훨씬 간단하게 syslog를 수집할 수 있었다."/><meta property="og:title" content="OpenTelmetry로 auth.log와 syslog 수집하기"/><meta property="og:image" content="https://jayground8.github.io/static/images/social-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="OpenTelmetry로 auth.log와 syslog 수집하기"/><meta name="twitter:description" content="Ubuntu 20.04 서버의 auth.log, syslog 로그 값들을 OpenTelemetry를 통해서 수집하고 싶었다. 처음에는 Filelog Receiver를 통해서 수집하려고 하였고, rsyslog의 설정값을 변경하여 Filelog로 수집하도록 구성했다. 그런데 이후에 Syslog Receiver가 존재하는 것을 확인하게 되었고, 훨씬 간단하게 syslog를 수집할 수 있었다."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/social-banner.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20240501-opentelemetry-syslog"/><meta property="article:published_time" content="2024-05-01T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20240501-opentelemetry-syslog"
  },
  "headline": "OpenTelmetry로 auth.log와 syslog 수집하기",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/social-banner.png"
    }
  ],
  "datePublished": "2024-05-01T00:00:00.000Z",
  "dateModified": "2024-05-01T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "Ubuntu 20.04 서버의 auth.log, syslog 로그 값들을 OpenTelemetry를 통해서 수집하고 싶었다. 처음에는 Filelog Receiver를 통해서 수집하려고 하였고, rsyslog의 설정값을 변경하여 Filelog로 수집하도록 구성했다. 그런데 이후에 Syslog Receiver가 존재하는 것을 확인하게 되었고, 훨씬 간단하게 syslog를 수집할 수 있었다."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9992cb28f62a9048.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/ANKos555WtMk9piaFQ3D4/_buildManifest.js" defer=""></script><script src="/_next/static/ANKos555WtMk9piaFQ3D4/_ssgManifest.js" defer=""></script><script src="/_next/static/ANKos555WtMk9piaFQ3D4/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">블로그</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">블로그</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2024-05-01T00:00:00.000Z">2024년 5월 1일 수요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">OpenTelmetry로 auth.log와 syslog 수집하기</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/README.md">OpenTelemetry Collector</a>를 사용해서 Ubuntu 서버의 <code>/var/log/auth.log</code>와 <code>/var/log/syslog</code>를 수집하고 싶었다.</p><p>환경</p><ul><li>Ubuntu 20.04</li><li><code>opentelemetry-collector </code>Chart version <code>0.90.0</code></li></ul><h2 id="filelog-receiver"><a href="#filelog-receiver" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Filelog Receiver</h2><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/filelogreceiver">Filelog Receiver</a>로 log file을 tail하고 parse를 할 수 있다. 따라서 <code>audit.log</code>, <code>syslog</code> 파일들을 filelog로 수집하면 되겠다는 생각을 하였다. 따라서 아래와 같이 value값을 설정하여 Helm으로 배포하였다.</p><p><code>values.yaml</code></p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">config</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">jaeger</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">prometheus</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">zipkin</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">filelog</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">exclude</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line">			<span class="token atrule key">include</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token punctuation">-</span> /var/log/auth.log
</span><span class="code-line">			<span class="token punctuation">-</span> /var/log/syslog
</span><span class="code-line">			<span class="token atrule key">include_file_name</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">			<span class="token atrule key">include_file_path</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line">			<span class="token atrule key">operators</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token punctuation">-</span> <span class="token atrule key">id</span><span class="token punctuation">:</span> parser<span class="token punctuation">-</span>host<span class="token punctuation">-</span>log
</span><span class="code-line">				<span class="token atrule key">regex</span><span class="token punctuation">:</span> ^(<span class="token punctuation">?</span>P&lt;time<span class="token punctuation">&gt;</span>^<span class="token punctuation">[</span>^ Z<span class="token punctuation">]</span>+) (<span class="token punctuation">?</span>P&lt;hostname<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)</span> (((<span class="token punctuation">?</span>P&lt;service<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)\</span><span class="token punctuation">[</span>(<span class="token punctuation">?</span>P&lt;pid<span class="token punctuation">&gt;</span>.<span class="token important">*)\</span><span class="token punctuation">]</span><span class="token punctuation">|</span>(<span class="token punctuation">?</span>P&lt;command<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)):)</span> (<span class="token punctuation">?</span>P&lt;message<span class="token punctuation">&gt;</span>.<span class="token important">*)$</span>
</span><span class="code-line">				<span class="token atrule key">timestamp</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token atrule key">layout</span><span class="token punctuation">:</span> 2006<span class="token punctuation">-</span>01<span class="token punctuation">-</span>02T15<span class="token punctuation">:</span>04<span class="token punctuation">:</span>05.999999999Z07<span class="token punctuation">:</span><span class="token number">00</span>
</span><span class="code-line">					<span class="token atrule key">layout_type</span><span class="token punctuation">:</span> gotime
</span><span class="code-line">					<span class="token atrule key">parse_from</span><span class="token punctuation">:</span> attributes.time
</span><span class="code-line">				<span class="token atrule key">type</span><span class="token punctuation">:</span> regex_parser
</span><span class="code-line">			<span class="token punctuation">-</span> <span class="token atrule key">type</span><span class="token punctuation">:</span> add
</span><span class="code-line">				<span class="token atrule key">field</span><span class="token punctuation">:</span> attributes.container
</span><span class="code-line">				<span class="token atrule key">value</span><span class="token punctuation">:</span> host
</span><span class="code-line">			<span class="token atrule key">poll_interval</span><span class="token punctuation">:</span> 5s
</span><span class="code-line">			<span class="token atrule key">start_at</span><span class="token punctuation">:</span> end
</span><span class="code-line">	<span class="token atrule key">service</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">telemetry</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">logs</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">level</span><span class="token punctuation">:</span> info
</span><span class="code-line">		<span class="token atrule key">pipelines</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">traces</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> otlp
</span><span class="code-line">			<span class="token atrule key">metrics</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> otlp
</span><span class="code-line">			<span class="token atrule key">logs</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> filelog
</span><span class="code-line">				<span class="token atrule key">exporters</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> debug
</span><span class="code-line">	<span class="token atrule key">exporters</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">debug</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">verbosity</span><span class="token punctuation">:</span> detailed
</span><span class="code-line"><span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-compact</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-thrift</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-grpc</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">zipkin</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line"><span class="token atrule key">mode</span><span class="token punctuation">:</span> daemonset
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">repository</span><span class="token punctuation">:</span> otel/opentelemetry<span class="token punctuation">-</span>collector<span class="token punctuation">-</span>k8s
</span><span class="code-line"><span class="token atrule key">extraVolumeMounts</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">mountPath</span><span class="token punctuation">:</span> /var/log/
</span><span class="code-line">	<span class="token atrule key">name</span><span class="token punctuation">:</span> varlog
</span><span class="code-line">	<span class="token atrule key">readOnly</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line"><span class="token atrule key">extraVolumes</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">hostPath</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">path</span><span class="token punctuation">:</span> /var/log/
</span><span class="code-line">	<span class="token atrule key">name</span><span class="token punctuation">:</span> varlog
</span><span class="code-line"><span class="token atrule key">presets</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">logsCollection</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line">		<span class="token atrule key">includeCollectorLogs</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span></code></pre></div><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/open-telemetry/opentelemetry-helm-charts/blob/opentelemetry-collector-0.90.1/charts/opentelemetry-collector/templates/_pod.tpl">opentelmetry-collector Chart template</a>를 보면, <code>logsCollection.enabled</code>이 true로 설정했을 때 아래와 같이 hostPath가 추가되는 것을 알 수 있다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token comment"># VolumeMounts</span>
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if .Values.presets.logsCollection.enabled <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlogpods
</span><span class="code-line">	<span class="token atrule key">mountPath</span><span class="token punctuation">:</span> /var/log/pods
</span><span class="code-line">	<span class="token atrule key">readOnly</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlibdockercontainers
</span><span class="code-line">	<span class="token atrule key">mountPath</span><span class="token punctuation">:</span> /var/lib/docker/containers
</span><span class="code-line">	<span class="token atrule key">readOnly</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if .Values.presets.logsCollection.storeCheckpoints<span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlibotelcol
</span><span class="code-line">	<span class="token atrule key">mountPath</span><span class="token punctuation">:</span> /var/lib/otelcol
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Volumes</span>
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if .Values.presets.logsCollection.enabled <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlogpods
</span><span class="code-line">	<span class="token atrule key">hostPath</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">path</span><span class="token punctuation">:</span> /var/log/pods
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if .Values.presets.logsCollection.storeCheckpoints<span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlibotelcol
</span><span class="code-line">	<span class="token atrule key">hostPath</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">path</span><span class="token punctuation">:</span> /var/lib/otelcol
</span><span class="code-line">		<span class="token atrule key">type</span><span class="token punctuation">:</span> DirectoryOrCreate
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> varlibdockercontainers
</span><span class="code-line">	<span class="token atrule key">hostPath</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">path</span><span class="token punctuation">:</span> /var/lib/docker/containers
</span><span class="code-line"><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span></code></pre></div><p>Host의 <code>/var/log</code> 아래에 있는 <code>auth.log</code>와 <code>syslog</code>를 접근하기 위해서는 hostPath를 추가해줘야 한다. 따라서 Helm values에 아래와 같이 추가한다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">extraVolumeMounts</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">mountPath</span><span class="token punctuation">:</span> /var/log/
</span><span class="code-line">	<span class="token atrule key">name</span><span class="token punctuation">:</span> varlog
</span><span class="code-line">	<span class="token atrule key">readOnly</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line"><span class="token atrule key">extraVolumes</span><span class="token punctuation">:</span>
</span><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">hostPath</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">path</span><span class="token punctuation">:</span> /var/log/
</span><span class="code-line">	<span class="token atrule key">name</span><span class="token punctuation">:</span> varlog
</span></code></pre></div><p>그런데 Ubuntu server에서 실행되는 rsyslog가 남기는 파일 권한이 640으로 되어있다. 따라서 hostPath를 사용해도 파일들을 읽을 권한이 없어서 에러가 발생한다. 따라서 opentelemetry collector agent에 에러 로그가 남는 것을 확인할 수 있다. rsyslog가 파일을 생성할 때, <code>rsyslog.conf</code>의 <code>$FileCreateMode</code>을 수정하여 644로 조정하였다.</p><p><code>/etc/rsyslog.conf</code></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token comment"># Set the default permissions for all log files.</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token variable">$FileOwner</span> syslog
</span><span class="code-line"><span class="token variable">$FileGroup</span> adm
</span><span class="code-line"><span class="token variable">$FileCreateMode</span> 0644 <span class="token comment"># 640에서 변경</span>
</span><span class="code-line"><span class="token variable">$DirCreateMode</span> 0755
</span><span class="code-line"><span class="token variable">$Umask</span> 0022
</span><span class="code-line"><span class="token variable">$PrivDropToUser</span> syslog
</span><span class="code-line"><span class="token variable">$PrivDropToGroup</span> syslog
</span></code></pre></div><p>rsyslog를 재시작하고 나면 이제 새로 만들어지는 파일에 대해서 변경된 권한이 적용된다. 이렇게 변경된 권한의 파일을 opentelemetry collector agent가 정상적으로 읽을 수 있게 된다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">systemctl daemon-reload
</span><span class="code-line">systemctl restart rsyslog
</span></code></pre></div><p>그리고 log message의 format을 보면 아래와 같이 기본 설정이 되어 있었다.</p><div class="relative"><pre><code class="code-highlight language-log"><span class="code-line"><span class="token number date">May  1</span> <span class="token number time">20:33:04</span> hostname sshd<span class="token punctuation">[</span><span class="token number">2692917</span><span class="token punctuation">]</span><span class="token operator">:</span> pam_tally2<span class="token operator">(</span>sshd<span class="token operator">:</span>setcred<span class="token operator">)</span><span class="token operator">:</span> unknown option<span class="token operator">:</span> reset
</span></code></pre></div><p><code>May 1 20:33:04</code> 값이 연도 숫자가 없고, Filelog의 operator를 통해서 parse하는데도 어려움이 있었다. <code>syslog.conf</code>를 확인하면 아래와 같이 <a target="_blank" rel="noopener noreferrer" href="https://www.rsyslog.com/doc/configuration/templates.html">rsyslog에서 기본적으로 제공하는 template</a>중에 하나가 선택되어 있다.</p><p><code>/etc/rsyslog.conf</code></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token variable">$ActionFileDefaultTemplate</span> RSYSLOG_TraditionalFileFormat
</span></code></pre></div><p>날짜형식을 <code>rfc3339</code>으로 하는 template을 아래와 같이 설정하고, rsyslog를 다시 재시작한다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token variable">$ActionFileDefaultTemplate</span> RSYSLOG_FileFormat
</span></code></pre></div><p>변경이 적용되면 아래와 같이 log message가 남게 된다.</p><div class="relative"><pre><code class="code-highlight language-log"><span class="code-line"><span class="token number date">2024-05-01T</span><span class="token number time">23:04:35.590363+09:00</span> hostname systemd<span class="token operator">:</span> pam_tally2<span class="token operator">(</span>systemd<span class="token operator">-</span>user<span class="token operator">:</span>setcred<span class="token operator">)</span><span class="token operator">:</span> unknown option<span class="token operator">:</span> reset
</span></code></pre></div><p>그래서 이제 <code>regex_parser</code>를 통해서 log message를 정규표현식에 맞춰서 parse한다. time group값을 통해서 timestamp를 생성한다. <a target="_blank" rel="noopener noreferrer" href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/stanza/docs/types/timestamp.md">gotime과 strptime type이 있고 layout은 이 문서를 확인해서 작성한다.</a></p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token punctuation">-</span> <span class="token atrule key">id</span><span class="token punctuation">:</span> parser<span class="token punctuation">-</span>host<span class="token punctuation">-</span>log
</span><span class="code-line">	<span class="token atrule key">regex</span><span class="token punctuation">:</span> ^(<span class="token punctuation">?</span>P&lt;time<span class="token punctuation">&gt;</span>^<span class="token punctuation">[</span>^ Z<span class="token punctuation">]</span>+) (<span class="token punctuation">?</span>P&lt;hostname<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)</span> (((<span class="token punctuation">?</span>P&lt;service<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)\</span><span class="token punctuation">[</span>(<span class="token punctuation">?</span>P&lt;pid<span class="token punctuation">&gt;</span>.<span class="token important">*)\</span><span class="token punctuation">]</span><span class="token punctuation">|</span>(<span class="token punctuation">?</span>P&lt;command<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>^ <span class="token punctuation">]</span><span class="token important">*)):)</span> (<span class="token punctuation">?</span>P&lt;message<span class="token punctuation">&gt;</span>.<span class="token important">*)$</span>
</span><span class="code-line">	<span class="token atrule key">timestamp</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">layout</span><span class="token punctuation">:</span> 2006<span class="token punctuation">-</span>01<span class="token punctuation">-</span>02T15<span class="token punctuation">:</span>04<span class="token punctuation">:</span>05.999999999Z07<span class="token punctuation">:</span><span class="token number">00</span>
</span><span class="code-line">		<span class="token atrule key">layout_type</span><span class="token punctuation">:</span> gotime
</span><span class="code-line">		<span class="token atrule key">parse_from</span><span class="token punctuation">:</span> attributes.time
</span><span class="code-line">	<span class="token atrule key">type</span><span class="token punctuation">:</span> regex_parser
</span></code></pre></div><p>debug exporter를 설정하여 standout으로 출력되는 값을 확인해본다.</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">exporters</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">debug</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">verbosity</span><span class="token punctuation">:</span> detailed
</span></code></pre></div><p>이제 정상적으로 아래와 같이 opentelmetry collector agent에 로그가 남는다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">kubectl logs -f -l <span class="token variable assign-left">component</span><span class="token operator">=</span>agent-collector
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">LogRecord <span class="token comment">#6</span>
</span><span class="code-line">ObservedTimestamp: <span class="token number">2024</span>-05-01 <span class="token number">15</span>:12:16.671281334 +0000 UTC
</span><span class="code-line">Timestamp: <span class="token number">2024</span>-05-01 <span class="token number">15</span>:12:14.30976 +0000 UTC
</span><span class="code-line">SeverityText:
</span><span class="code-line">SeverityNumber: Unspecified<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line">Body: Str<span class="token punctuation">(</span><span class="token number">2024</span>-05-02T00:12:14.309760+09:00 <span class="token function">hostname</span> sshd<span class="token punctuation">[</span><span class="token number">2727770</span><span class="token punctuation">]</span>: pam_tally2<span class="token punctuation">(</span>sshd:setcred<span class="token punctuation">)</span>: unknown option: reset<span class="token punctuation">)</span>
</span><span class="code-line">Attributes:
</span><span class="code-line">     -<span class="token operator">&gt;</span> command: Str<span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> message: Str<span class="token punctuation">(</span>pam_tally2<span class="token punctuation">(</span>sshd:setcred<span class="token punctuation">)</span>: unknown option: reset<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> container: Str<span class="token punctuation">(</span>host<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> log.file.path: Str<span class="token punctuation">(</span>/var/log/auth.log<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> time: Str<span class="token punctuation">(</span><span class="token number">2024</span>-05-02T00:12:14.309760+09:00<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> hostname: Str<span class="token punctuation">(</span>hostname<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> service: Str<span class="token punctuation">(</span>sshd<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> pid: Str<span class="token punctuation">(</span><span class="token number">2727770</span><span class="token punctuation">)</span>
</span><span class="code-line">Trace ID:
</span><span class="code-line">Span ID:
</span><span class="code-line">Flags: <span class="token number">0</span>
</span><span class="code-line">	<span class="token punctuation">{</span><span class="token string">&quot;kind&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;exporter&quot;</span>, <span class="token string">&quot;data_type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;logs&quot;</span>, <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;debug&quot;</span><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="syslog-receiver"><a href="#syslog-receiver" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Syslog Receiver</h2><p>그런데 Receiver 종류를 보다가 <a target="_blank" rel="noopener noreferrer" href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/syslogreceiver/README.md">Syslog Receiver</a>도 있는 것을 알게 되었다. 그리고 <a target="_blank" rel="noopener noreferrer" href="https://www.rsyslog.com/doc/configuration/modules/omfwd.html">rsyslog 모듈인 omfwd</a>를 통해서 rsyslog가 opentelemetry syslog receiver에 로그를 보낼 수 있는 것을 알게 되었다. <a target="_blank" rel="noopener noreferrer" href="https://signoz.io/docs/userguide/collecting_syslogs/">SigNoz의 문서에서 rsyslog 설정하는 방법을 잘 설명</a>하고 있다.</p><p>이번에는 아래와 같이 <code>values.yaml</code>을 작성하고 Helm Chart를 배포한다.</p><p><code>values.yaml</code></p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">config</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">jaeger</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">prometheus</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">zipkin</span><span class="token punctuation">:</span> <span class="token important null">null</span>
</span><span class="code-line">		<span class="token atrule key">syslog</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">tcp</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">listen_address</span><span class="token punctuation">:</span> <span class="token string">&quot;localhost:4319&quot;</span>
</span><span class="code-line">			<span class="token atrule key">protocol</span><span class="token punctuation">:</span> rfc3164
</span><span class="code-line">			<span class="token atrule key">location</span><span class="token punctuation">:</span> UTC
</span><span class="code-line">			<span class="token atrule key">operators</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token punctuation">-</span> <span class="token atrule key">type</span><span class="token punctuation">:</span> move
</span><span class="code-line">					<span class="token atrule key">from</span><span class="token punctuation">:</span> attributes.message
</span><span class="code-line">					<span class="token atrule key">to</span><span class="token punctuation">:</span> body
</span><span class="code-line">				<span class="token punctuation">-</span> <span class="token atrule key">type</span><span class="token punctuation">:</span> add
</span><span class="code-line">                  <span class="token atrule key">field</span><span class="token punctuation">:</span> attributes.source
</span><span class="code-line">                  <span class="token atrule key">value</span><span class="token punctuation">:</span> syslog
</span><span class="code-line">	<span class="token atrule key">service</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">telemetry</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">logs</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">level</span><span class="token punctuation">:</span> info
</span><span class="code-line">		<span class="token atrule key">pipelines</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">traces</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> otlp
</span><span class="code-line">			<span class="token atrule key">metrics</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> otlp
</span><span class="code-line">			<span class="token atrule key">logs</span><span class="token punctuation">:</span>
</span><span class="code-line">				<span class="token atrule key">receivers</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> syslog
</span><span class="code-line">				<span class="token atrule key">exporters</span><span class="token punctuation">:</span>
</span><span class="code-line">					<span class="token punctuation">-</span> debug
</span><span class="code-line">	<span class="token atrule key">exporters</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">debug</span><span class="token punctuation">:</span>
</span><span class="code-line">			<span class="token atrule key">verbosity</span><span class="token punctuation">:</span> detailed
</span><span class="code-line"><span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-compact</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-thrift</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">jaeger-grpc</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">zipkin</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">	<span class="token atrule key">syslog</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line">		<span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">4319</span>
</span><span class="code-line">		<span class="token atrule key">hostPort</span><span class="token punctuation">:</span> <span class="token number">4319</span>
</span><span class="code-line">		<span class="token atrule key">protocol</span><span class="token punctuation">:</span> TCP
</span><span class="code-line"><span class="token atrule key">mode</span><span class="token punctuation">:</span> daemonset
</span><span class="code-line"><span class="token atrule key">image</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">repository</span><span class="token punctuation">:</span> otel/opentelemetry<span class="token punctuation">-</span>collector<span class="token punctuation">-</span>contrib
</span><span class="code-line"><span class="token atrule key">hostNetwork</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span><span class="code-line"><span class="token atrule key">presets</span><span class="token punctuation">:</span>
</span><span class="code-line">	<span class="token atrule key">logsCollection</span><span class="token punctuation">:</span>
</span><span class="code-line">		<span class="token atrule key">enabled</span><span class="token punctuation">:</span> <span class="token important boolean">false</span>
</span><span class="code-line">		<span class="token atrule key">includeCollectorLogs</span><span class="token punctuation">:</span> <span class="token important boolean">true</span>
</span></code></pre></div><p><code>syslog receiver</code>를 사용하기 위해서 <code>image.repository</code>를 <code>otel/opentelemetry-collector-contrib</code>로 설정하였다. 그리고 <code>listen_address</code>를 <code>0.0.0.0:4319</code>로 설정했는데, rsyslog가 host에서 해당 <code>4319</code> 포트로 접근할 수 있도록 <code>hostPort</code>를 사용하도록 설정하였다.</p><p><code>hostPort</code>를 설정하였기 때문에, opentelemetry collector의 설정을 보면 <code>4319/TCP</code>가 설정된 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ kubectl describe pod opentelemetry-collector-agent-b7g2j
</span><span class="code-line"><span class="token punctuation">..</span>.생략
</span><span class="code-line">Ports:         <span class="token number">4317</span>/TCP, <span class="token number">4318</span>/TCP, <span class="token number">4319</span>/TCP
</span><span class="code-line">Host Ports:    <span class="token number">4317</span>/TCP, <span class="token number">4318</span>/TCP, <span class="token number">4319</span>/TCP
</span></code></pre></div><p>그리고 Cilium을 CNI로 사용할 때, 아래와 같이 service의 목록을 보면 HostPort가 설정된 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ kubectl <span class="token builtin class-name">exec</span> -it cilium-gxdr7 -n kube-system -- cilium <span class="token function">service</span> list
</span><span class="code-line"><span class="token punctuation">..</span>.생략
</span><span class="code-line"><span class="token number">196</span>   <span class="token number">10.50</span>.3.14:4317         HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4317 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">197</span>   <span class="token number">0.0</span>.0.0:4317           HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4317 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">198</span>   <span class="token number">10.50</span>.3.14:4318         HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4318 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">199</span>   <span class="token number">0.0</span>.0.0:4318           HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4318 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">200</span>   <span class="token number">10.50</span>.3.14:4319        HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4319 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">201</span>   <span class="token number">0.0</span>.0.0:4319          HostPort       <span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">198.18</span>.4.92:4319 <span class="token punctuation">(</span>active<span class="token punctuation">)</span>
</span></code></pre></div><p>이제 <a target="_blank" rel="noopener noreferrer" href="https://signoz.io/docs/userguide/collecting_syslogs/">SigNoz의 문서에서 rsyslog 설정하는 방법</a>에 나온 것처럼 rsyslog 설정을 아래와 같이 추가한다.</p><p><code>/etc/rsyslog.conf</code></p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">template<span class="token punctuation">(</span>
</span><span class="code-line">  <span class="token variable assign-left">name</span><span class="token operator">=</span><span class="token string">&quot;UTCTraditionalForwardFormat&quot;</span>
</span><span class="code-line">  <span class="token variable assign-left">type</span><span class="token operator">=</span><span class="token string">&quot;string&quot;</span>
</span><span class="code-line">  <span class="token variable assign-left">string</span><span class="token operator">=</span><span class="token string">&quot;&lt;%PRI%&gt;%TIMESTAMP:::date-utc% %HOSTNAME% %syslogtag:1:32%%msg:::sp-if-no-1st-sp%%msg%&quot;</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">*.* action<span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token string">&quot;omfwd&quot;</span> <span class="token variable assign-left">target</span><span class="token operator">=</span><span class="token string">&quot;127.0.0.1&quot;</span> <span class="token variable assign-left">port</span><span class="token operator">=</span><span class="token string">&quot;4319&quot;</span> <span class="token variable assign-left">protocol</span><span class="token operator">=</span><span class="token string">&quot;tcp&quot;</span> <span class="token variable assign-left">template</span><span class="token operator">=</span><span class="token string">&quot;UTCTraditionalForwardFormat&quot;</span><span class="token punctuation">)</span>
</span></code></pre></div><p>이제 rsyslog를 재시작하고 나면 Syslog Receiver로 로그를 받은 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token number">2024</span>-05-01T15:01:34.346Z	info	ResourceLog <span class="token comment">#0</span>
</span><span class="code-line">Resource SchemaURL:
</span><span class="code-line">ScopeLogs <span class="token comment">#0</span>
</span><span class="code-line">ScopeLogs SchemaURL:
</span><span class="code-line">InstrumentationScope
</span><span class="code-line">LogRecord <span class="token comment">#0</span>
</span><span class="code-line">ObservedTimestamp: <span class="token number">2024</span>-05-01 <span class="token number">15</span>:01:34.219612783 +0000 UTC
</span><span class="code-line">Timestamp: <span class="token number">2024</span>-05-01 <span class="token number">15</span>:01:34 +0000 UTC
</span><span class="code-line">SeverityText: err
</span><span class="code-line">SeverityNumber: Error<span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span>
</span><span class="code-line">Body: Str<span class="token punctuation">(</span>pam_tally2<span class="token punctuation">(</span>sshd:setcred<span class="token punctuation">)</span>: unknown option: reset<span class="token punctuation">)</span>
</span><span class="code-line">Attributes:
</span><span class="code-line">     -<span class="token operator">&gt;</span> priority: Int<span class="token punctuation">(</span><span class="token number">83</span><span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> facility: Int<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> hostname: Str<span class="token punctuation">(</span>hostname<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> appname: Str<span class="token punctuation">(</span>sshd<span class="token punctuation">)</span>
</span><span class="code-line">     -<span class="token operator">&gt;</span> proc_id: Str<span class="token punctuation">(</span><span class="token number">2725522</span><span class="token punctuation">)</span>
</span><span class="code-line">Trace ID:
</span><span class="code-line">Span ID:
</span><span class="code-line">Flags: <span class="token number">0</span>
</span><span class="code-line">	<span class="token punctuation">{</span><span class="token string">&quot;kind&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;exporter&quot;</span>, <span class="token string">&quot;data_type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;logs&quot;</span>, <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;debug&quot;</span><span class="token punctuation">}</span>
</span></code></pre></div><h2 id="결론"><a href="#결론" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>결론</h2><p>OpenTelmetry에서 Syslog Receiver가 Alpha 상태로 제공되고 있다. rsyslog에서 omfwd 모듈을 통해서 syslog message를 Syslog Receiver로 보낼수가 있다. 그렇게 하기 위해서 rsyslog.conf 설정값을 변경하여 rsyslog를 재시작해야 한다. 처음에는 Syslog Receiver로 쉽게 받을 수 있는 것을 생각하지 못하고, Filelog를 통해서 받도록 설정하였다. 이 과정에서 rsyslog가 file을 생성할 때 644로 권한설정하도록 설정하고, opentelemetry collector agent가 hostPath를 통해서 /var/log에 접근하도록 하였다. 하지만 이 과정에서 Regex rule을 올바르게 작성하는데 어려움이 있었고, 잘못된 설정들로 인해서 최종적으로 원하는 동작을 확인하기까지 시간이 꽤 걸렸다.🥺</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/kubernetes">kubernetes</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/opentelemetry">opentelemetry</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/devsecops">devsecops</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20240427-metastore-catalog-default">Spark에서 Hive database가 조회가 안 되는 문제</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20240505-falco">Falco를 활용하여 Terminal Shell 명령어 로그 수집하기</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2025</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var r=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var t=a=\u003ec(a,\"__esModule\",{value:!0});var u=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{t(a);for(var l in s)c(a,l,{get:s[l],enumerable:!0})},k=(a,s,l)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of d(s))!h.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003es[n],enumerable:!(l=p(s,n))||l.enumerable});return a},g=a=\u003ek(t(c(a!=null?r(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((T,i)=\u003e{i.exports=_jsx_runtime});var f={};N(f,{default:()=\u003ev,frontmatter:()=\u003ey});var e=g(o()),y={title:\"OpenTelmetry\\uB85C auth.log\\uC640 syslog \\uC218\\uC9D1\\uD558\\uAE30\",date:\"2024-05-01\",tags:[\"kubernetes\",\"opentelemetry\",\"devsecops\"],images:[\"/static/images/social-banner.png\"],summary:\"Ubuntu 20.04 \\uC11C\\uBC84\\uC758 auth.log, syslog \\uB85C\\uADF8 \\uAC12\\uB4E4\\uC744 OpenTelemetry\\uB97C \\uD1B5\\uD574\\uC11C \\uC218\\uC9D1\\uD558\\uACE0 \\uC2F6\\uC5C8\\uB2E4. \\uCC98\\uC74C\\uC5D0\\uB294 Filelog Receiver\\uB97C \\uD1B5\\uD574\\uC11C \\uC218\\uC9D1\\uD558\\uB824\\uACE0 \\uD558\\uC600\\uACE0, rsyslog\\uC758 \\uC124\\uC815\\uAC12\\uC744 \\uBCC0\\uACBD\\uD558\\uC5EC Filelog\\uB85C \\uC218\\uC9D1\\uD558\\uB3C4\\uB85D \\uAD6C\\uC131\\uD588\\uB2E4. \\uADF8\\uB7F0\\uB370 \\uC774\\uD6C4\\uC5D0 Syslog Receiver\\uAC00 \\uC874\\uC7AC\\uD558\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD558\\uAC8C \\uB418\\uC5C8\\uACE0, \\uD6E8\\uC52C \\uAC04\\uB2E8\\uD558\\uAC8C syslog\\uB97C \\uC218\\uC9D1\\uD560 \\uC218 \\uC788\\uC5C8\\uB2E4.\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({p:\"p\",a:\"a\",code:\"code\",ul:\"ul\",li:\"li\",h2:\"h2\",span:\"span\",pre:\"pre\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/README.md\",children:\"OpenTelemetry Collector\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C Ubuntu \\uC11C\\uBC84\\uC758 \",(0,e.jsx)(n.code,{children:\"/var/log/auth.log\"}),\"\\uC640 \",(0,e.jsx)(n.code,{children:\"/var/log/syslog\"}),\"\\uB97C \\uC218\\uC9D1\\uD558\\uACE0 \\uC2F6\\uC5C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uD658\\uACBD\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Ubuntu 20.04\"}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"opentelemetry-collector \"}),\"Chart version \",(0,e.jsx)(n.code,{children:\"0.90.0\"})]})]}),(0,e.jsxs)(n.h2,{id:\"filelog-receiver\",children:[(0,e.jsx)(n.a,{href:\"#filelog-receiver\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Filelog Receiver\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/filelogreceiver\",children:\"Filelog Receiver\"}),\"\\uB85C log file\\uC744 tail\\uD558\\uACE0 parse\\uB97C \\uD560 \\uC218 \\uC788\\uB2E4. \\uB530\\uB77C\\uC11C \",(0,e.jsx)(n.code,{children:\"audit.log\"}),\", \",(0,e.jsx)(n.code,{children:\"syslog\"}),\" \\uD30C\\uC77C\\uB4E4\\uC744 filelog\\uB85C \\uC218\\uC9D1\\uD558\\uBA74 \\uB418\\uACA0\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC744 \\uD558\\uC600\\uB2E4. \\uB530\\uB77C\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 value\\uAC12\\uC744 \\uC124\\uC815\\uD558\\uC5EC Helm\\uC73C\\uB85C \\uBC30\\uD3EC\\uD558\\uC600\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"values.yaml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"prometheus\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"zipkin\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"filelog\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exclude\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"include\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /var/log/auth.log\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /var/log/syslog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"include_file_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"include_file_path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operators\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"id\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" parser\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"host\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`log\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"regex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ^(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003ctime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\"^\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ Z\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\"+) (\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003chostname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\"}),\" (((\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cservice\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cpid\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\".\",(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),\"(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003ccommand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)):)\"}),\" (\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cmessage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\".\",(0,e.jsx)(n.span,{className:\"token important\",children:\"*)$\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timestamp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"layout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" 2006\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"01\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"02T15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"04\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"05.999999999Z07\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"layout_type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` gotime\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parse_from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` attributes.time\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` regex_parser\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` add\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"field\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` attributes.container\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` host\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"poll_interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"start_at\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` end\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"service\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"telemetry\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"level\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` info\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"pipelines\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"traces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` otlp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metrics\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` otlp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` filelog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exporters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` debug\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exporters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"debug\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbosity\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` detailed\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-compact\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-thrift\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-grpc\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"zipkin\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` daemonset\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" otel/opentelemetry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"collector\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"extraVolumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"extraVolumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"presets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logsCollection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"includeCollectorLogs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/open-telemetry/opentelemetry-helm-charts/blob/opentelemetry-collector-0.90.1/charts/opentelemetry-collector/templates/_pod.tpl\",children:\"opentelmetry-collector Chart template\"}),\"\\uB97C \\uBCF4\\uBA74, \",(0,e.jsx)(n.code,{children:\"logsCollection.enabled\"}),\"\\uC774 true\\uB85C \\uC124\\uC815\\uD588\\uC744 \\uB54C \\uC544\\uB798\\uC640 \\uAC19\\uC774 hostPath\\uAC00 \\uCD94\\uAC00\\uB418\\uB294 \\uAC83\\uC744 \\uC54C \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# VolumeMounts\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" if .Values.presets.logsCollection.enabled \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlogpods\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/pods\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlibdockercontainers\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/lib/docker/containers\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" if .Values.presets.logsCollection.storeCheckpoints\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlibotelcol\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/lib/otelcol\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" end \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" end \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Volumes\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" if .Values.presets.logsCollection.enabled \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlogpods\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/pods\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" if .Values.presets.logsCollection.storeCheckpoints\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlibotelcol\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/lib/otelcol\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` DirectoryOrCreate\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" end \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlibdockercontainers\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/lib/docker/containers\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" end \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Host\\uC758 \",(0,e.jsx)(n.code,{children:\"/var/log\"}),\" \\uC544\\uB798\\uC5D0 \\uC788\\uB294 \",(0,e.jsx)(n.code,{children:\"auth.log\"}),\"\\uC640 \",(0,e.jsx)(n.code,{children:\"syslog\"}),\"\\uB97C \\uC811\\uADFC\\uD558\\uAE30 \\uC704\\uD574\\uC11C\\uB294 hostPath\\uB97C \\uCD94\\uAC00\\uD574\\uC918\\uC57C \\uD55C\\uB2E4. \\uB530\\uB77C\\uC11C Helm values\\uC5D0 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uCD94\\uAC00\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"extraVolumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"extraVolumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /var/log/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` varlog\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB7F0\\uB370 Ubuntu server\\uC5D0\\uC11C \\uC2E4\\uD589\\uB418\\uB294 rsyslog\\uAC00 \\uB0A8\\uAE30\\uB294 \\uD30C\\uC77C \\uAD8C\\uD55C\\uC774 640\\uC73C\\uB85C \\uB418\\uC5B4\\uC788\\uB2E4. \\uB530\\uB77C\\uC11C hostPath\\uB97C \\uC0AC\\uC6A9\\uD574\\uB3C4 \\uD30C\\uC77C\\uB4E4\\uC744 \\uC77D\\uC744 \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC5B4\\uC11C \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD55C\\uB2E4. \\uB530\\uB77C\\uC11C opentelemetry collector agent\\uC5D0 \\uC5D0\\uB7EC \\uB85C\\uADF8\\uAC00 \\uB0A8\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4. rsyslog\\uAC00 \\uD30C\\uC77C\\uC744 \\uC0DD\\uC131\\uD560 \\uB54C, \",(0,e.jsx)(n.code,{children:\"rsyslog.conf\"}),\"\\uC758 \",(0,e.jsx)(n.code,{children:\"$FileCreateMode\"}),\"\\uC744 \\uC218\\uC815\\uD558\\uC5EC 644\\uB85C \\uC870\\uC815\\uD558\\uC600\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"/etc/rsyslog.conf\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Set the default permissions for all log files.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$FileOwner\"}),` syslog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$FileGroup\"}),` adm\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$FileCreateMode\"}),\" 0644 \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# 640\\uC5D0\\uC11C \\uBCC0\\uACBD\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$DirCreateMode\"}),` 0755\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$Umask\"}),` 0022\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PrivDropToUser\"}),` syslog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PrivDropToGroup\"}),` syslog\n`]})]})}),(0,e.jsx)(n.p,{children:\"rsyslog\\uB97C \\uC7AC\\uC2DC\\uC791\\uD558\\uACE0 \\uB098\\uBA74 \\uC774\\uC81C \\uC0C8\\uB85C \\uB9CC\\uB4E4\\uC5B4\\uC9C0\\uB294 \\uD30C\\uC77C\\uC5D0 \\uB300\\uD574\\uC11C \\uBCC0\\uACBD\\uB41C \\uAD8C\\uD55C\\uC774 \\uC801\\uC6A9\\uB41C\\uB2E4. \\uC774\\uB807\\uAC8C \\uBCC0\\uACBD\\uB41C \\uAD8C\\uD55C\\uC758 \\uD30C\\uC77C\\uC744 opentelemetry collector agent\\uAC00 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC77D\\uC744 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`systemctl daemon-reload\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`systemctl restart rsyslog\n`})]})}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB9AC\\uACE0 log message\\uC758 format\\uC744 \\uBCF4\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uAE30\\uBCF8 \\uC124\\uC815\\uC774 \\uB418\\uC5B4 \\uC788\\uC5C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-log\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-log\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number date\",children:\"May  1\"}),\" \",(0,e.jsx)(n.span,{className:\"token number time\",children:\"20:33:04\"}),\" hostname sshd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2692917\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" pam_tally2\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"(\"}),\"sshd\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\"setcred\",(0,e.jsx)(n.span,{className:\"token operator\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" unknown option\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` reset\n`]})})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"May 1 20:33:04\"}),\" \\uAC12\\uC774 \\uC5F0\\uB3C4 \\uC22B\\uC790\\uAC00 \\uC5C6\\uACE0, Filelog\\uC758 operator\\uB97C \\uD1B5\\uD574\\uC11C parse\\uD558\\uB294\\uB370\\uB3C4 \\uC5B4\\uB824\\uC6C0\\uC774 \\uC788\\uC5C8\\uB2E4. \",(0,e.jsx)(n.code,{children:\"syslog.conf\"}),\"\\uB97C \\uD655\\uC778\\uD558\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.a,{href:\"https://www.rsyslog.com/doc/configuration/templates.html\",children:\"rsyslog\\uC5D0\\uC11C \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC81C\\uACF5\\uD558\\uB294 template\"}),\"\\uC911\\uC5D0 \\uD558\\uB098\\uAC00 \\uC120\\uD0DD\\uB418\\uC5B4 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"/etc/rsyslog.conf\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$ActionFileDefaultTemplate\"}),` RSYSLOG_TraditionalFileFormat\n`]})})}),(0,e.jsxs)(n.p,{children:[\"\\uB0A0\\uC9DC\\uD615\\uC2DD\\uC744 \",(0,e.jsx)(n.code,{children:\"rfc3339\"}),\"\\uC73C\\uB85C \\uD558\\uB294 template\\uC744 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC124\\uC815\\uD558\\uACE0, rsyslog\\uB97C \\uB2E4\\uC2DC \\uC7AC\\uC2DC\\uC791\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$ActionFileDefaultTemplate\"}),` RSYSLOG_FileFormat\n`]})})}),(0,e.jsx)(n.p,{children:\"\\uBCC0\\uACBD\\uC774 \\uC801\\uC6A9\\uB418\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC774 log message\\uAC00 \\uB0A8\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-log\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-log\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number date\",children:\"2024-05-01T\"}),(0,e.jsx)(n.span,{className:\"token number time\",children:\"23:04:35.590363+09:00\"}),\" hostname systemd\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" pam_tally2\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"(\"}),\"systemd\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),\"user\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\"setcred\",(0,e.jsx)(n.span,{className:\"token operator\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" unknown option\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` reset\n`]})})}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB798\\uC11C \\uC774\\uC81C \",(0,e.jsx)(n.code,{children:\"regex_parser\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C log message\\uB97C \\uC815\\uADDC\\uD45C\\uD604\\uC2DD\\uC5D0 \\uB9DE\\uCDB0\\uC11C parse\\uD55C\\uB2E4. time group\\uAC12\\uC744 \\uD1B5\\uD574\\uC11C timestamp\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/stanza/docs/types/timestamp.md\",children:\"gotime\\uACFC strptime type\\uC774 \\uC788\\uACE0 layout\\uC740 \\uC774 \\uBB38\\uC11C\\uB97C \\uD655\\uC778\\uD574\\uC11C \\uC791\\uC131\\uD55C\\uB2E4.\"})]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"id\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" parser\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"host\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`log\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"regex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ^(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003ctime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\"^\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ Z\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\"+) (\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003chostname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\"}),\" (((\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cservice\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cpid\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\".\",(0,e.jsx)(n.span,{className:\"token important\",children:\"*)\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),\"(\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003ccommand\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"^ \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token important\",children:\"*)):)\"}),\" (\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"?\"}),\"P\u003cmessage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\u003e\"}),\".\",(0,e.jsx)(n.span,{className:\"token important\",children:\"*)$\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timestamp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"layout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" 2006\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"01\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"02T15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"04\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"05.999999999Z07\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"layout_type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` gotime\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parse_from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` attributes.time\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` regex_parser\n`]})]})}),(0,e.jsx)(n.p,{children:\"debug exporter\\uB97C \\uC124\\uC815\\uD558\\uC5EC standout\\uC73C\\uB85C \\uCD9C\\uB825\\uB418\\uB294 \\uAC12\\uC744 \\uD655\\uC778\\uD574\\uBCF8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exporters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"debug\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbosity\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` detailed\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC544\\uB798\\uC640 \\uAC19\\uC774 opentelmetry collector agent\\uC5D0 \\uB85C\\uADF8\\uAC00 \\uB0A8\\uB294\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"kubectl logs -f -l \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"component\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`agent-collector\n`]})})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"LogRecord \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#6\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"ObservedTimestamp: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-01 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),`:12:16.671281334 +0000 UTC\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Timestamp: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-01 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),`:12:14.30976 +0000 UTC\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`SeverityText:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"SeverityNumber: Unspecified\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Body: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-02T00:12:14.309760+09:00 \",(0,e.jsx)(n.span,{className:\"token function\",children:\"hostname\"}),\" sshd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2727770\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\": pam_tally2\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sshd:setcred\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\": unknown option: reset\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Attributes:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" command: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" message: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"pam_tally2\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sshd:setcred\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\": unknown option: reset\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" container: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"host\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" log.file.path: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"/var/log/auth.log\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" time: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-02T00:12:14.309760+09:00\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" hostname: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"hostname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" service: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sshd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" pid: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2727770\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Trace ID:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Span ID:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Flags: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"kind\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"exporter\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"data_type\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"logs\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"name\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"debug\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"syslog-receiver\",children:[(0,e.jsx)(n.a,{href:\"#syslog-receiver\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Syslog Receiver\"]}),(0,e.jsxs)(n.p,{children:[\"\\uADF8\\uB7F0\\uB370 Receiver \\uC885\\uB958\\uB97C \\uBCF4\\uB2E4\\uAC00 \",(0,e.jsx)(n.a,{href:\"https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/syslogreceiver/README.md\",children:\"Syslog Receiver\"}),\"\\uB3C4 \\uC788\\uB294 \\uAC83\\uC744 \\uC54C\\uAC8C \\uB418\\uC5C8\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(n.a,{href:\"https://www.rsyslog.com/doc/configuration/modules/omfwd.html\",children:\"rsyslog \\uBAA8\\uB4C8\\uC778 omfwd\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C rsyslog\\uAC00 opentelemetry syslog receiver\\uC5D0 \\uB85C\\uADF8\\uB97C \\uBCF4\\uB0BC \\uC218 \\uC788\\uB294 \\uAC83\\uC744 \\uC54C\\uAC8C \\uB418\\uC5C8\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://signoz.io/docs/userguide/collecting_syslogs/\",children:\"SigNoz\\uC758 \\uBB38\\uC11C\\uC5D0\\uC11C rsyslog \\uC124\\uC815\\uD558\\uB294 \\uBC29\\uBC95\\uC744 \\uC798 \\uC124\\uBA85\"}),\"\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uBC88\\uC5D0\\uB294 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"values.yaml\"}),\"\\uC744 \\uC791\\uC131\\uD558\\uACE0 Helm Chart\\uB97C \\uBC30\\uD3EC\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"values.yaml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"config\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"prometheus\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"zipkin\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"syslog\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tcp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"listen_address\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"localhost:4319\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"protocol\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rfc3164\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"location\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` UTC\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operators\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` move\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` attributes.message\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"to\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` body\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` add\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"field\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` attributes.source\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` syslog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"service\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"telemetry\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"level\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` info\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"pipelines\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"traces\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` otlp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metrics\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` otlp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"receivers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` syslog\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exporters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\t\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` debug\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"exporters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"debug\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"verbosity\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` detailed\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-compact\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-thrift\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jaeger-grpc\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"zipkin\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"syslog\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4319\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4319\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"protocol\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` TCP\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` daemonset\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" otel/opentelemetry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"collector\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`contrib\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"hostNetwork\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"presets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"logsCollection\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"false\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"includeCollectorLogs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token important boolean\",children:\"true\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"syslog receiver\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD558\\uAE30 \\uC704\\uD574\\uC11C \",(0,e.jsx)(n.code,{children:\"image.repository\"}),\"\\uB97C \",(0,e.jsx)(n.code,{children:\"otel/opentelemetry-collector-contrib\"}),\"\\uB85C \\uC124\\uC815\\uD558\\uC600\\uB2E4. \\uADF8\\uB9AC\\uACE0 \",(0,e.jsx)(n.code,{children:\"listen_address\"}),\"\\uB97C \",(0,e.jsx)(n.code,{children:\"0.0.0.0:4319\"}),\"\\uB85C \\uC124\\uC815\\uD588\\uB294\\uB370, rsyslog\\uAC00 host\\uC5D0\\uC11C \\uD574\\uB2F9 \",(0,e.jsx)(n.code,{children:\"4319\"}),\" \\uD3EC\\uD2B8\\uB85C \\uC811\\uADFC\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \",(0,e.jsx)(n.code,{children:\"hostPort\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC600\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"hostPort\"}),\"\\uB97C \\uC124\\uC815\\uD558\\uC600\\uAE30 \\uB54C\\uBB38\\uC5D0, opentelemetry collector\\uC758 \\uC124\\uC815\\uC744 \\uBCF4\\uBA74 \",(0,e.jsx)(n.code,{children:\"4319/TCP\"}),\"\\uAC00 \\uC124\\uC815\\uB41C \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ kubectl describe pod opentelemetry-collector-agent-b7g2j\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"..\"}),`.\\uC0DD\\uB7B5\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Ports:         \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4317\"}),\"/TCP, \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4318\"}),\"/TCP, \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4319\"}),`/TCP\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Host Ports:    \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4317\"}),\"/TCP, \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4318\"}),\"/TCP, \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4319\"}),`/TCP\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB9AC\\uACE0 Cilium\\uC744 CNI\\uB85C \\uC0AC\\uC6A9\\uD560 \\uB54C, \\uC544\\uB798\\uC640 \\uAC19\\uC774 service\\uC758 \\uBAA9\\uB85D\\uC744 \\uBCF4\\uBA74 HostPort\\uAC00 \\uC124\\uC815\\uB41C \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ kubectl \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exec\"}),\" -it cilium-gxdr7 -n kube-system -- cilium \",(0,e.jsx)(n.span,{className:\"token function\",children:\"service\"}),` list\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"..\"}),`.\\uC0DD\\uB7B5\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"196\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.50\"}),\".3.14:4317         HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4317 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"197\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.0\"}),\".0.0:4317           HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4317 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"198\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.50\"}),\".3.14:4318         HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4318 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"199\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.0\"}),\".0.0:4318           HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4318 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"200\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10.50\"}),\".3.14:4319        HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4319 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"201\"}),\"   \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0.0\"}),\".0.0:4319          HostPort       \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"198.18\"}),\".4.92:4319 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"active\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \",(0,e.jsx)(n.a,{href:\"https://signoz.io/docs/userguide/collecting_syslogs/\",children:\"SigNoz\\uC758 \\uBB38\\uC11C\\uC5D0\\uC11C rsyslog \\uC124\\uC815\\uD558\\uB294 \\uBC29\\uBC95\"}),\"\\uC5D0 \\uB098\\uC628 \\uAC83\\uCC98\\uB7FC rsyslog \\uC124\\uC815\\uC744 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uCD94\\uAC00\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"/etc/rsyslog.conf\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"template\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"UTCTraditionalForwardFormat\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"string\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"string\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"\u003c%PRI%\u003e%TIMESTAMP:::date-utc% %HOSTNAME% %syslogtag:1:32%%msg:::sp-if-no-1st-sp%%msg%\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"*.* action\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"type\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"omfwd\"'}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"127.0.0.1\"'}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"4319\"'}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"protocol\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"tcp\"'}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"template\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"UTCTraditionalForwardFormat\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C rsyslog\\uB97C \\uC7AC\\uC2DC\\uC791\\uD558\\uACE0 \\uB098\\uBA74 Syslog Receiver\\uB85C \\uB85C\\uADF8\\uB97C \\uBC1B\\uC740 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-01T15:01:34.346Z\tinfo\tResourceLog \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#0\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Resource SchemaURL:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"ScopeLogs \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#0\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`ScopeLogs SchemaURL:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`InstrumentationScope\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"LogRecord \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#0\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"ObservedTimestamp: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-01 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),`:01:34.219612783 +0000 UTC\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Timestamp: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),\"-05-01 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),`:01:34 +0000 UTC\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`SeverityText: err\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"SeverityNumber: Error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"17\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Body: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"pam_tally2\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sshd:setcred\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\": unknown option: reset\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Attributes:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" priority: Int\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"83\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" facility: Int\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" hostname: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"hostname\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" appname: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sshd\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"     -\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" proc_id: Str\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2725522\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Trace ID:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Span ID:\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Flags: \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"kind\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"exporter\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"data_type\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"logs\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"name\"'}),(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"debug\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(n.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsx)(n.p,{children:\"OpenTelmetry\\uC5D0\\uC11C Syslog Receiver\\uAC00 Alpha \\uC0C1\\uD0DC\\uB85C \\uC81C\\uACF5\\uB418\\uACE0 \\uC788\\uB2E4. rsyslog\\uC5D0\\uC11C omfwd \\uBAA8\\uB4C8\\uC744 \\uD1B5\\uD574\\uC11C syslog message\\uB97C Syslog Receiver\\uB85C \\uBCF4\\uB0BC\\uC218\\uAC00 \\uC788\\uB2E4. \\uADF8\\uB807\\uAC8C \\uD558\\uAE30 \\uC704\\uD574\\uC11C rsyslog.conf \\uC124\\uC815\\uAC12\\uC744 \\uBCC0\\uACBD\\uD558\\uC5EC rsyslog\\uB97C \\uC7AC\\uC2DC\\uC791\\uD574\\uC57C \\uD55C\\uB2E4. \\uCC98\\uC74C\\uC5D0\\uB294 Syslog Receiver\\uB85C \\uC27D\\uAC8C \\uBC1B\\uC744 \\uC218 \\uC788\\uB294 \\uAC83\\uC744 \\uC0DD\\uAC01\\uD558\\uC9C0 \\uBABB\\uD558\\uACE0, Filelog\\uB97C \\uD1B5\\uD574\\uC11C \\uBC1B\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC600\\uB2E4. \\uC774 \\uACFC\\uC815\\uC5D0\\uC11C rsyslog\\uAC00 file\\uC744 \\uC0DD\\uC131\\uD560 \\uB54C 644\\uB85C \\uAD8C\\uD55C\\uC124\\uC815\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uACE0, opentelemetry collector agent\\uAC00 hostPath\\uB97C \\uD1B5\\uD574\\uC11C /var/log\\uC5D0 \\uC811\\uADFC\\uD558\\uB3C4\\uB85D \\uD558\\uC600\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uC774 \\uACFC\\uC815\\uC5D0\\uC11C Regex rule\\uC744 \\uC62C\\uBC14\\uB974\\uAC8C \\uC791\\uC131\\uD558\\uB294\\uB370 \\uC5B4\\uB824\\uC6C0\\uC774 \\uC788\\uC5C8\\uACE0, \\uC798\\uBABB\\uB41C \\uC124\\uC815\\uB4E4\\uB85C \\uC778\\uD574\\uC11C \\uCD5C\\uC885\\uC801\\uC73C\\uB85C \\uC6D0\\uD558\\uB294 \\uB3D9\\uC791\\uC744 \\uD655\\uC778\\uD558\\uAE30\\uAE4C\\uC9C0 \\uC2DC\\uAC04\\uC774 \\uAF64 \\uAC78\\uB838\\uB2E4.\\u{1F97A}\"})]})}}var v=b;return f;})();\n;return Component;","toc":[{"value":"Filelog Receiver","url":"#filelog-receiver","depth":2},{"value":"Syslog Receiver","url":"#syslog-receiver","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"11 min read","minutes":10.61,"time":636600,"words":2122},"slug":"20240501-opentelemetry-syslog","fileName":"20240501-opentelemetry-syslog.md","title":"OpenTelmetry로 auth.log와 syslog 수집하기","date":"2024-05-01T00:00:00.000Z","tags":["kubernetes","opentelemetry","devsecops"],"images":["/static/images/social-banner.png"],"summary":"Ubuntu 20.04 서버의 auth.log, syslog 로그 값들을 OpenTelemetry를 통해서 수집하고 싶었다. 처음에는 Filelog Receiver를 통해서 수집하려고 하였고, rsyslog의 설정값을 변경하여 Filelog로 수집하도록 구성했다. 그런데 이후에 Syslog Receiver가 존재하는 것을 확인하게 되었고, 훨씬 간단하게 syslog를 수집할 수 있었다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Spark에서 Hive database가 조회가 안 되는 문제","date":"2024-04-27T00:00:00.000Z","tags":["spark"],"images":["/static/images/social-banner.png"],"summary":"Spark에서 SparkSession에 hive 설정을 해서 Hive의 데이터를 읽기/쓰기가 가능하다. 하지만 Hive에서 생성한 데이터베이스가 Spark에서는 조회가 되지 않았다. Spark에서 Hive Metastore를 Catalog로 사용할 때, hive-site.xml에 설정된 값을 이해하면 왜 조회가 되지 않는지 이해할 수 있다. hive-site.xml의 metadata.catalog.default 값이 어떻게 영향을 미치지는 살펴봤다.","slug":"20240427-metastore-catalog-default"},"next":{"title":"Falco를 활용하여 Terminal Shell 명령어 로그 수집하기","date":"2024-05-05T00:00:00.000Z","tags":["kubernetes","falco","devsecops"],"images":["/static/images/social-banner.png"],"summary":"Kubernetes Worker Node와 Pod Container에 Terminal shell로 접근하여 명령어를 입력하면 로그를 남기고, 경우에 따라서 알림을 보내고 싶었다. CNCF 졸업한 Project인 Falco를 활용하면 이를 구현할 수 있지 않을까 하여 테스트를 해보게 되었다. Falco는 kernel module이나 eBPF probe등을 통해서 kernel event를 저장하고, 설정된 rule에 따라서 해당 event를 filter하여 원하는 output 형태로 저장한다. Falco는 모든 로그를 저장하기보다는 Rule에 따라 선택적으로 보안 위협이 있는 이벤트를 수집하고 실시간으로 알림하는 것이 목적이다. 따라서 Falco를 통해서 원하던 기능을 구현하는 것은 합리적인 방법이 아닌 것으로 판단 된다.","slug":"20240505-falco"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20240501-opentelemetry-syslog"]},"buildId":"ANKos555WtMk9piaFQ3D4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>