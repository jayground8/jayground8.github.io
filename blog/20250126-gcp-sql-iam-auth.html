<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>GCP IAM으로 MySQL 접속하기</title><meta name="robots" content="follow, index"/><meta name="description" content="GCP의 관리형 데이터베이스 서비스인 SQL의 User를 관리할 때, 제약사항이 없다면 IAM 인증을 활용하는 것을 고려하자. Google Workspace를 사용하고 있다면, 이미 생성된 구글 이메일 계정과 Group을 통해서 데이터베이스 접속 권한을 제어할 수 있다. 데이터베이스 User를 비밀번호 인증으로 생성하여 관리하는 대신에, 구글 계정으로 인증하여 데이터베이스를 접속할 수 있도록 관리하자. 이번 글에서는 IAM 인증을 위한 설정 방법을 설명한다."/><meta property="og:url" content="https://jayground8.github.io/blog/20250126-gcp-sql-iam-auth"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="GCP의 관리형 데이터베이스 서비스인 SQL의 User를 관리할 때, 제약사항이 없다면 IAM 인증을 활용하는 것을 고려하자. Google Workspace를 사용하고 있다면, 이미 생성된 구글 이메일 계정과 Group을 통해서 데이터베이스 접속 권한을 제어할 수 있다. 데이터베이스 User를 비밀번호 인증으로 생성하여 관리하는 대신에, 구글 계정으로 인증하여 데이터베이스를 접속할 수 있도록 관리하자. 이번 글에서는 IAM 인증을 위한 설정 방법을 설명한다."/><meta property="og:title" content="GCP IAM으로 MySQL 접속하기"/><meta property="og:image" content="https://jayground8.github.io/static/images/social-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="GCP IAM으로 MySQL 접속하기"/><meta name="twitter:description" content="GCP의 관리형 데이터베이스 서비스인 SQL의 User를 관리할 때, 제약사항이 없다면 IAM 인증을 활용하는 것을 고려하자. Google Workspace를 사용하고 있다면, 이미 생성된 구글 이메일 계정과 Group을 통해서 데이터베이스 접속 권한을 제어할 수 있다. 데이터베이스 User를 비밀번호 인증으로 생성하여 관리하는 대신에, 구글 계정으로 인증하여 데이터베이스를 접속할 수 있도록 관리하자. 이번 글에서는 IAM 인증을 위한 설정 방법을 설명한다."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/social-banner.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20250126-gcp-sql-iam-auth"/><meta property="article:published_time" content="2025-01-26T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20250126-gcp-sql-iam-auth"
  },
  "headline": "GCP IAM으로 MySQL 접속하기",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/social-banner.png"
    }
  ],
  "datePublished": "2025-01-26T00:00:00.000Z",
  "dateModified": "2025-01-26T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "GCP의 관리형 데이터베이스 서비스인 SQL의 User를 관리할 때, 제약사항이 없다면 IAM 인증을 활용하는 것을 고려하자. Google Workspace를 사용하고 있다면, 이미 생성된 구글 이메일 계정과 Group을 통해서 데이터베이스 접속 권한을 제어할 수 있다. 데이터베이스 User를 비밀번호 인증으로 생성하여 관리하는 대신에, 구글 계정으로 인증하여 데이터베이스를 접속할 수 있도록 관리하자. 이번 글에서는 IAM 인증을 위한 설정 방법을 설명한다."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-bbff76cdfa096e4f.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/76mYNbaxGFgW6CcWkoGVX/_buildManifest.js" defer=""></script><script src="/_next/static/76mYNbaxGFgW6CcWkoGVX/_ssgManifest.js" defer=""></script><script src="/_next/static/76mYNbaxGFgW6CcWkoGVX/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">블로그</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">블로그</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2025-01-26T00:00:00.000Z">2025년 1월 26일 일요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">GCP IAM으로 MySQL 접속하기</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><p>대부분의 Public Cloud Provider들은 관리형 데이터베이스 서비스를 제공한다. GCP에서는 관리형 데이터베이스 서비스로 SQL가 존재한다. 이렇게 클라우드 환경에서 관리형 데이터베이스 서비스를 사용할 때, 데이터베이스에 접속할 계정은 어떻게 관리하는 것이 좋을까? 데이터베이스 user를 생성해서 user이름과 비밀번호를 전달하여 접속하도록 하면 될까? 아직도 이렇게 하는 것을 우선 고려하는 경우를 보게 된다. 따라서 오늘은 GCP에서 SQL를 사용할 때 어떻게 계정 관리를 하는게 좋을지 알아본다.</p><h2 id="예제-환경"><a href="#예제-환경" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>예제 환경</h2><ul><li>GCP</li><li>Google Workspace 사용</li><li>SQL(MySQL) 사용</li><li><a target="_blank" rel="noopener noreferrer" href="https://cloud.google.com/sdk/docs/install?hl=ko">GCP cli 설치</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://cloud.google.com/sql/docs/mysql/connect-auth-proxy#install">Google SQL Auth Proxy 설치</a></li></ul><h2 id="비밀번호-인증의-단점"><a href="#비밀번호-인증의-단점" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>비밀번호 인증의 단점</h2><p>대부분의 경우에는 클라우드에서 관리형 데이터베이스 서비스를 사용할 때, 외부 인터넷으로 접속하지 못하도록 VPC안에서만 접속할 수 있도록 설정한다. 외부 인터넷으로 접속할 수 있도록 Bastion instance를 통해 ssh tunneling 접속하거나, VPN을 설정하여 데이터베이스 접속하도록 설정한다. 이렇게 외부 인터넷으로 데이터베이스에 접속하는 것을 통제한다. 이번 글에서는 세부적으로 어떻게 설정했는지 무시하고, 우리는 데이터베이스에 연결할 수 있는 상태로 가정한다.</p><p>이제 데이터베이스에 접속하기 위해서 생성된 user와 비밀번호로 인증을 수행한다. 데이터베이스에 접속해야 되는 사람들이 생길 때마다 비밀번호 인증방식으로 user를 생성해서 전달한다. 이렇게 데이터베이스 user를 관리할 때, 아래와 같은 단점들이 존재한다.</p><ul><li>비밀번호는 고정된 값이다. 비밀번호를 주기적으로 값을 변경해주지 않으면 한번 설정된 고정값이 계속 유지된다.</li><li>접속해야 되는 새로운 사람이 생기거나 권한을 회수해야 되는 사람이 생기면 user를 생성하거나 삭제해야 한다.</li></ul><h2 id="iam-인증으로-개선"><a href="#iam-인증으로-개선" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>IAM 인증으로 개선</h2><p>Google Workspace를 사용하고 있다면, 이미 사용하고 있는 구글 이메일 계정과 Group등을 활용하여 위의 단점을 개선할 수 있다.</p><ol><li>데이터베이스 User를 직접 생성&amp;삭제하지 않고, 기존에 사용중인 구글 이메일 계정으로 데이터베이스에 접근을 허용&amp;제한 할 수 있다.</li><li>구글 Group을 통해서 데이터베이스 권한을 설정하여 관리할 수 있다.</li><li>만료기간이 있는 임시값으로 인증을 수행한다. 보안을 위해서 데이터베이스 User 비밀번호를 주기적으로 교체하는 것을 따로 구현하지 않아도 된다.</li></ol><h2 id="iam-인증-설정-방법"><a href="#iam-인증-설정-방법" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>IAM 인증 설정 방법</h2><ol><li><a target="_blank" rel="noopener noreferrer" href="https://admin.google.com">Google Admin Console</a>에서 Group 생성. (<code>tutorial</code>로 생성했다고 가정한다.)</li></ol><img src="/static/images/sql-admin-console.png" alt="google admin console"/><ol start="2"><li><p>위에서 생성한 Group에 MySQL 접속을 허용한 구글 이메일 계정을 Member로 추가. (<code>jayground8@yourdomain.com</code>을 추가했다고 가정한다.)</p></li><li><p>필요한 IAM role을 group에 할당</p></li></ol><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">gcloud projects add-iam-policy-binding my-prj <span class="token punctuation">\</span>
</span><span class="code-line">--member<span class="token operator">=</span>group:tutorial@yourdomain.com <span class="token punctuation">\</span>
</span><span class="code-line">--role<span class="token operator">=</span>roles/cloudsql.instanceUser
</span></code></pre></div><ol start="4"><li>Cloud IAM 인증방식으로 새로운 데이터베이스 User 추가. (IAM principal을 아래와 같이 group으로 설정한다.)</li></ol><img src="/static/images/sql-add-user.png" alt="add new user with Cloud IAM"/><ol start="5"><li>root user로 데이터베이스 접속하여 해당 user에 권한을 부여.</li></ol><div class="relative"><pre><code class="code-highlight language-sql"><span class="code-line"><span class="token keyword">grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">&quot;tutorial&quot;</span><span class="token variable">@&quot;yourdomain.com&quot;</span><span class="token punctuation">;</span>
</span></code></pre></div><ol start="6"><li>구글 workspace 이메일 계정으로 로그인</li></ol><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">gcloud auth application-default login
</span></code></pre></div><ol start="7"><li>Cloud SQL Proxy로 SQL에 접속</li></ol><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">cloud-sql-proxy --auto-iam-authn --private-ip my-prj:us-west1:tutorial-db
</span></code></pre></div><p>정상적으로 접속이 되면 아래와 같은 로그들은 터미널에서 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token number">2025</span>/01/21 <span class="token number">12</span>:32:52 Authorizing with Application Default Credentials
</span><span class="code-line"><span class="token number">2025</span>/01/21 <span class="token number">12</span>:32:53 <span class="token punctuation">[</span>my-prj:us-west1:tutorial-db<span class="token punctuation">]</span> Listening on <span class="token number">127.0</span>.0.1:3306
</span><span class="code-line"><span class="token number">2025</span>/01/21 <span class="token number">12</span>:32:53 The proxy has started successfully and is ready <span class="token keyword">for</span> new connections<span class="token operator">!</span>
</span></code></pre></div><ol start="8"><li>데이터베이스를 접속 가능하도록 설정하여(VPN) client로 접속. (<a target="_blank" rel="noopener noreferrer" href="mailto:jayground8@yourdomain.com">jayground8@yourdomain.com</a>이라면 앞의 jayground8으로 접속한다.)</li></ol><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">mysql -h <span class="token number">127.0</span>.0.1 -u jayground8
</span></code></pre></div><h2 id="결론"><a href="#결론" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>결론</h2><p>클라우드 환경에서는 최대한 IAM 인증을 활용하면 보안적으로 유리할 뿐만 아니라, 관리 측면에서도 장점을 가져온다. 따라서 클라우드 환경에서 관리형 데이터베이스를 사용할 때, 클라우드 IAM인증 방식을 제공한다면 최대한 활용하는 것이 바람직하겠다. 특히 GCP의 경우에는 Googe Workspace의 이메일 계정과 Group을 연결하여 권한을 설정할 수 있다. 따라서 이미 Google Workspace를 쓰고 있다면, 별도로 데이터베이스 user들을 생성해서 관리하지 말고 이미 관리되는 Google 이메일 계정과 Group을 통해서 데이터베이스 접근 관리를 하자.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/gcp">gcp</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/devsecops">devsecops</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20250125-google-cloud-exporter">Google Cloud Exporter가 Log의 Resource Attribute를 Cloud Logging Label로 어떻게 변환할까?</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20250130-hsts">Strict Transport Security Header</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2025</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var t=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var r=a=\u003ec(a,\"__esModule\",{value:!0});var u=(a,l)=\u003e()=\u003e(l||a((l={exports:{}}).exports,l),l.exports),g=(a,l)=\u003e{r(a);for(var s in l)c(a,s,{get:l[s],enumerable:!0})},N=(a,l,s)=\u003e{if(l\u0026\u0026typeof l==\"object\"||typeof l==\"function\")for(let n of t(l))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003el[n],enumerable:!(s=h(l,n))||s.enumerable});return a},k=a=\u003eN(r(c(a!=null?d(p(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=u((M,i)=\u003e{i.exports=_jsx_runtime});var x={};g(x,{default:()=\u003eG,frontmatter:()=\u003eb});var e=k(o()),b={title:\"GCP IAM\\uC73C\\uB85C MySQL \\uC811\\uC18D\\uD558\\uAE30\",date:\"2025-01-26\",tags:[\"gcp\",\"devsecops\"],images:[\"/static/images/social-banner.png\"],summary:\"GCP\\uC758 \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC11C\\uBE44\\uC2A4\\uC778 SQL\\uC758 User\\uB97C \\uAD00\\uB9AC\\uD560 \\uB54C, \\uC81C\\uC57D\\uC0AC\\uD56D\\uC774 \\uC5C6\\uB2E4\\uBA74 IAM \\uC778\\uC99D\\uC744 \\uD65C\\uC6A9\\uD558\\uB294 \\uAC83\\uC744 \\uACE0\\uB824\\uD558\\uC790. Google Workspace\\uB97C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB2E4\\uBA74, \\uC774\\uBBF8 \\uC0DD\\uC131\\uB41C \\uAD6C\\uAE00 \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uACFC Group\\uC744 \\uD1B5\\uD574\\uC11C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC811\\uC18D \\uAD8C\\uD55C\\uC744 \\uC81C\\uC5B4\\uD560 \\uC218 \\uC788\\uB2E4. \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 User\\uB97C \\uBE44\\uBC00\\uBC88\\uD638 \\uC778\\uC99D\\uC73C\\uB85C \\uC0DD\\uC131\\uD558\\uC5EC \\uAD00\\uB9AC\\uD558\\uB294 \\uB300\\uC2E0\\uC5D0, \\uAD6C\\uAE00 \\uACC4\\uC815\\uC73C\\uB85C \\uC778\\uC99D\\uD558\\uC5EC \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uB97C \\uC811\\uC18D\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uAD00\\uB9AC\\uD558\\uC790. \\uC774\\uBC88 \\uAE00\\uC5D0\\uC11C\\uB294 IAM \\uC778\\uC99D\\uC744 \\uC704\\uD55C \\uC124\\uC815 \\uBC29\\uBC95\\uC744 \\uC124\\uBA85\\uD55C\\uB2E4.\"};function y(a={}){let{wrapper:l}=a.components||{};return l?(0,e.jsx)(l,Object.assign({},a,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",ol:\"ol\",code:\"code\",pre:\"pre\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"\\uB300\\uBD80\\uBD84\\uC758 Public Cloud Provider\\uB4E4\\uC740 \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC11C\\uBE44\\uC2A4\\uB97C \\uC81C\\uACF5\\uD55C\\uB2E4. GCP\\uC5D0\\uC11C\\uB294 \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC11C\\uBE44\\uC2A4\\uB85C SQL\\uAC00 \\uC874\\uC7AC\\uD55C\\uB2E4. \\uC774\\uB807\\uAC8C \\uD074\\uB77C\\uC6B0\\uB4DC \\uD658\\uACBD\\uC5D0\\uC11C \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC11C\\uBE44\\uC2A4\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C, \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC811\\uC18D\\uD560 \\uACC4\\uC815\\uC740 \\uC5B4\\uB5BB\\uAC8C \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uC774 \\uC88B\\uC744\\uAE4C? \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 user\\uB97C \\uC0DD\\uC131\\uD574\\uC11C user\\uC774\\uB984\\uACFC \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC804\\uB2EC\\uD558\\uC5EC \\uC811\\uC18D\\uD558\\uB3C4\\uB85D \\uD558\\uBA74 \\uB420\\uAE4C? \\uC544\\uC9C1\\uB3C4 \\uC774\\uB807\\uAC8C \\uD558\\uB294 \\uAC83\\uC744 \\uC6B0\\uC120 \\uACE0\\uB824\\uD558\\uB294 \\uACBD\\uC6B0\\uB97C \\uBCF4\\uAC8C \\uB41C\\uB2E4. \\uB530\\uB77C\\uC11C \\uC624\\uB298\\uC740 GCP\\uC5D0\\uC11C SQL\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C \\uC5B4\\uB5BB\\uAC8C \\uACC4\\uC815 \\uAD00\\uB9AC\\uB97C \\uD558\\uB294\\uAC8C \\uC88B\\uC744\\uC9C0 \\uC54C\\uC544\\uBCF8\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uC608\\uC81C-\\uD658\\uACBD\",children:[(0,e.jsx)(n.a,{href:\"#\\uC608\\uC81C-\\uD658\\uACBD\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC608\\uC81C \\uD658\\uACBD\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"GCP\"}),(0,e.jsx)(n.li,{children:\"Google Workspace \\uC0AC\\uC6A9\"}),(0,e.jsx)(n.li,{children:\"SQL(MySQL) \\uC0AC\\uC6A9\"}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://cloud.google.com/sdk/docs/install?hl=ko\",children:\"GCP cli \\uC124\\uCE58\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://cloud.google.com/sql/docs/mysql/connect-auth-proxy#install\",children:\"Google SQL Auth Proxy \\uC124\\uCE58\"})})]}),(0,e.jsxs)(n.h2,{id:\"\\uBE44\\uBC00\\uBC88\\uD638-\\uC778\\uC99D\\uC758-\\uB2E8\\uC810\",children:[(0,e.jsx)(n.a,{href:\"#\\uBE44\\uBC00\\uBC88\\uD638-\\uC778\\uC99D\\uC758-\\uB2E8\\uC810\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC778\\uC99D\\uC758 \\uB2E8\\uC810\"]}),(0,e.jsx)(n.p,{children:\"\\uB300\\uBD80\\uBD84\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uD074\\uB77C\\uC6B0\\uB4DC\\uC5D0\\uC11C \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC11C\\uBE44\\uC2A4\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C, \\uC678\\uBD80 \\uC778\\uD130\\uB137\\uC73C\\uB85C \\uC811\\uC18D\\uD558\\uC9C0 \\uBABB\\uD558\\uB3C4\\uB85D VPC\\uC548\\uC5D0\\uC11C\\uB9CC \\uC811\\uC18D\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D \\uC124\\uC815\\uD55C\\uB2E4. \\uC678\\uBD80 \\uC778\\uD130\\uB137\\uC73C\\uB85C \\uC811\\uC18D\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D Bastion instance\\uB97C \\uD1B5\\uD574 ssh tunneling \\uC811\\uC18D\\uD558\\uAC70\\uB098, VPN\\uC744 \\uC124\\uC815\\uD558\\uC5EC \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC811\\uC18D\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD55C\\uB2E4. \\uC774\\uB807\\uAC8C \\uC678\\uBD80 \\uC778\\uD130\\uB137\\uC73C\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC811\\uC18D\\uD558\\uB294 \\uAC83\\uC744 \\uD1B5\\uC81C\\uD55C\\uB2E4. \\uC774\\uBC88 \\uAE00\\uC5D0\\uC11C\\uB294 \\uC138\\uBD80\\uC801\\uC73C\\uB85C \\uC5B4\\uB5BB\\uAC8C \\uC124\\uC815\\uD588\\uB294\\uC9C0 \\uBB34\\uC2DC\\uD558\\uACE0, \\uC6B0\\uB9AC\\uB294 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC5F0\\uACB0\\uD560 \\uC218 \\uC788\\uB294 \\uC0C1\\uD0DC\\uB85C \\uAC00\\uC815\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC811\\uC18D\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC0DD\\uC131\\uB41C user\\uC640 \\uBE44\\uBC00\\uBC88\\uD638\\uB85C \\uC778\\uC99D\\uC744 \\uC218\\uD589\\uD55C\\uB2E4. \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC811\\uC18D\\uD574\\uC57C \\uB418\\uB294 \\uC0AC\\uB78C\\uB4E4\\uC774 \\uC0DD\\uAE38 \\uB54C\\uB9C8\\uB2E4 \\uBE44\\uBC00\\uBC88\\uD638 \\uC778\\uC99D\\uBC29\\uC2DD\\uC73C\\uB85C user\\uB97C \\uC0DD\\uC131\\uD574\\uC11C \\uC804\\uB2EC\\uD55C\\uB2E4. \\uC774\\uB807\\uAC8C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 user\\uB97C \\uAD00\\uB9AC\\uD560 \\uB54C, \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uB2E8\\uC810\\uB4E4\\uC774 \\uC874\\uC7AC\\uD55C\\uB2E4.\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB294 \\uACE0\\uC815\\uB41C \\uAC12\\uC774\\uB2E4. \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC8FC\\uAE30\\uC801\\uC73C\\uB85C \\uAC12\\uC744 \\uBCC0\\uACBD\\uD574\\uC8FC\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uD55C\\uBC88 \\uC124\\uC815\\uB41C \\uACE0\\uC815\\uAC12\\uC774 \\uACC4\\uC18D \\uC720\\uC9C0\\uB41C\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uC811\\uC18D\\uD574\\uC57C \\uB418\\uB294 \\uC0C8\\uB85C\\uC6B4 \\uC0AC\\uB78C\\uC774 \\uC0DD\\uAE30\\uAC70\\uB098 \\uAD8C\\uD55C\\uC744 \\uD68C\\uC218\\uD574\\uC57C \\uB418\\uB294 \\uC0AC\\uB78C\\uC774 \\uC0DD\\uAE30\\uBA74 user\\uB97C \\uC0DD\\uC131\\uD558\\uAC70\\uB098 \\uC0AD\\uC81C\\uD574\\uC57C \\uD55C\\uB2E4.\"})]}),(0,e.jsxs)(n.h2,{id:\"iam-\\uC778\\uC99D\\uC73C\\uB85C-\\uAC1C\\uC120\",children:[(0,e.jsx)(n.a,{href:\"#iam-\\uC778\\uC99D\\uC73C\\uB85C-\\uAC1C\\uC120\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"IAM \\uC778\\uC99D\\uC73C\\uB85C \\uAC1C\\uC120\"]}),(0,e.jsx)(n.p,{children:\"Google Workspace\\uB97C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB2E4\\uBA74, \\uC774\\uBBF8 \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uB294 \\uAD6C\\uAE00 \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uACFC Group\\uB4F1\\uC744 \\uD65C\\uC6A9\\uD558\\uC5EC \\uC704\\uC758 \\uB2E8\\uC810\\uC744 \\uAC1C\\uC120\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:\"\\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 User\\uB97C \\uC9C1\\uC811 \\uC0DD\\uC131\u0026\\uC0AD\\uC81C\\uD558\\uC9C0 \\uC54A\\uACE0, \\uAE30\\uC874\\uC5D0 \\uC0AC\\uC6A9\\uC911\\uC778 \\uAD6C\\uAE00 \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uC73C\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uC5D0 \\uC811\\uADFC\\uC744 \\uD5C8\\uC6A9\u0026\\uC81C\\uD55C \\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uAD6C\\uAE00 Group\\uC744 \\uD1B5\\uD574\\uC11C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uAD8C\\uD55C\\uC744 \\uC124\\uC815\\uD558\\uC5EC \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"\\uB9CC\\uB8CC\\uAE30\\uAC04\\uC774 \\uC788\\uB294 \\uC784\\uC2DC\\uAC12\\uC73C\\uB85C \\uC778\\uC99D\\uC744 \\uC218\\uD589\\uD55C\\uB2E4. \\uBCF4\\uC548\\uC744 \\uC704\\uD574\\uC11C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 User \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC8FC\\uAE30\\uC801\\uC73C\\uB85C \\uAD50\\uCCB4\\uD558\\uB294 \\uAC83\\uC744 \\uB530\\uB85C \\uAD6C\\uD604\\uD558\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uB41C\\uB2E4.\"})]}),(0,e.jsxs)(n.h2,{id:\"iam-\\uC778\\uC99D-\\uC124\\uC815-\\uBC29\\uBC95\",children:[(0,e.jsx)(n.a,{href:\"#iam-\\uC778\\uC99D-\\uC124\\uC815-\\uBC29\\uBC95\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"IAM \\uC778\\uC99D \\uC124\\uC815 \\uBC29\\uBC95\"]}),(0,e.jsx)(n.ol,{children:(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://admin.google.com\",children:\"Google Admin Console\"}),\"\\uC5D0\\uC11C Group \\uC0DD\\uC131. (\",(0,e.jsx)(n.code,{children:\"tutorial\"}),\"\\uB85C \\uC0DD\\uC131\\uD588\\uB2E4\\uACE0 \\uAC00\\uC815\\uD55C\\uB2E4.)\"]})}),(0,e.jsx)(\"img\",{src:\"/static/images/sql-admin-console.png\",alt:\"google admin console\"}),(0,e.jsxs)(n.ol,{start:\"2\",children:[(0,e.jsx)(n.li,{children:(0,e.jsxs)(n.p,{children:[\"\\uC704\\uC5D0\\uC11C \\uC0DD\\uC131\\uD55C Group\\uC5D0 MySQL \\uC811\\uC18D\\uC744 \\uD5C8\\uC6A9\\uD55C \\uAD6C\\uAE00 \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uC744 Member\\uB85C \\uCD94\\uAC00. (\",(0,e.jsx)(n.code,{children:\"jayground8@yourdomain.com\"}),\"\\uC744 \\uCD94\\uAC00\\uD588\\uB2E4\\uACE0 \\uAC00\\uC815\\uD55C\\uB2E4.)\"]})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.p,{children:\"\\uD544\\uC694\\uD55C IAM role\\uC744 group\\uC5D0 \\uD560\\uB2F9\"})})]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud projects add-iam-policy-binding my-prj \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--member\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"group:tutorial@yourdomain.com \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--role\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`roles/cloudsql.instanceUser\n`]})]})}),(0,e.jsx)(n.ol,{start:\"4\",children:(0,e.jsx)(n.li,{children:\"Cloud IAM \\uC778\\uC99D\\uBC29\\uC2DD\\uC73C\\uB85C \\uC0C8\\uB85C\\uC6B4 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 User \\uCD94\\uAC00. (IAM principal\\uC744 \\uC544\\uB798\\uC640 \\uAC19\\uC774 group\\uC73C\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.)\"})}),(0,e.jsx)(\"img\",{src:\"/static/images/sql-add-user.png\",alt:\"add new user with Cloud IAM\"}),(0,e.jsx)(n.ol,{start:\"5\",children:(0,e.jsx)(n.li,{children:\"root user\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC811\\uC18D\\uD558\\uC5EC \\uD574\\uB2F9 user\\uC5D0 \\uAD8C\\uD55C\\uC744 \\uBD80\\uC5EC.\"})}),(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-sql\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"grant\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"on\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"*\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"to\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"tutorial\"'}),(0,e.jsx)(n.span,{className:\"token variable\",children:'@\"yourdomain.com\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,e.jsx)(n.ol,{start:\"6\",children:(0,e.jsx)(n.li,{children:\"\\uAD6C\\uAE00 workspace \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uC73C\\uB85C \\uB85C\\uADF8\\uC778\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`gcloud auth application-default login\n`})})}),(0,e.jsx)(n.ol,{start:\"7\",children:(0,e.jsx)(n.li,{children:\"Cloud SQL Proxy\\uB85C SQL\\uC5D0 \\uC811\\uC18D\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`cloud-sql-proxy --auto-iam-authn --private-ip my-prj:us-west1:tutorial-db\n`})})}),(0,e.jsx)(n.p,{children:\"\\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC811\\uC18D\\uC774 \\uB418\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uB85C\\uADF8\\uB4E4\\uC740 \\uD130\\uBBF8\\uB110\\uC5D0\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"2025\"}),\"/01/21 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),`:32:52 Authorizing with Application Default Credentials\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"2025\"}),\"/01/21 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),\":32:53 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"my-prj:us-west1:tutorial-db\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" Listening on \",(0,e.jsx)(n.span,{className:\"token number\",children:\"127.0\"}),`.0.1:3306\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"2025\"}),\"/01/21 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),\":32:53 The proxy has started successfully and is ready \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" new connections\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),`\n`]})]})}),(0,e.jsx)(n.ol,{start:\"8\",children:(0,e.jsxs)(n.li,{children:[\"\\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uB97C \\uC811\\uC18D \\uAC00\\uB2A5\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC5EC(VPN) client\\uB85C \\uC811\\uC18D. (\",(0,e.jsx)(n.a,{href:\"mailto:jayground8@yourdomain.com\",children:\"jayground8@yourdomain.com\"}),\"\\uC774\\uB77C\\uBA74 \\uC55E\\uC758 jayground8\\uC73C\\uB85C \\uC811\\uC18D\\uD55C\\uB2E4.)\"]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"mysql -h \",(0,e.jsx)(n.span,{className:\"token number\",children:\"127.0\"}),`.0.1 -u jayground8\n`]})})}),(0,e.jsxs)(n.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(n.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsx)(n.p,{children:\"\\uD074\\uB77C\\uC6B0\\uB4DC \\uD658\\uACBD\\uC5D0\\uC11C\\uB294 \\uCD5C\\uB300\\uD55C IAM \\uC778\\uC99D\\uC744 \\uD65C\\uC6A9\\uD558\\uBA74 \\uBCF4\\uC548\\uC801\\uC73C\\uB85C \\uC720\\uB9AC\\uD560 \\uBFD0\\uB9CC \\uC544\\uB2C8\\uB77C, \\uAD00\\uB9AC \\uCE21\\uBA74\\uC5D0\\uC11C\\uB3C4 \\uC7A5\\uC810\\uC744 \\uAC00\\uC838\\uC628\\uB2E4. \\uB530\\uB77C\\uC11C \\uD074\\uB77C\\uC6B0\\uB4DC \\uD658\\uACBD\\uC5D0\\uC11C \\uAD00\\uB9AC\\uD615 \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C, \\uD074\\uB77C\\uC6B0\\uB4DC IAM\\uC778\\uC99D \\uBC29\\uC2DD\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4\\uBA74 \\uCD5C\\uB300\\uD55C \\uD65C\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uBC14\\uB78C\\uC9C1\\uD558\\uACA0\\uB2E4. \\uD2B9\\uD788 GCP\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 Googe Workspace\\uC758 \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uACFC Group\\uC744 \\uC5F0\\uACB0\\uD558\\uC5EC \\uAD8C\\uD55C\\uC744 \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. \\uB530\\uB77C\\uC11C \\uC774\\uBBF8 Google Workspace\\uB97C \\uC4F0\\uACE0 \\uC788\\uB2E4\\uBA74, \\uBCC4\\uB3C4\\uB85C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 user\\uB4E4\\uC744 \\uC0DD\\uC131\\uD574\\uC11C \\uAD00\\uB9AC\\uD558\\uC9C0 \\uB9D0\\uACE0 \\uC774\\uBBF8 \\uAD00\\uB9AC\\uB418\\uB294 Google \\uC774\\uBA54\\uC77C \\uACC4\\uC815\\uACFC Group\\uC744 \\uD1B5\\uD574\\uC11C \\uB370\\uC774\\uD130\\uBCA0\\uC774\\uC2A4 \\uC811\\uADFC \\uAD00\\uB9AC\\uB97C \\uD558\\uC790.\"})]})}}var G=y;return x;})();\n;return Component;","toc":[{"value":"예제 환경","url":"#예제-환경","depth":2},{"value":"비밀번호 인증의 단점","url":"#비밀번호-인증의-단점","depth":2},{"value":"IAM 인증으로 개선","url":"#iam-인증으로-개선","depth":2},{"value":"IAM 인증 설정 방법","url":"#iam-인증-설정-방법","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"3 min read","minutes":2.76,"time":165600,"words":552},"slug":"20250126-gcp-sql-iam-auth","fileName":"20250126-gcp-sql-iam-auth.md","title":"GCP IAM으로 MySQL 접속하기","date":"2025-01-26T00:00:00.000Z","tags":["gcp","devsecops"],"images":["/static/images/social-banner.png"],"summary":"GCP의 관리형 데이터베이스 서비스인 SQL의 User를 관리할 때, 제약사항이 없다면 IAM 인증을 활용하는 것을 고려하자. Google Workspace를 사용하고 있다면, 이미 생성된 구글 이메일 계정과 Group을 통해서 데이터베이스 접속 권한을 제어할 수 있다. 데이터베이스 User를 비밀번호 인증으로 생성하여 관리하는 대신에, 구글 계정으로 인증하여 데이터베이스를 접속할 수 있도록 관리하자. 이번 글에서는 IAM 인증을 위한 설정 방법을 설명한다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Google Cloud Exporter가 Log의 Resource Attribute를 Cloud Logging Label로 어떻게 변환할까?","date":"2025-01-25T00:00:00.000Z","tags":["gcp","kubernetes","opentelemetry"],"images":["/static/images/social-banner.png"],"summary":"OpenTelemetry Collector를 사용할 때, 다양한 exporter를 통해서 Telemetry data를 저장할 수 있다. GCP를 사용하는 경우에는 Google Cloud Exporter를 사용해서 Telemetry data를 쉽게 저장할 수 있다. 그런데 Log의 경우에는 내가 설정한 Resource attribute가 기대한 것처럼 Google Cloud Logging의 Label에 등록되지 않는 경우를 경험할 수도 있다. 따라서 오늘은 Google Cloud Exporter를 사용할 때, Resource Attribute들이 Cloud Logging Label로 어떻게 변환되는지 자세히 설명한다.","slug":"20250125-google-cloud-exporter"},"next":{"title":"Strict Transport Security Header","date":"2025-01-30T00:00:00.000Z","tags":["devsecops"],"images":["/static/images/social-banner.png"],"summary":"HTTP 요청은 서버에서 Location Header를 통해서 HTTPS를 Redirection을 하고 있다. 그런데 방화벽에 의해서 80번 포트는 막혀있어서 http 요청은 timeout이 발생하고 있다. 그런 상황에서 브라우저에서 http로 요청을 하면 정상적으로 https redirection이 되어서 해당 도메인으로 정상적으로 접속이 가능하다. 방화벽에 막혀서 80번 포트에 대해서 정상적으로 응답을 못 받는데, 어떻게 브라우저에서는 http로 접근이 가능한 것이지? 이에 대한 질문에 대해서 HSTS의 존재와 역할을 이해하면 답을 할 수 있다. 이번 글에서는 간단하게 HSTS를 살펴본다.","slug":"20250130-hsts"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20250126-gcp-sql-iam-auth"]},"buildId":"76mYNbaxGFgW6CcWkoGVX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>