<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="manifest" href="/jayground8/static/favicons/manifest.json"/><link rel="manifest" href="/jayground8/static/favicons/site.webmanifest"/><link rel="shortcut icon" href="/jayground8/static/favicons/favicon.ico"/><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8773084925406986" crossorigin="anonymous"></script><title>네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기</title><meta name="robots" content="follow, index"/><meta name="description" content="Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."/><meta property="og:url" content="https://jayground8.github.io/blog/20231014-ncloud-certificate-manater"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Jayground8"/><meta property="og:description" content="Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."/><meta property="og:title" content="네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기"/><meta property="og:image" content="https://jayground8.github.io/static/images/social-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site"/><meta name="twitter:title" content="네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기"/><meta name="twitter:description" content="Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."/><meta name="twitter:image" content="https://jayground8.github.io/static/images/social-banner.png"/><link rel="canonical" href="https://jayground8.github.io/blog/20231014-ncloud-certificate-manater"/><meta property="article:published_time" content="2023-10-14T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jayground8.github.io/blog/20231014-ncloud-certificate-manater"
  },
  "headline": "네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://jayground8.github.io/static/images/social-banner.png"
    }
  ],
  "datePublished": "2023-10-14T00:00:00.000Z",
  "dateModified": "2023-10-14T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jay"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Jay",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jayground8.github.ioplayground.png"
    }
  },
  "description": "Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."
}</script><meta name="next-head-count" content="24"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/414f98a58444a4f1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/414f98a58444a4f1.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-690364db8bfb1f01.js" defer=""></script><script src="/_next/static/chunks/main-eea1c213342d95c3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a36da43de55f2930.js" defer=""></script><script src="/_next/static/chunks/675-70b09cbf0a5309ea.js" defer=""></script><script src="/_next/static/chunks/410-35c4fb535edd9439.js" defer=""></script><script src="/_next/static/chunks/712-376d32740a4ac813.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/swNiQNnKtiLjDJg-mf8dZ/_buildManifest.js" defer=""></script><script src="/_next/static/swNiQNnKtiLjDJg-mf8dZ/_ssgManifest.js" defer=""></script><script src="/_next/static/swNiQNnKtiLjDJg-mf8dZ/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="Jayground8" href="/"><div class="flex items-center justify-between"><div class="mr-3"><svg xmlns="http://www.w3.org/2000/svg" width="53.87" height="43.61" viewBox="0 0 512 512" class="fill-black dark:fill-white"><path d="M368.4 17c-8.8 1.3-18.3 5-25.3 9.9-3.8 2.5-22.6 16.1-41.9 30.1-37.1 26.9-38.6 28.3-36.3 33.9 1.7 4 4.9 5.1 14.6 5.1h8.5v128h-17.9c-18.2 0-22.2.6-27.3 4.2l-2.8 1.9V116.9l2.5-2.4c1.5-1.6 3.6-2.5 5.5-2.5s4 .9 5.5 2.5l2.5 2.4v42c0 29.1.3 42.8 1.1 44.5 2.6 5.7 11.5 5.5 13.9-.3.7-1.9 1-15.6.8-46.2-.3-40.1-.4-43.7-2.2-46.9-4.8-9-11.9-13.4-21.6-13.4-13.8 0-22.8 9.1-23.8 24.1l-.5 7.3h-31.5l-1.2-2.9c-1.6-3.9-6-5.8-9.9-4.1-1.6.6-3.5 2.5-4.1 4.1l-1.2 2.9h-63.6l-1.2-2.9c-2.5-6.2-11.5-6.2-14 0l-1.2 2.9H64.3l-.5-7.3c-1-15-10-24.1-23.8-24.1-9.7 0-16.8 4.4-21.6 13.4-1.8 3.3-1.9 7.5-2.2 75-.2 50 .1 72.3.8 74.1 2.1 5.1 8.6 6.3 12.5 2.4l2.5-2.4V116.9l2.5-2.4c3.2-3.3 7.8-3.3 11 0l2.5 2.4V448H32V284.9l-2.5-2.4c-3.8-3.9-10.2-2.7-12.4 2.2-1.6 3.4-1.6 171.2 0 174.6.6 1.4 2.2 3 3.6 3.6 1.6.7 15.6 1.1 43.7 1.1 38 0 41.5-.1 43.4-1.8 1.2-.9 33.4-50.5 71.7-110.2 38.3-59.7 70.5-109.3 71.7-110.3 1.8-1.5 4.3-1.7 19.4-1.7H288v16h-12.5c-13.1 0-16.6.8-18.3 4.4-2 4.5-138.5 216.2-140.4 217.9-1.9 1.6-5.6 1.7-47.9 1.7-31.9 0-46.6.3-48.3 1.1-5.7 2.6-5.5 11.5.3 13.9 1.9.7 16.7 1 50.1.8 46.4-.3 47.6-.3 51.5-2.5 2.2-1.1 5.1-3.3 6.5-4.7 1.3-1.5 10.1-14.7 19.6-29.4l17.1-26.7 18.4-.5c10.1-.3 19.1-.9 20-1.3.9-.5 2.1-1.9 2.8-3.3 1.5-3.4 1.5-35.4 0-38.8-1.1-2.3-4-4-8-4.8-1.3-.2 1.5-5.2 11.5-20.7l13.1-20.5.5 56.5c.3 31 .9 57.1 1.3 58 1.5 3 5.6 3.9 18.2 3.9H256v14c0 14.9.7 18.1 4.7 19.9 1.7.8 34.7 1.1 115.3 1.1s113.6-.3 115.3-1.1c1.4-.6 3-2.2 3.6-3.6 1.5-3.4 1.5-83.2 0-86.6-2.2-4.9-8.6-6.1-12.4-2.2l-2.5 2.4V480H272V272h208v107.1l2.5 2.4c3.8 3.9 10.2 2.7 12.4-2.2 1.5-3.4 1.5-115.2 0-118.6-1.8-3.9-5-4.7-18.4-4.7H464v-40.5c0-27.9-.3-41.2-1.1-42.9-2.6-5.5-11.2-5.5-13.8 0-.8 1.7-1.1 15-1.1 42.9V256h-24v-34.5c0-21.3-.4-36.4-1.1-39.7-3.6-17.3-19.3-32.9-36.7-36.7-16.2-3.4-31.4 1.1-43.3 12.9-7.4 7.3-11.2 13.9-13.4 23.2-1.8 7.9-2.1 50.3-.4 54.2 1.6 3.5 6.1 5.2 9.8 3.7 4.7-2 5.1-4.2 5.1-29.6 0-21.5.2-23.9 2.2-29.2C350.6 168.4 363 160 376 160s25.4 8.4 29.8 20.3c2.1 5.5 2.2 7.4 2.2 40.7v35H304V96h144v24.5c0 16 .4 25.3 1.1 26.9 2.6 5.5 11.2 5.5 13.8 0 .7-1.6 1.1-10.9 1.1-26.9V96h8.5c9.7 0 12.9-1.1 14.6-5.1 2.1-5.2.1-7.5-17.7-20.4C446.2 53.8 445 53 442.1 53c-4.1.1-7.5 3.5-7.5 7.7 0 4 2.2 6.3 14.8 15.3l4.8 3.5-39.1.3c-21.5.1-56.7.1-78.2 0l-39.1-.3 14.9-10.7c8.2-5.9 20.7-15.1 27.8-20.4 14.5-10.8 20.5-14 29.4-15.5 11.6-2.1 22.4 1.3 36.5 11.4 4.3 3.1 9 5.7 10.3 5.7 3.9 0 7.5-4.4 7.1-8.7-.3-3.3-1.1-4.4-7.8-9.6-15.3-11.8-32.3-17.1-47.6-14.7zM96 152v8H64v-16h32v8zm80 0v8h-64v-16h64v8zm48 0v8h-32v-16h32v8zM96 280v104h-4.5c-5.5 0-9 1.5-10.4 4.7-1.5 3.3-1.5 35.4 0 38.7 1.7 3.6 3.1 4 16.2 4.6l11.9.5-5.1 7.7L99 448H64V176h32v104zm80-27.8v76.3l-17.8 27.7-17.7 27.7-14.2.1H112V176h64v76.2zm48-37.3v38.9l-15.6 24.4c-8.6 13.3-15.8 24.5-16 24.7-.2.2-.4-28.2-.4-63.2V176h32v38.9zM256 369v76h-16V317.1l7.8-12c4.2-6.7 7.8-12.1 8-12.1.1 0 .2 34.2.2 76zm-129.1 34.7c-1.2 2.1-3.6 5.7-5.1 8l-2.9 4.3H96v-16h33.2l-2.3 3.7zM192 408v8h-15.1l3.7-5.8c2-3.1 4.4-6.7 5.2-8 .8-1.2 2.4-2.2 3.8-2.2 2.3 0 2.4.2 2.4 8z"></path><path d="M322.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM418.5 114.5c-1.6 1.5-2.5 3.6-2.5 5.5s.9 4 2.5 5.5c1.5 1.6 3.6 2.5 5.5 2.5s4-.9 5.5-2.5c1.6-1.5 2.5-3.6 2.5-5.5s-.9-4-2.5-5.5c-1.5-1.6-3.6-2.5-5.5-2.5s-4 .9-5.5 2.5zM290.2 290.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.5 290.5c-5 4.9-1.5 13.5 5.5 13.5 4.1 0 8-3.9 8-8s-3.9-8-8-8c-1.9 0-4 .9-5.5 2.5zM358.1 322c-8.3 2.2-16.5 5.7-19.8 8.6-3.3 2.8-3.9 7.3-1.4 10.6 3.3 4.1 6.4 4.3 13.8.8 23.3-10.9 47.3-7 64.8 10.5 11.5 11.4 16.5 23.6 16.5 39.7 0 15.9-5.1 28.1-16.4 39.4C404.2 443 392.1 448 376 448s-28.1-5-39.5-16.5c-11-11.1-16.5-24.2-16.5-39.5.1-9.5 1.2-14.5 5.6-24.3 3.8-8.3 3.8-10.4.1-14.5-4.7-5.1-10.8-1.7-15.4 8.6-8.6 19.5-8.4 42.7.6 61.7 9.1 19.3 28.3 34.5 49.5 39 11.9 2.6 28.4 1.7 39.3-2.2 23.9-8.6 41.3-27.9 46.9-51.9 1.9-8.5 1.9-24.4-.1-33.1-5.9-25.5-26.7-46.6-52.5-53.3-10.1-2.6-25.8-2.6-35.9 0zM290.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6zM450.2 450.3c-5 5.3-1.3 13.7 5.9 13.7 4.7 0 7.9-3.4 7.9-8.1 0-7.1-9-10.7-13.8-5.6z"></path></svg></div><div class="hidden h-6 text-2xl font-semibold sm:block">Jayground8</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">블로그</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">블로그</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2023-10-14T00:00:00.000Z">2023년 10월 14일 토요일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="h-10 w-10 rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://jayground8.github.io/static/images/profile.png?w=48&amp;q=75 1x, https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75 2x" src="https://jayground8.github.io/static/images/profile.png?w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="h-10 w-10 rounded-full" loading="lazy"/></noscript></span><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Jay</dd><dt class="sr-only">Twitter</dt><dd></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="lets-encrypt로-인증서-발급"><a href="#lets-encrypt로-인증서-발급" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Let&#x27;s Encrypt로 인증서 발급</h2><p>Ubuntu20.04 네이버 클라우스 서버에서 certbot을 설치하여 Let&#x27;s encrypt 인증서를 발급하였다. Ubuntu 20.04에서 설치하는 것은 <a target="_blank" rel="noopener noreferrer" href="https://www.digitalocean.com/community/tutorials/how-to-use-certbot-standalone-mode-to-retrieve-let-s-encrypt-ssl-certificates-on-ubuntu-20-04">이 글</a>을 참고하였다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> snap <span class="token function">install</span> --classic certbot
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">ln</span> -s /snap/bin/certbot /usr/bin/certbot
</span></code></pre></div><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">$ certbot --version
</span><span class="code-line">certbot <span class="token number">2.7</span>.1
</span></code></pre></div><p>이제 아래와 같이 dns로 check하도록 설정하여 인증서를 발급하였다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">certbot certonly --manual -d *.example.com -d example.com --preferred-challenges dns-01
</span></code></pre></div><p>TXT record를 안내에 따라서 생성해주면 검증이 완료되어서 인증서 발급이 완료가 된다. <code>/etc/letsencrypt/live/example.com</code>에서 아래와 같이 생성된 것을 확인할 수 있다.</p><ul><li>cert.pem</li><li>chain.pem</li><li>fullchain.pem</li><li>privkey.pem</li></ul><h2 id="인증서-암호화-알고리즘-검증-실패입니다"><a href="#인증서-암호화-알고리즘-검증-실패입니다" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>인증서 암호화 알고리즘 검증 실패입니다.</h2><p>이제 발급된 인증서 정보를 네이버 클라우드 certificate manager에 등록하는데 아래와 같은 에러가 발생하였다.</p><img src="/static/images/ncloud-certificate-manager-error.png" alt="error to register certificate on naver cloud"/><p><code>openssl</code>로 인증서 정보를 확인해보면,</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl x509 -in cert.pem -text -noout
</span></code></pre></div><p>아래와 같이 <code>id-ecPublicKey</code>로 설정되어 있는 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">Subject Public Key Info:
</span><span class="code-line">  Public Key Algorithm: id-ecPublicKey
</span><span class="code-line">      Public-Key: <span class="token punctuation">(</span><span class="token number">256</span> bit<span class="token punctuation">)</span>
</span><span class="code-line">      pub:
</span></code></pre></div><p><a target="_blank" rel="noopener noreferrer" href="https://letsencrypt.org/certificates/">Let&#x27;s encrypt의 certificate</a>를 확인해보면</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl x509 -in lets-encrypt-r3.pem -text -noout
</span></code></pre></div><p>아래처럼 RSA로 되어 있는 것을 확인할 수 있다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">Subject Public Key Info:
</span><span class="code-line">  Public Key Algorithm: rsaEncryption
</span></code></pre></div><p>따라서 이것을 동일하게 맞춰주기 위해서 <code>--key-type</code>을 RSA를 해준다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">certbot certonly --manual -d *.example.com -d example.com <span class="token punctuation">\</span>
</span><span class="code-line">  --preferred-challenges dns-01 <span class="token punctuation">\</span>
</span><span class="code-line">  --key-type rsa
</span></code></pre></div><p>이제 해당 에러는 해결이 된다.</p><h2 id="인증서가-유효하지-않습니다"><a href="#인증서가-유효하지-않습니다" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>인증서가 유효하지 않습니다.</h2><p>이제 앞의 에러는 해결했는데, <code>인증서가 유효하지 않습니다</code>라고 에러가 발생하면서 등록이 되지 않는다. 🤪</p><p>이제 chain을 보면 마지막에 CA 부분인데, 그 부분만 따로 인증서 정보를 확인해보니</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">openssl x509 -in ca_from_chain.pem -text -noout
</span></code></pre></div><p>Issuer가 <code>DST Root CA X3</code>으로 되어 있는 것을 확인할 수 있었다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line">Issuer: O <span class="token operator">=</span> Digital Signature Trust Co., CN <span class="token operator">=</span> DST Root CA X3
</span><span class="code-line">Validity
</span><span class="code-line">  Not Before: Jan <span class="token number">20</span> <span class="token number">19</span>:14:03 <span class="token number">2021</span> GMT
</span><span class="code-line">  Not After <span class="token builtin class-name">:</span> Sep <span class="token number">30</span> <span class="token number">18</span>:14:03 <span class="token number">2024</span> GMT
</span><span class="code-line">Subject: C <span class="token operator">=</span> US, O <span class="token operator">=</span> Internet Security Research Group, CN <span class="token operator">=</span> ISRG Root X1
</span><span class="code-line">
</span></code></pre></div><p><a target="_blank" rel="noopener noreferrer" href="https://letsencrypt.org/2023/07/10/cross-sign-expiration.html">let&#x27;s encrypt 글</a>을 보면 <code>DST Root CA X3</code>은 old version을 위해서 유지되고 있다. 5년 전부터 <code>ISRG Root X1</code>를 사용하고 있었고, <code>DST Root CA X3</code>에서도 사용할 수 있고 cross-signing으로 되어 있기 때문에 위에서처럼 마지막 certificate의 Issuer가 <code>DST Root CA X3</code>로 되어 있다.</p><ul><li>website certicate</li><li>Let’s Encrypt R3</li><li>ISRG Root X1</li><li>DST Root CA X3</li></ul><p>이제 네이버 클라우드 Certificate manager에서는 CA certificate를 추가해줘야하는 것으로 보인다. 따라서 <a target="_blank" rel="noopener noreferrer" href="https://letsencrypt.org/certificates/">Let&#x27;s encrypt의 certificate</a>에서 아래 그림과 같이 Root certificate를 다운로드해서 <code>fullchain.pem</code>에 추가해줬다.</p><img src="/static/images/ncloud-certificate-manager-ca-cert.png" alt="ca certificate from lets encrypt web page"/><p>하지만 생성된 <code>fullchain.pem</code>이 DST Root CA X3로 cross-signing으로 되어 있기 때문에, 네이버 클라우드 Certificate Manager에 올리면 <code>인증서가 유효하지 않습니다</code>라는 에러가 발생하였다. 그래서 chain의 마지막 Root CA 인증서를 추가하지 않고, 교체했다.</p><ul><li>website certicate</li><li>Let’s Encrypt R3</li><li>ISRG Root X1</li><li>DST Root CA X3 =&gt; Root CA 인증서로 교체</li></ul><p>이제 정상적으로 등록이 된다.</p><h2 id="기타"><a href="#기타" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>기타</h2><h3 id="ubuntu-ca-trust-store"><a href="#ubuntu-ca-trust-store" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Ubuntu CA trust store</h3><p>위에서 certbot을 셋팅해서 사용한 ubuntu20.04 서버에서 CA trust store에 저장되어 있는 걸 보면</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token function">awk</span> -v <span class="token assign-left variable">cmd</span><span class="token operator">=</span><span class="token string">&#x27;openssl x509 -noout -subject&#x27;</span> <span class="token string">&#x27;
</span></span><span class="code-line"><span class="token string">    /BEGIN/{close(cmd)};{print | cmd}&#x27;</span> <span class="token operator">&lt;</span> /etc/ssl/certs/ca-certificates.crt
</span></code></pre></div><p>아래처럼 <code>ISRG Root X1</code>가 보인다.</p><div class="relative"><pre><code class="language-bash code-highlight"><span class="code-line"><span class="token assign-left variable">subject</span><span class="token operator">=</span>C <span class="token operator">=</span> US, O <span class="token operator">=</span> Internet Security Research Group, CN <span class="token operator">=</span> ISRG Root X1
</span></code></pre></div><h3 id="--preferred-chain-option"><a href="#--preferred-chain-option" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>--preferred-chain Option</h3><p>🤔 certbot 명령어로 cross-signing이 아니라 <code>ISRG Root X1</code>를 사용하도록 설정하는 방법이 없나? <code>--preferred-chain &#x27;SRG Root X1&#x27;</code>은 Intemediate certificate가 생성되지 않는다.</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/ncloud">ncloud</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20230928-ecr-credential-provider">ECR Credential-Provider 사용해보기</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/20231021-csi-driver">aws-ebs-csi-driver 코드로 csi driver 이해하기</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:jayground8@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/jayground8"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Jay</div><div> • </div><div>© 2025</div><div> • </div><a href="/">Jayground8</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var o=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=c=\u003el(c,\"__esModule\",{value:!0});var u=(c,a)=\u003e()=\u003e(a||c((a={exports:{}}).exports,a),a.exports),g=(c,a)=\u003e{i(c);for(var s in a)l(c,s,{get:a[s],enumerable:!0})},N=(c,a,s)=\u003e{if(a\u0026\u0026typeof a==\"object\"||typeof a==\"function\")for(let n of h(a))!m.call(c,n)\u0026\u0026n!==\"default\"\u0026\u0026l(c,n,{get:()=\u003ea[n],enumerable:!(s=d(a,n))||s.enumerable});return c},b=c=\u003eN(i(l(c!=null?o(p(c)):{},\"default\",c\u0026\u0026c.__esModule\u0026\u0026\"default\"in c?{get:()=\u003ec.default,enumerable:!0}:{value:c,enumerable:!0})),c);var t=u((C,r)=\u003e{r.exports=_jsx_runtime});var R={};g(R,{default:()=\u003ey,frontmatter:()=\u003ef});var e=b(t()),f={title:\"\\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC certificate manager\\uC5D0 Lets encrypt \\uC778\\uC99D\\uC11C \\uB4F1\\uB85D\\uD558\\uAE30\",date:\"2023-10-14\",tags:[\"ncloud\"],images:[\"/static/images/social-banner.png\"],summary:\"Lets encrypt\\uB85C \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC5EC \\uC774\\uAC83\\uC744 Naver Cloud Certificate Manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB824\\uACE0 \\uD558\\uC600\\uB2E4. certbot\\uC744 \\uD1B5\\uD574\\uC11C \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uBC1B\\uACE0 \\uD574\\uB2F9 \\uD30C\\uC77C\\uB4E4\\uC744 Certificate manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB824\\uACE0 \\uD558\\uB2C8 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4. \\uC774\\uBC88 \\uBE14\\uB85C\\uADF8 \\uD3EC\\uC2A4\\uD305\\uC740 \\uB450 \\uAC00\\uC9C0\\uC758 \\uC5D0\\uB7EC\\uB97C \\uD574\\uACB0\\uD55C \\uC0BD\\uC9C8\\uAE30\\uC774\\uB2E4.\"};function k(c={}){let{wrapper:a}=c.components||{};return a?(0,e.jsx)(a,Object.assign({},c,{children:(0,e.jsx)(s,{})})):s();function s(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\",h3:\"h3\"},c.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"lets-encrypt\\uB85C-\\uC778\\uC99D\\uC11C-\\uBC1C\\uAE09\",children:[(0,e.jsx)(n.a,{href:\"#lets-encrypt\\uB85C-\\uC778\\uC99D\\uC11C-\\uBC1C\\uAE09\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Let's Encrypt\\uB85C \\uC778\\uC99D\\uC11C \\uBC1C\\uAE09\"]}),(0,e.jsxs)(n.p,{children:[\"Ubuntu20.04 \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uC2A4 \\uC11C\\uBC84\\uC5D0\\uC11C certbot\\uC744 \\uC124\\uCE58\\uD558\\uC5EC Let's encrypt \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC600\\uB2E4. Ubuntu 20.04\\uC5D0\\uC11C \\uC124\\uCE58\\uD558\\uB294 \\uAC83\\uC740 \",(0,e.jsx)(n.a,{href:\"https://www.digitalocean.com/community/tutorials/how-to-use-certbot-standalone-mode-to-retrieve-let-s-encrypt-ssl-certificates-on-ubuntu-20-04\",children:\"\\uC774 \\uAE00\"}),\"\\uC744 \\uCC38\\uACE0\\uD558\\uC600\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),\" snap \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` --classic certbot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ln\"}),` -s /snap/bin/certbot /usr/bin/certbot\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ certbot --version\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"certbot \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2.7\"}),`.1\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC544\\uB798\\uC640 \\uAC19\\uC774 dns\\uB85C check\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC5EC \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`certbot certonly --manual -d *.example.com -d example.com --preferred-challenges dns-01\n`})})}),(0,e.jsxs)(n.p,{children:[\"TXT record\\uB97C \\uC548\\uB0B4\\uC5D0 \\uB530\\uB77C\\uC11C \\uC0DD\\uC131\\uD574\\uC8FC\\uBA74 \\uAC80\\uC99D\\uC774 \\uC644\\uB8CC\\uB418\\uC5B4\\uC11C \\uC778\\uC99D\\uC11C \\uBC1C\\uAE09\\uC774 \\uC644\\uB8CC\\uAC00 \\uB41C\\uB2E4. \",(0,e.jsx)(n.code,{children:\"/etc/letsencrypt/live/example.com\"}),\"\\uC5D0\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC0DD\\uC131\\uB41C \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"cert.pem\"}),(0,e.jsx)(n.li,{children:\"chain.pem\"}),(0,e.jsx)(n.li,{children:\"fullchain.pem\"}),(0,e.jsx)(n.li,{children:\"privkey.pem\"})]}),(0,e.jsxs)(n.h2,{id:\"\\uC778\\uC99D\\uC11C-\\uC554\\uD638\\uD654-\\uC54C\\uACE0\\uB9AC\\uC998-\\uAC80\\uC99D-\\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#\\uC778\\uC99D\\uC11C-\\uC554\\uD638\\uD654-\\uC54C\\uACE0\\uB9AC\\uC998-\\uAC80\\uC99D-\\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC778\\uC99D\\uC11C \\uC554\\uD638\\uD654 \\uC54C\\uACE0\\uB9AC\\uC998 \\uAC80\\uC99D \\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uBC1C\\uAE09\\uB41C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC certificate manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB294\\uB370 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/ncloud-certificate-manager-error.png\",alt:\"error to register certificate on naver cloud\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"openssl\"}),\"\\uB85C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uBA74,\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in cert.pem -text -noout\n`})})}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"id-ecPublicKey\"}),\"\\uB85C \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Subject Public Key Info:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  Public Key Algorithm: id-ecPublicKey\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      Public-Key: \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"256\"}),\" bit\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`      pub:\n`})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/certificates/\",children:\"Let's encrypt\\uC758 certificate\"}),\"\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uBA74\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in lets-encrypt-r3.pem -text -noout\n`})})}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798\\uCC98\\uB7FC RSA\\uB85C \\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Subject Public Key Info:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  Public Key Algorithm: rsaEncryption\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\uB530\\uB77C\\uC11C \\uC774\\uAC83\\uC744 \\uB3D9\\uC77C\\uD558\\uAC8C \\uB9DE\\uCDB0\\uC8FC\\uAE30 \\uC704\\uD574\\uC11C \",(0,e.jsx)(n.code,{children:\"--key-type\"}),\"\\uC744 RSA\\uB97C \\uD574\\uC900\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"certbot certonly --manual -d *.example.com -d example.com \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  --preferred-challenges dns-01 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  --key-type rsa\n`})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uD574\\uB2F9 \\uC5D0\\uB7EC\\uB294 \\uD574\\uACB0\\uC774 \\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uC778\\uC99D\\uC11C\\uAC00-\\uC720\\uD6A8\\uD558\\uC9C0-\\uC54A\\uC2B5\\uB2C8\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#\\uC778\\uC99D\\uC11C\\uAC00-\\uC720\\uD6A8\\uD558\\uC9C0-\\uC54A\\uC2B5\\uB2C8\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \\uC55E\\uC758 \\uC5D0\\uB7EC\\uB294 \\uD574\\uACB0\\uD588\\uB294\\uB370, \",(0,e.jsx)(n.code,{children:\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4\"}),\"\\uB77C\\uACE0 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBA74\\uC11C \\uB4F1\\uB85D\\uC774 \\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4. \\u{1F92A}\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C chain\\uC744 \\uBCF4\\uBA74 \\uB9C8\\uC9C0\\uB9C9\\uC5D0 CA \\uBD80\\uBD84\\uC778\\uB370, \\uADF8 \\uBD80\\uBD84\\uB9CC \\uB530\\uB85C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uB2C8\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in ca_from_chain.pem -text -noout\n`})})}),(0,e.jsxs)(n.p,{children:[\"Issuer\\uAC00 \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uC73C\\uB85C \\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC5C8\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Issuer: O \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Digital Signature Trust Co., CN \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` DST Root CA X3\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`Validity\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  Not Before: Jan \",(0,e.jsx)(n.span,{className:\"token number\",children:\"20\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"19\"}),\":14:03 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2021\"}),` GMT\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  Not After \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\":\"}),\" Sep \",(0,e.jsx)(n.span,{className:\"token number\",children:\"30\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"18\"}),\":14:03 \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2024\"}),` GMT\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Subject: C \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" US, O \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Internet Security Research Group, CN \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` ISRG Root X1\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/2023/07/10/cross-sign-expiration.html\",children:\"let's encrypt \\uAE00\"}),\"\\uC744 \\uBCF4\\uBA74 \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uC740 old version\\uC744 \\uC704\\uD574\\uC11C \\uC720\\uC9C0\\uB418\\uACE0 \\uC788\\uB2E4. 5\\uB144 \\uC804\\uBD80\\uD130 \",(0,e.jsx)(n.code,{children:\"ISRG Root X1\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD558\\uACE0 \\uC788\\uC5C8\\uACE0, \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uC5D0\\uC11C\\uB3C4 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uACE0 cross-signing\\uC73C\\uB85C \\uB418\\uC5B4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC704\\uC5D0\\uC11C\\uCC98\\uB7FC \\uB9C8\\uC9C0\\uB9C9 certificate\\uC758 Issuer\\uAC00 \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uB85C \\uB418\\uC5B4 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"website certicate\"}),(0,e.jsx)(n.li,{children:\"Let\\u2019s Encrypt R3\"}),(0,e.jsx)(n.li,{children:\"ISRG Root X1\"}),(0,e.jsx)(n.li,{children:\"DST Root CA X3\"})]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC Certificate manager\\uC5D0\\uC11C\\uB294 CA certificate\\uB97C \\uCD94\\uAC00\\uD574\\uC918\\uC57C\\uD558\\uB294 \\uAC83\\uC73C\\uB85C \\uBCF4\\uC778\\uB2E4. \\uB530\\uB77C\\uC11C \",(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/certificates/\",children:\"Let's encrypt\\uC758 certificate\"}),\"\\uC5D0\\uC11C \\uC544\\uB798 \\uADF8\\uB9BC\\uACFC \\uAC19\\uC774 Root certificate\\uB97C \\uB2E4\\uC6B4\\uB85C\\uB4DC\\uD574\\uC11C \",(0,e.jsx)(n.code,{children:\"fullchain.pem\"}),\"\\uC5D0 \\uCD94\\uAC00\\uD574\\uC92C\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/ncloud-certificate-manager-ca-cert.png\",alt:\"ca certificate from lets encrypt web page\"}),(0,e.jsxs)(n.p,{children:[\"\\uD558\\uC9C0\\uB9CC \\uC0DD\\uC131\\uB41C \",(0,e.jsx)(n.code,{children:\"fullchain.pem\"}),\"\\uC774 DST Root CA X3\\uB85C cross-signing\\uC73C\\uB85C \\uB418\\uC5B4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC Certificate Manager\\uC5D0 \\uC62C\\uB9AC\\uBA74 \",(0,e.jsx)(n.code,{children:\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4\"}),\"\\uB77C\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4. \\uADF8\\uB798\\uC11C chain\\uC758 \\uB9C8\\uC9C0\\uB9C9 Root CA \\uC778\\uC99D\\uC11C\\uB97C \\uCD94\\uAC00\\uD558\\uC9C0 \\uC54A\\uACE0, \\uAD50\\uCCB4\\uD588\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"website certicate\"}),(0,e.jsx)(n.li,{children:\"Let\\u2019s Encrypt R3\"}),(0,e.jsx)(n.li,{children:\"ISRG Root X1\"}),(0,e.jsx)(n.li,{children:\"DST Root CA X3 =\u003e Root CA \\uC778\\uC99D\\uC11C\\uB85C \\uAD50\\uCCB4\"})]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uB4F1\\uB85D\\uC774 \\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uAE30\\uD0C0\",children:[(0,e.jsx)(n.a,{href:\"#\\uAE30\\uD0C0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uAE30\\uD0C0\"]}),(0,e.jsxs)(n.h3,{id:\"ubuntu-ca-trust-store\",children:[(0,e.jsx)(n.a,{href:\"#ubuntu-ca-trust-store\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Ubuntu CA trust store\"]}),(0,e.jsx)(n.p,{children:\"\\uC704\\uC5D0\\uC11C certbot\\uC744 \\uC14B\\uD305\\uD574\\uC11C \\uC0AC\\uC6A9\\uD55C ubuntu20.04 \\uC11C\\uBC84\\uC5D0\\uC11C CA trust store\\uC5D0 \\uC800\\uC7A5\\uB418\\uC5B4 \\uC788\\uB294 \\uAC78 \\uBCF4\\uBA74\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"awk\"}),\" -v \",(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"cmd\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'openssl x509 -noout -subject'\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:`'\n`})]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string\",children:\"    /BEGIN/{close(cmd)};{print | cmd}'\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),` /etc/ssl/certs/ca-certificates.crt\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798\\uCC98\\uB7FC \",(0,e.jsx)(n.code,{children:\"ISRG Root X1\"}),\"\\uAC00 \\uBCF4\\uC778\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"subject\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"C \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" US, O \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Internet Security Research Group, CN \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` ISRG Root X1\n`]})})}),(0,e.jsxs)(n.h3,{id:\"--preferred-chain-option\",children:[(0,e.jsx)(n.a,{href:\"#--preferred-chain-option\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"--preferred-chain Option\"]}),(0,e.jsxs)(n.p,{children:[\"\\u{1F914} certbot \\uBA85\\uB839\\uC5B4\\uB85C cross-signing\\uC774 \\uC544\\uB2C8\\uB77C \",(0,e.jsx)(n.code,{children:\"ISRG Root X1\"}),\"\\uB97C \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uB294 \\uBC29\\uBC95\\uC774 \\uC5C6\\uB098? \",(0,e.jsx)(n.code,{children:\"--preferred-chain 'SRG Root X1'\"}),\"\\uC740 Intemediate certificate\\uAC00 \\uC0DD\\uC131\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4.\"]})]})}}var y=k;return R;})();\n;return Component;","toc":[{"value":"Let's Encrypt로 인증서 발급","url":"#lets-encrypt로-인증서-발급","depth":2},{"value":"인증서 암호화 알고리즘 검증 실패입니다.","url":"#인증서-암호화-알고리즘-검증-실패입니다","depth":2},{"value":"인증서가 유효하지 않습니다.","url":"#인증서가-유효하지-않습니다","depth":2},{"value":"기타","url":"#기타","depth":2},{"value":"Ubuntu CA trust store","url":"#ubuntu-ca-trust-store","depth":3},{"value":"--preferred-chain Option","url":"#--preferred-chain-option","depth":3}],"frontMatter":{"readingTime":{"text":"3 min read","minutes":2.845,"time":170700,"words":569},"slug":"20231014-ncloud-certificate-manater","fileName":"20231014-ncloud-certificate-manater.md","title":"네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기","date":"2023-10-14T00:00:00.000Z","tags":["ncloud"],"images":["/static/images/social-banner.png"],"summary":"Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"ECR Credential-Provider 사용해보기","date":"2023-09-28T00:00:00.000Z","tags":["kubernetes"],"summary":"Kubeadm으로 만든 Kubernetes Cluster에서 AWS ECR를 private container image repository를 사용하고자 하였다. private repository를 접근하기 위해서 Kubernetes 1.26부터 stable feature로 제공하는 kubelet crendential provider를 사용하였다.","slug":"20230928-ecr-credential-provider"},"next":{"title":"aws-ebs-csi-driver 코드로 csi driver 이해하기","date":"2023-10-21T00:00:00.000Z","tags":["kubernetes"],"images":["/static/images/social-banner.png"],"summary":"aws-ebs-csi-driver 소스코드를 보고 csi driver가 하는 역할을 이해해보았다. 크게 Controller plugin과 Node plugin으로 구성되어 있고, 다양한 sidecar container들이 존재한다. 이 sidecar container들이 Volume을 생성하고, 노드에 부착하고, Host 혹은 container directory에 mount하는 것을 진행한다. 이과정에서 CSI driver로 cloud vendor마다 다른 로직으로 그들의 volume을 제어하게 된다. 네이버 클라우드에서 storage가 처음 생성될 때 서버에 부착이 되어야만 하는 제약사항이 있어서, PVC로 PV 동적 할당을 할 때 volumeBindingMode이 Immediate이면 자동으로 Node에 부착이 된다.","slug":"20231021-csi-driver"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["20231014-ncloud-certificate-manater"]},"buildId":"swNiQNnKtiLjDJg-mf8dZ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>