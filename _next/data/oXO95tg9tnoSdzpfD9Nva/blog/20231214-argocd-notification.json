{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=n=>l(n,\"__esModule\",{value:!0});var g=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),N=(n,s)=>{i(n);for(var c in s)l(n,c,{get:s[c],enumerable:!0})},k=(n,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let a of p(s))!m.call(n,a)&&a!==\"default\"&&l(n,a,{get:()=>s[a],enumerable:!(c=d(s,a))||c.enumerable});return n},u=n=>k(i(l(n!=null?o(h(n)):{},\"default\",n&&n.__esModule&&\"default\"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var r=g((A,t)=>{t.exports=_jsx_runtime});var C={};N(C,{default:()=>y,frontmatter:()=>b});var e=u(r()),b={title:\"Argo CD Notification\\uC73C\\uB85C \\uAC04\\uB2E8\\uD558\\uAC8C Slack \\uC54C\\uB9BC \\uBCF4\\uB0B4\\uAE30\",date:\"2023-12-14\",tags:[\"Kubernetes\",\"ArgoCD\"],images:[\"/static/images/social-banner.png\"],summary:\"Argo CD Notification\\uAC00 \\uC774\\uBBF8 \\uC788\\uC5B4\\uC11C \\uC27D\\uAC8C Slack \\uC54C\\uB9BC\\uC744 \\uC5F0\\uB3D9\\uD560 \\uC218 \\uC788\\uB2E4. \\uBA54\\uB274\\uC5BC\\uC5D0\\uC11C \\uCE5C\\uC808\\uD558\\uAC8C \\uC14B\\uD305 \\uBC29\\uBC95\\uC744 \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uC9C0\\uB9CC, \\uCC98\\uC74C \\uBCF4\\uACE0 \\uC14B\\uD305\\uD560 \\uB54C \\uB193\\uCE60 \\uC218 \\uC788\\uB294 \\uBD80\\uBD84\\uC744 \\uAE30\\uB85D\\uC73C\\uB85C \\uB0A8\\uAE34\\uB2E4.\"};function f(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(c,{})})):c();function c(){let a=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",pre:\"pre\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.p,{children:[(0,e.jsx)(a.a,{href:\"https://argocd-notifications.readthedocs.io/en/stable/\",children:\"argo CD notification\"}),\"\\uC5D0\\uC11C \\uCE5C\\uC808\\uD558\\uAC8C \\uC124\\uBA85\\uC774 \\uB418\\uC5B4 \\uC788\\uC9C0\\uB9CC, \\uBA54\\uB274\\uC5BC\\uC744 \\uB530\\uB77C\\uD558\\uBA74\\uC11C \\uC2E4\\uC218 \\uD560 \\uC218 \\uC788\\uB294 \\uBD80\\uBD84\\uC744 \\uAE30\\uB85D\\uC73C\\uB85C \\uB0A8\\uAE34\\uB2E4.\"]}),(0,e.jsxs)(a.h2,{id:\"slack-permission\",children:[(0,e.jsx)(a.a,{href:\"#slack-permission\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Slack Permission\"]}),(0,e.jsxs)(a.p,{children:[\"Bot Token Scopes\\uC5D0\\uC11C Bot User\\uB85C \\uBCF4\\uB0B4\\uAE30 \\uC704\\uD574\\uC11C \",(0,e.jsx)(a.code,{children:\"chat:write.publi\"}),\" permission\\uB3C4 \\uAC19\\uC774 \\uBD80\\uC5EC \\uD55C\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/argocd-notification-slack-permission.png\",alt:\"argocd notification slack permission\"}),(0,e.jsx)(a.p,{children:\"\\uADF8\\uB9AC\\uACE0 \\uC544\\uB798\\uCC98\\uB7FC Bot User Oauth Token\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC, App\\uC774 \\uCC44\\uB110\\uC5D0 message\\uB97C \\uBCF4\\uB0BC \\uC218 \\uC788\\uB3C4\\uB85D \\uD55C\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/argocd-notification-slack-token.png\",alt:\"argocd notification slack token\"}),(0,e.jsxs)(a.h2,{id:\"kubernetes-\\uC124\\uCE58\",children:[(0,e.jsx)(a.a,{href:\"#kubernetes-\\uC124\\uCE58\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Kubernetes \\uC124\\uCE58\"]}),(0,e.jsx)(a.p,{children:\"Argo CD notifcation controller\\uC744 \\uC544\\uB798\\uCC98\\uB7FC \\uC124\\uCE58\\uD55C\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(a.span,{className:\"code-line\",children:`kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj-labs/argocd-notifications/release-1.0/manifests/install.yaml\n`})})}),(0,e.jsxs)(a.p,{children:[\"\\uADF8\\uB9AC\\uACE0 \\uC544\\uB798\\uCC98\\uB7FC ConfigMap\\uC744 \\uC124\\uCE58\\uD55C\\uB2E4. \",(0,e.jsx)(a.code,{children:\"argocd-notifications-cm\"}),\" ConfigMap\\uC5D0 \\uC54C\\uB9BC\\uC744 \\uBCF4\\uB0B8 message template\\uB4E4\\uC774 \\uC124\\uC815\\uB41C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(a.span,{className:\"code-line\",children:`kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj-labs/argocd-notifications/release-1.0/catalog/install.yaml\n`})})}),(0,e.jsxs)(a.p,{children:[\"\\uC704\\uC5D0\\uC11C \\uC124\\uC815\\uD55C \",(0,e.jsx)(a.code,{children:\"Bot User Oauth Token\"}),\"\\uC744 \",(0,e.jsx)(a.code,{children:\"<auth-token>\"}),\"\\uC5D0 \\uB123\\uC5B4\\uC11C \\uC0DD\\uC131\\uD55C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` Secret\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" argocd\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"-\"}),\"notifications\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"-\"}),`secret\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"stringData\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"slack-token\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" <auth\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"-\"}),\"token\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\">\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"\\uADF8\\uB9AC\\uACE0 \\uC774\\uBBF8 ConfigMap\\uC774 \\uB9CC\\uB4E4\\uC5B4\\uC838 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, patch\\uB97C \\uD1B5\\uD574\\uC11C slack \\uC124\\uC815\\uC744 \\uCD94\\uAC00\\uD55C\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"kubectl patch cm argocd-notifications-cm -n argocd --type merge -p \",(0,e.jsx)(a.span,{className:\"token string\",children:`'{\"data\": {\"service.slack\": \"{ token: $slack-token }\" }}'`}),`\n`]})})}),(0,e.jsx)(a.p,{children:\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C \\uC774\\uBBF8 ArgoCD\\uC5D0\\uC11C \\uB9CC\\uB4E4\\uC5B4\\uC9C4 App\\uC5D0 notification\\uC744 \\uC801\\uC6A9\\uD558\\uACE0 \\uC2F6\\uC73C\\uBA74, Annotation\\uC744 \\uCD94\\uAC00\\uD558\\uBA74 \\uB41C\\uB2E4. \\uC544\\uB798\\uCC98\\uB7FC ArgoCD CRD\\uB97C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(a.span,{className:\"code-line\",children:`$ kubectl get app\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`NAME           SYNC STATUS   HEALTH STATUS\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`sample         Synced        Healthy\n`})]})}),(0,e.jsx)(a.p,{children:\"sync\\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uB418\\uC5C8\\uC744 \\uB54C, Slack notification\\uC744 \\uBCF4\\uB0B4\\uACE0 \\uC2F6\\uC73C\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC774 annotation\\uC744 \\uB123\\uC73C\\uBA74 \\uB41C\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"kubectl patch app sample -p \",(0,e.jsx)(a.span,{className:\"token string\",children:`'{\"metadata\": {\"annotations\": {\"notifications.argoproj.io/subscribe.on-sync-succeeded.slack\":\"channel_name\"}}}'`}),` --type merge\n`]})})}),(0,e.jsx)(a.p,{children:\"\\uC774\\uC81C Argo CD\\uC5D0\\uC11C \\uD574\\uB2F9 Application\\uC5D0\\uC11C Sync\\uAC00 \\uC131\\uACF5\\uC801\\uC73C\\uB85C \\uC9C4\\uD589\\uB418\\uBA74 \\uD574\\uB2F9 \\uC2AC\\uB799 \\uCC44\\uB110\\uB85C \\uBA54\\uC138\\uC9C0\\uAC00 \\uAC00\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsxs)(a.h2,{id:\"cli\",children:[(0,e.jsx)(a.a,{href:\"#cli\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"CLI\"]}),(0,e.jsxs)(a.p,{children:[(0,e.jsx)(a.code,{children:\"argocd-notification\"}),\" binary\\uB85C CLI\\uB97C \\uC81C\\uACF5\\uD55C\\uB2E4. Kubernetes container\\uC5D0\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uBA85\\uB839\\uC5B4\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4. \\uC774\\uB807\\uAC8C \",(0,e.jsx)(a.code,{children:\"applicaion_name\"}),\"\\uC5D0 Argo CD application \\uC774\\uB984\\uC744 \\uC124\\uC815\\uD558\\uACE0, \",(0,e.jsx)(a.code,{children:\"channel_name\"}),\"\\uC740 \\uBCF4\\uB0B4\\uACE0 \\uC2F6\\uC740 \\uCC44\\uB110\\uC744 \\uC801\\uC73C\\uBA74 \\uD14C\\uC2A4\\uD2B8\\uB85C \\uBA54\\uC138\\uC9C0\\uB97C \\uBCF4\\uB0B4\\uBCFC \\uC218 \\uC788\\uB2E4. \\uC704\\uC758 \\uACFC\\uC815\\uC5D0\\uC11C \\uC2AC\\uB799 \\uBA54\\uC138\\uC9C0\\uAC00 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC624\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uC774 CLI\\uB85C \\uC694\\uCCAD\\uD574\\uC11C slack\\uC5D0\\uC11C \\uC5B4\\uB5A4 \\uC751\\uB2F5\\uC774 \\uC624\\uB294\\uC9C0 \\uD655\\uC778\\uD558\\uC5EC \\uB514\\uBC84\\uAE45 \\uD560 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(a.code,{children:\"channel_name\"}),\"\\uC5D0 \",(0,e.jsx)(a.code,{children:\"@slack_username\"}),\"\\uC73C\\uB85C \\uBCF4\\uB0B4\\uBA74 user conversation\\uC5D0 \\uBA54\\uC138\\uC9C0\\uB97C \\uBCF4\\uB0B4\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"exec\"}),` -it argocd-notifications-controller-5d78489bc8-fkb2x -- /app/argocd-notifications template notify app-deployed application_name --recipient slack:channel_name\n`]})})}),(0,e.jsxs)(a.h2,{id:\"custom-template\",children:[(0,e.jsx)(a.a,{href:\"#custom-template\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Custom Template\"]}),(0,e.jsxs)(a.p,{children:[\"Slack\\uC5D0 \\uC624\\uB294 message\\uC758 \\uB0B4\\uC6A9\\uACFC format\\uC744 \\uBCC0\\uACBD\\uD558\\uACE0 \\uC2F6\\uC73C\\uBA74, \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uB0B4\\uAC00 \\uC815\\uC758\\uD55C template\\uB97C \",(0,e.jsx)(a.code,{children:\"argocd-notifications-cm\"}),\" ConfigMap\\uC5D0 \\uCD94\\uAC00\\uD558\\uBA74 \\uB41C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"template.app-deployed-custom\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`  slack:\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`    message: |\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`      {{if eq .app.metadata.name \"sample\"}}[test]{{end}}{{.app.metadata.name}} \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uBC30\\uD3EC\\uAC00 \\uC644\\uB8CC\\uB418\\uC5C7\\uC2B5\\uB2C8\\uB2E4.\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`    attachments: |\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`      [{\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        \"title\": \"{{ .app.metadata.name}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        \"color\": \"#18be52\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        \"fields\": [\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"title\": \"Sync Status\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"value\": \"{{.app.status.sync.status}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"short\": true\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        },\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"title\": \"Repository\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"value\": \"{{.app.spec.source.repoURL}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"short\": true\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        },\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"title\": \"Revision\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"value\": \"{{.app.status.sync.revision}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"short\": true\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        }\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {{range $index, $c := .app.status.conditions}}\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {{if not $index}},{{end}}\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {{if $index}},{{end}}\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"title\": \"{{$c.type}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"value\": \"{{$c.message}}\",\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`          \"short\": true\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        }\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        {{end}}\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`        ]\n`})}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token string scalar\",children:\"      }]\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"CLI\\uB97C \\uD1B5\\uD574\\uC11C \\uB0B4\\uAC00 \\uBCC0\\uACBD\\uD55C \\uC2AC\\uB799 \\uBA54\\uC138\\uC9C0 template\\uC774 \\uC5B4\\uB5BB\\uAC8C \\uBCF4\\uC774\\uB294\\uC9C0 \\uD655\\uC778\\uD558\\uACE0\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"exec\"}),` -it argocd-notifications-controller-5d78489bc8-fkb2x -- /app/argocd-notifications template notify app-deployed-custom application_name --recipient slack:channel_name\n`]})})}),(0,e.jsxs)(a.p,{children:[\"\\uADF8\\uB9AC\\uACE0 \\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C trigger \\uC870\\uAC74\\uC5D0\\uC11C \\uB0B4\\uAC00 \\uB9CC\\uB4E0 \",(0,e.jsx)(a.code,{children:\"app-deployed-custom\"}),\"\\uC744 \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D \\uC218\\uC815\\uD55C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"trigger.on-deployed\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`  - description: Application is synced and healthy. Triggered once per commit.\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`    oncePer: app.status.sync.revision\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`    send:\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`    - app-deployed-custom\n`})}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token string scalar\",children:\"    when: app.status.operationState.phase in ['Succeeded'] and app.status.health.status == 'Healthy'\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"\\uC774\\uC81C ArgoCD\\uC5D0\\uC11C \\uC0C8\\uB85C\\uC6B4 revision\\uC73C\\uB85C sync\\uAC00 \\uB9DE\\uC558\\uC744 \\uB54C \\uC2AC\\uB799 \\uC54C\\uB9BC\\uC774 \\uAC00\\uAC8C \\uB41C\\uB2E4.\"})]})}}var y=f;return C;})();\n;return Component;","toc":[{"value":"Slack Permission","url":"#slack-permission","depth":2},{"value":"Kubernetes 설치","url":"#kubernetes-설치","depth":2},{"value":"CLI","url":"#cli","depth":2},{"value":"Custom Template","url":"#custom-template","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.175,"time":190500,"words":635},"slug":"20231214-argocd-notification","fileName":"20231214-argocd-notification.md","title":"Argo CD Notification으로 간단하게 Slack 알림 보내기","date":"2023-12-14T00:00:00.000Z","tags":["Kubernetes","ArgoCD"],"images":["/static/images/social-banner.png"],"summary":"Argo CD Notification가 이미 있어서 쉽게 Slack 알림을 연동할 수 있다. 메뉴얼에서 친절하게 셋팅 방법을 설명하고 있지만, 처음 보고 셋팅할 때 놓칠 수 있는 부분을 기록으로 남긴다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"Jaemyun Lee","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Kubernetes에서 Nginx로 IP allow list 제어","date":"2023-12-05T00:00:00.000Z","tags":["Kubernetes","Nginx"],"images":["/static/images/social-banner.png"],"summary":"Kubernetes cluster에서 Nginx로 허용 가능한 IP를 설정하고 싶었다. 간단하게 끝날 줄 알았던 작업은 또다른 삽질기가 되었다.😭 Kubernetes에서 SNAT이 되는 과정을 이해하고 externalTrafficPolicy를 Local로 설정했다. 그리고 External Load balancer에서는 client IP를 전달하기 위해서 Proxy Protocol와 같은 것을 설정하고, Nginx에서 그 Proxy protocol로 전달된 IP address로 Access control을 할 수 있도록 설정하였다.","slug":"20231205-nginx-allow-ip"},"next":null},"__N_SSG":true}