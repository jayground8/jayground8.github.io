{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!h.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},g=a=>k(t(l(a!=null?o(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var i=u((j,r)=>{r.exports=_jsx_runtime});var b={};N(b,{default:()=>v,frontmatter:()=>y});var e=g(i()),y={title:\"secrets-store-csi-driver-provider-gcp \\uC0AC\\uC6A9\\uD574\\uBCF4\\uAE30\",date:\"2025-01-05\",tags:[\"gcp\",\"kubernetes\"],images:[\"/static/images/social-banner.png\"],summary:\"GKE\\uC5D0\\uC11C add-on \\uAE30\\uB2A5\\uC73C\\uB85C \\uAD00\\uB9AC\\uD615 \\uC11C\\uBE44\\uC2A4\\uC778 Google Secret Manager\\uC744 Kubernetes Secrets Store CSI Driver\\uB85C \\uC27D\\uAC8C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4. \\uD558\\uC9C0\\uB9CC add-on \\uBC84\\uC804\\uC5D0\\uC11C\\uB294 Sync as Kubernetes Secret \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uC9C0 \\uC54A\\uAE30 \\uB54C\\uBB38\\uC5D0, Kubernetes Secret\\uC744 \\uD658\\uACBD\\uBCC0\\uC218\\uB85C \\uC124\\uC815\\uD558\\uB294\\uB370 \\uC81C\\uC57D\\uC0AC\\uD56D\\uC774 \\uC788\\uB2E4. \\uC9C1\\uC811 Kubernetes Secrets Store CSI driver\\uC640 GCP provider driver\\uB97C \\uC124\\uCE58\\uD558\\uC5EC Sync as Kubernetes Secret \\uAE30\\uB2A5\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4. \\uC774\\uB807\\uAC8C Sync\\uB41C Kubernetes Secret\\uC744 \\uD658\\uACBD\\uBCC0\\uC218\\uB85C \\uC8FC\\uC785\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. Google Secret Manager\\uB294 \\uC544\\uC27D\\uAC8C\\uB3C4 \\uD558\\uB098\\uC758 Secret\\uC5D0 \\uBCF5\\uC218\\uC758 key value\\uB97C \\uC81C\\uACF5\\uD558\\uC9C0 \\uC54A\\uB294\\uB2E4. \\uC774\\uBC88 \\uAE00\\uC5D0\\uC11C\\uB294 Google Secret Manager\\uB97C Kubernetes Secret Object\\uC640 Sync\\uD574\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uBC14\\uB78C\\uC9C1\\uD560\\uC9C0 \\uACE0\\uBBFC\\uD574\\uBCF8\\uB2E4.\"};function S(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\",math:\"math\",semantics:\"semantics\",mrow:\"mrow\",mn:\"mn\",mtext:\"mtext\",mo:\"mo\",annotation:\"annotation\",ol:\"ol\",li:\"li\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"GKE(Google Kubernetes Engine)\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uACBD\\uC6B0\\uC5D0 Container\\uC5D0 \\uBE44\\uBC00\\uAC12\\uC744 \\uD658\\uACBD\\uBCC0\\uC218\\uB85C \\uC5B4\\uB5BB\\uAC8C \\uC8FC\\uC785\\uD560 \\uC218 \\uC788\\uC744\\uAE4C?\"}),(0,e.jsxs)(n.h2,{id:\"gke-add-on\",children:[(0,e.jsx)(n.a,{href:\"#gke-add-on\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"GKE Add-on\"]}),(0,e.jsx)(n.p,{children:\"Public Cloud Provider\\uB97C \\uC774\\uC6A9\\uD560 \\uB54C, \\uC6B4\\uC601\\uC5D0 \\uB300\\uD55C \\uBD80\\uB2F4\\uC744 \\uC904\\uC77C \\uC218 \\uC788\\uB294 managed service\\uB97C \\uD655\\uC778\\uD558\\uAC8C \\uB41C\\uB2E4. GCP\\uC5D0\\uB294 Secret Manager Service\\uAC00 \\uC788\\uACE0, GKE\\uC5D0\\uC11C add-on\\uC73C\\uB85C \\uAC04\\uB2E8\\uD558\\uAC8C \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. \\uC544\\uB798\\uCC98\\uB7FC GKE Cluster\\uC5D0\\uC11C Secret Manager\\uB97C Enable\\uD558\\uBA74 Kubernetes Secrets Store CSI Driver\\uCC98\\uB7FC \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/gke-secret-manager-add-on.png\",alt:\"gke add-on option for secret manager\"}),(0,e.jsxs)(n.p,{children:[\"\\uD558\\uC9C0\\uB9CC \",(0,e.jsx)(n.a,{href:\"https://cloud.google.com/secret-manager/docs/secret-manager-managed-csi-component#limitations\",children:\"\\uACF5\\uC2DD \\uBB38\\uC11C\"}),\"\\uC5D0 \\uB098\\uC628 \\uAC83\\uCC98\\uB7FC, \\uBE44\\uBC00\\uAC12\\uC774 \\uBCC0\\uACBD\\uB418\\uC5C8\\uC744 \\uB54C \\uBC18\\uC601\\uD574\\uC8FC\\uB294 Secret auto rotation \\uAE30\\uB2A5\\uACFC Kubernetes Secret Object\\uB97C \\uC0DD\\uC131\\uD558\\uC5EC Sync\\uC744 \\uB9DE\\uCD94\\uB294 \\uAE30\\uB2A5\\uC740 \\uC81C\\uACF5\\uD558\\uC9C0 \\uC54A\\uB294 \\uC81C\\uC57D\\uC0AC\\uD56D\\uC774 \\uC788\\uB2E4. \\uB530\\uB77C\\uC11C \\uC544\\uB798\\uCC98\\uB7FC Secret Object\\uC744 \\uD1B5\\uD574\\uC11C \\uD658\\uACBD\\uBCC0\\uC218\\uB97C Container\\uC5D0 \\uC8FC\\uC785\\uD558\\uB294 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uD574\\uB2F9 Add-on \\uC635\\uC158\\uC744 \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC5C6\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"envFrom\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"secrets-store-csi-driver-\\uC9C1\\uC811-\\uC124\\uCE58\",children:[(0,e.jsx)(n.a,{href:\"#secrets-store-csi-driver-\\uC9C1\\uC811-\\uC124\\uCE58\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"secrets-store-csi-driver \\uC9C1\\uC811 \\uC124\\uCE58\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/kubernetes-sigs/secrets-store-csi-driver\",children:\"secrets-store-csi-driver\"}),\"\\uB97C \\uC9C1\\uC811 \\uC124\\uCE58\\uD558\\uC5EC \\uD574\\uB2F9 \\uAE30\\uB2A5\\uB4E4\\uC744 \\uC0AC\\uC6A9\\uD558\\uB294 \\uBC29\\uBC95\\uC774 \\uC788\\uB2E4. \\uC774 \\uAE00\\uC744 \\uC791\\uC131\\uD558\\uB294 \\uC2DC\\uC810\\uC5D0\\uB294 \",(0,e.jsx)(n.code,{children:\"syncSecret\"}),\"\\uACFC \",(0,e.jsx)(n.code,{children:\"enableSecretRotation\"}),\" \\uAE30\\uB2A5\\uC740 Alpha \\uAE30\\uB2A5\\uC73C\\uB85C \\uC81C\\uACF5\\uB418\\uACE0 \\uC788\\uC5B4\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 ArgoCD Helm\\uC73C\\uB85C \\uBC30\\uD3EC\\uD560 \\uACBD\\uC6B0\\uC5D0 values\\uC5D0 \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uC744 \\uD574\\uC918\\uC57C \\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` argoproj.io/v1alpha1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Application\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`driver\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` argocd\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"project\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"syncPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"syncOptions\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` CreateNamespace=true\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"destination\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'https://kubernetes.default.svc'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" kube\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"source\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"chart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`driver\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repoURL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//kubernetes\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"sigs.github.io/secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`driver/charts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"targetRevision\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 1.4.7\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"helm\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"releaseName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`driver\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"values\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`        syncSecret:\n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`          enabled: true\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:\"        enableSecretRotation: true\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Google Secret Manager\\uB97C Secrets Store CSI driver\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D GCP\\uC6A9 provider\\uB97C \\uC124\\uCE58\\uD55C\\uB2E4. \\uC544\\uC9C1 \\uD574\\uB2F9 Helm Chart\\uB294 public\\uD558\\uAC8C publish\\uD558\\uC9C0 \\uC54A\\uC544\\uC11C \",(0,e.jsx)(n.a,{href:\"https://github.com/GoogleCloudPlatform/secrets-store-csi-driver-provider-gcp\",children:\"secrets-store-csi-driver-provider-gcp\"}),\" Github Repo\\uB97C Clone\\uD558\\uC5EC \\uC544\\uB798\\uC640 \\uAC19\\uC774 Helm\\uC73C\\uB85C \\uC124\\uCE58\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"helm upgrade \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--install secrets-store-csi-driver-provider-gcp \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`charts/secrets-store-csi-driver-provider-gcp\n`})]})}),(0,e.jsxs)(n.h2,{id:\"test\",children:[(0,e.jsx)(n.a,{href:\"#test\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Test\"]}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"gcloud cli\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C \\uC608\\uC81C Secret \\uAC12\\uC744 \\uC0DD\\uC131\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"helloworld\"'}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\">\"}),` secret.data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud secrets create testsecret \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--replication-policy\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"automatic \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--data-file\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`secret.data\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB9AC\\uACE0 \\uD574\\uB2F9 Secret\\uC5D0 \\uC811\\uADFC \\uAD8C\\uD55C\\uC744 \\uC900 service account\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`gcloud iam service-accounts tutorial-workload\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud iam service-accounts add-iam-policy-binding \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--role roles/iam.workloadIdentityUser \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--member \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"serviceAccount:tutorial-prj.svc.id.goog[default/example]\"'}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`tutorial-workload@tutorial-prj.iam.gserviceaccount.com\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"gcloud secrets add-iam-policy-binding testsecret \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--member\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\"serviceAccount:tutorial-workload@tutorial-prj.iam.gserviceaccount.com \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"--role\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`roles/secretmanager.secretAccessor\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Secrets Store CSI Driver\\uAC00 \\uC124\\uCE58\\uB418\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"SecretProviderClass\"}),\" Ojbect\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 secrets-store-csi-driver-provider-gcp\\uAC00 \\uC124\\uCE58\\uB418\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 spec.provider\\uAC00 gcp\\uB85C \\uC124\\uC815\\uD560 \\uC218\\uAC00 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store.csi.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` SecretProviderClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provider\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` gcp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`      - resourceName: \"projects/tutorial-prj/secrets/testsecret/versions/latest\"\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:'        fileName: \"secret.data\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretObjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Opaque\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"objectName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` secret.data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` example\n`]})]})}),(0,e.jsx)(n.p,{children:\"Pod\\uC5D0\\uC11C Secret\\uC5D0 \\uC811\\uADFC\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D Kubernetes\\uC5D0 Service Account\\uB97C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC0DD\\uC131\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ServiceAccount\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` example\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"annotations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"iam.gke.io/gcp-service-account\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" tutorial\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"workload@tutorial\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`prj.iam.gserviceaccount.com\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C Secret\\uC744 driver\\uB97C \\uD1B5\\uD574\\uC11C VolumeMount\\uB97C \\uD558\\uACE0, Sync as Kubernetes Secret \\uAE30\\uB2A5\\uC73C\\uB85C \\uC0DD\\uC131\\uB41C Secret Object\\uC73C\\uB85C \\uD658\\uACBD\\uBCC0\\uC218\\uB97C \\uC8FC\\uC785\\uD558\\uB3C4\\uB85D \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Pod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` mypod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"namespace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` default\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"serviceAccountName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` example\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" gcr.io/google.com/cloudsdktool/cloud\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"sdk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`slim\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"imagePullPolicy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` IfNotPresent\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` mypod\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"envFrom\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretRef\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'/var/secrets'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` mysecret\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` mysecret\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"csi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"driver\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`store.csi.k8s.io\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readOnly\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumeAttributes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretProviderClass\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'app-secrets'\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uC124\\uC815\\uC774 \\uB418\\uC5C8\\uB2E4\\uBA74 app-secrets Kubernetes Secret Object\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0, Container\\uC5D0 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uD658\\uACBD\\uBCC0\\uC218\\uB85C \\uC8FC\\uC785\\uB418\\uAC8C \\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uD55C\\uACC4\",children:[(0,e.jsx)(n.a,{href:\"#\\uD55C\\uACC4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD55C\\uACC4\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC624\\uD508\\uC18C\\uC2A4\\uB85C \\uC9C1\\uC811 \\uC6B4\\uC601\\uD560 \\uC218 \\uC788\\uB294 Hashicorp Vault\\uC640 \\uBE44\\uAD50\\uD560 \\uB54C, GCP Secret Manager\\uB294 Secret \\uD558\\uB098\\uC5D0 \\uBCF5\\uC218\\uC758 key value\\uB85C \\uC800\\uC7A5\\uD560 \\uC218 \\uC5C6\\uB2E4\\uB294 \\uAC83\\uC774 \\uC544\\uC27D\\uB2E4. Vault\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C \",(0,e.jsx)(n.a,{href:\"https://developer.hashicorp.com/vault/docs/platform/k8s/vso\",children:\"Vault Secrets Operator\"}),\"\\uB97C \\uD1B5\\uD574\\uC11C Vault\\uC758 Secret\\uC744 Kubernetes\\uC758 Secret Object\\uC640 Sync\\uB97C \\uD560 \\uC218 \\uC788\\uB2E4. \\uC544\\uB798\\uCC98\\uB7FC Vault Secret\\uC740 \\uD558\\uB098\\uC758 Secret\\uC5D0 \\uBCF5\\uC218\\uC758 key value\\uB85C \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, Container\\uC5D0\\uAC8C \\uD544\\uC694\\uD55C \\uBAA8\\uB4E0 \\uBE44\\uBC00\\uAC12\\uC744 \\uD558\\uB098\\uC758 Secret\\uC73C\\uB85C \\uBB36\\uC5B4\\uC11C \\uAD00\\uB9AC\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/gke-vault-create-secret.png\",alt:\"create new secret on vault ui\"}),(0,e.jsx)(n.p,{children:\"GCP Secret Manager\\uC758 Secret\\uC5D0\\uB294 \\uD558\\uB098\\uC758 key value\\uB9CC \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. \\uBCF5\\uC218\\uC758 key value\\uB85C \\uAD6C\\uC131\\uB41C JSON\\uAC19\\uC740 \\uD30C\\uC77C\\uB85C \\uC800\\uC7A5\\uD574\\uC11C Secret\\uC5D0 \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uC9C0\\uB9CC, \\uADF8\\uAC83\\uC744 \\uD558\\uB098\\uC758 Kubernetes Secret\\uC73C\\uB85C Sync\\uD558\\uB294 \\uBC29\\uBC95\\uC774 \\uC81C\\uACF5\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/gke-google-create-secret.png\",alt:\"create new secret on gcp console\"}),(0,e.jsx)(n.p,{children:\"GCP Secret Manager\\uC5D0\\uC11C \\uD55C\\uC30D\\uC758 Key Value\\uB85C\\uB9CC \\uAD00\\uB9AC\\uD55C\\uB2E4\\uBA74, Label\\uC744 \\uD1B5\\uD574\\uC11C Secret\\uC744 Group\\uC73C\\uB85C \\uBB36\\uB294 \\uBC29\\uBC95\\uC744 \\uACE0\\uB824\\uD560 \\uC218 \\uC788\\uB2E4. \\uADF8\\uB9AC\\uACE0 SecretProviderClass\\uC5D0\\uC11C \\uBCF5\\uC218\\uC758 Secret\\uB4E4\\uC744 \\uD558\\uB098\\uC758 Kubernetes Secret Object\\uB85C \\uBB36\\uC5B4\\uC8FC\\uB294 \\uC791\\uC5C5\\uC744 \\uD574\\uC918\\uC57C \\uD55C\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" secrets\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"store.csi.x\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`k8s.io/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` SecretProviderClass\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provider\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` gcp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`      - resourceName: \"projects/tutorial-prj/secrets/soemthing/versions/latest\"\n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`        fileName: \"something\"\n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`      - resourceName: \"projects/tutorial-prj/secrets/else/versions/latest\"\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:'        fileName: \"else\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretObjects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secretName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`secrets\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Opaque\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"objectName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` something\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` SOMETHING\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"objectName\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` else\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ELSE\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uB610\\uD55C Secret\\uC758 key\\uC774\\uB984\\uC774 \\uACE0\\uC720\\uD574\\uC57C \\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uD658\\uACBD\\uBCC4\\uB85C \\uC5B4\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\\uC774 Secret\\uC744 \\uC9C0\\uC815\\uD558\\uB824\\uBA74 \\uBA85\\uBA85 \\uADDC\\uCE59\\uC774 \\uD544\\uC694\\uD558\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uBE44\\uC6A9\",children:[(0,e.jsx)(n.a,{href:\"#\\uBE44\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBE44\\uC6A9\"]}),(0,e.jsxs)(n.p,{children:[\"Secret \\uBC84\\uC804\\uB2F9 \",(0,e.jsx)(n.span,{className:\"math math-inline\",children:(0,e.jsxs)(n.span,{className:\"katex\",children:[(0,e.jsx)(n.span,{className:\"katex-mathml\",children:(0,e.jsx)(n.math,{xmlns:\"http://www.w3.org/1998/Math/MathML\",children:(0,e.jsxs)(n.semantics,{children:[(0,e.jsxs)(n.mrow,{children:[(0,e.jsx)(n.mn,{children:\"0.06\"}),(0,e.jsx)(n.mtext,{children:\"\\uC640\\uC5D1\\uC138\\uC2A4\\uC791\\uC5C5\"}),(0,e.jsx)(n.mn,{children:\"10\"}),(0,e.jsx)(n.mo,{separator:\"true\",children:\",\"}),(0,e.jsx)(n.mn,{children:\"000\"}),(0,e.jsx)(n.mtext,{children:\"\\uBC88\\uB2F9\"})]}),(0,e.jsx)(n.annotation,{encoding:\"application/x-tex\",children:\"0.06\\uC640 \\uC5D1\\uC138\\uC2A4 \\uC791\\uC5C5 10,000\\uBC88\\uB2F9 \"})]})})}),(0,e.jsx)(n.span,{className:\"katex-html\",\"aria-hidden\":\"true\",children:(0,e.jsxs)(n.span,{className:\"base\",children:[(0,e.jsx)(n.span,{className:\"strut\",style:{height:\".8778em\",verticalAlign:\"-.1944em\"}}),(0,e.jsx)(n.span,{className:\"mord\",children:\"0.06\"}),(0,e.jsx)(n.span,{className:\"mord hangul_fallback\",children:\"\\uC640\\uC5D1\\uC138\\uC2A4\\uC791\\uC5C5\"}),(0,e.jsx)(n.span,{className:\"mord\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"mpunct\",children:\",\"}),(0,e.jsx)(n.span,{className:\"mspace\",style:{marginRight:\".1667em\"}}),(0,e.jsx)(n.span,{className:\"mord\",children:\"000\"}),(0,e.jsx)(n.span,{className:\"mord hangul_fallback\",children:\"\\uBC88\\uB2F9\"})]})})]})}),\"0.03\\uC758 \\uBE44\\uC6A9\\uC774 \\uCCAD\\uAD6C\\uB41C\\uB2E4. Secret Auto Rotation\\uC744 \\uC704\\uD574\\uC11C Pub/Sub\\uC73C\\uB85C Topic\\uC744 \\uBC1C\\uD589\\uD558\\uBA74 \\uCD94\\uAC00\\uB85C \\uC54C\\uB9BC\\uB2F9 $0.05\\uC758 \\uBE44\\uC6A9\\uC774 \\uBC1C\\uC0DD\\uD55C\\uB2E4. \\uC774\\uBC88 \\uACC4\\uC0B0\\uC5D0\\uC11C\\uB294 \\uC54C\\uB9BC\\uC5D0 \\uC758\\uD55C \\uBE44\\uC6A9\\uC740 \\uBB34\\uC2DC\\uD55C\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uADF8\\uB7EC\\uBA74 Secret\\uC758 \\uBC84\\uC804\\uC744 \\uCD5C\\uC2E0 \\uD558\\uB098\\uB9CC \\uC720\\uC9C0\\uD55C\\uB2E4\\uACE0 \\uD588\\uC744 \\uB54C, Secret \\uAC2F\\uC218 * $0.06 \\uAE08\\uC561\\uC774 \\uBC1C\\uC0DD\\uD55C\\uB2E4. Secret\\uC774 100\\uAC1C\\uB77C\\uACE0 \\uD558\\uBA74 6\\uB2EC\\uB7EC \\uAE08\\uC561\\uC774 \\uBC1C\\uC0DD\\uD560 \\uC218 \\uC788\\uB2E4. \\uADF8\\uB9AC\\uACE0 \\uC561\\uC0C8\\uC2A4 \\uC791\\uC5C5\\uC740 Secret Auto Rotation \\uAE30\\uB2A5\\uC758 \\uD65C\\uC131\\uD654\\uB85C Polling\\uD558\\uB294 \\uC8FC\\uAE30\\uC5D0 \\uB530\\uB77C\\uC11C \\uC694\\uAE08\\uC774 \\uCE21\\uC815\\uB420 \\uC218 \\uC788\\uB2E4. Secrets Store CSI Driver\\uC5D0\\uC11C \\uD574\\uB2F9 \\uAE30\\uB2A5\\uC758 \\uAE30\\uBCF8 polling \\uC8FC\\uAE30\\uB294 2\\uBD84\\uC73C\\uB85C \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uD558\\uB098 Secret\\uB2F9 Polling\\uC5D0 \\uB530\\uB77C\\uC11C \\uBC1C\\uC0DD\\uD558\\uB294 \\uAE08\\uC561\\uC740 \\uC6D4 0.12\\uB2EC\\uB7EC \\uC815\\uB3C4\\uAC00 \\uB41C\\uB2E4. \\uC774\\uAC83\\uB3C4 Secret\\uC774 100\\uAC1C\\uB77C\\uACE0 \\uD558\\uBA74 12\\uB2EC\\uB7EC \\uC815\\uB3C4 \\uAE08\\uC561\\uC774 \\uBC1C\\uC0DD\\uD55C\\uB2E4.\"}),(0,e.jsx)(n.p,{children:\"100~200\\uAC1C\\uC758 Secret\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uC740 Vault\\uB97C HA Mode\\uB85C 3\\uAC1C Node\\uB97C CPU resource request 1\\uB85C \\uC6B4\\uC601\\uD558\\uBA74\\uC11C \\uBC1C\\uC0DD\\uD558\\uB294 VM \\uBE44\\uC6A9\\uBCF4\\uB2E4 \\uC0C1\\uB2F9\\uC774 \\uC720\\uB9AC\\uD558\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(n.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsx)(n.p,{children:\"GKE\\uC5D0\\uC11C Secret Manager\\uB97C \\uC0AC\\uC6A9\\uD558\\uC5EC Application\\uC5D0 \\uBE44\\uBC00\\uAC12\\uC744 \\uC8FC\\uC785\\uD55C\\uB2E4\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC6B0\\uC120\\uC21C\\uC704\\uB85C \\uACE0\\uB824\\uD574\\uBCFC \\uC218 \\uC788\\uACA0\\uB2E4.\"}),(0,e.jsxs)(n.ol,{children:[(0,e.jsxs)(n.li,{children:[\"Google Secret Manager API\\uB85C \\uC9C1\\uC811 \\uBE44\\uBC00\\uAC12\\uC744 \\uBC14\\uB85C \\uAC00\\uC838\\uC640\\uC11C \\uC0AC\\uC6A9\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uBCF4\\uC548\\uC801\\uC73C\\uB85C \\uAC00\\uC7A5 \\uC720\\uB9AC\"}),(0,e.jsx)(n.li,{children:\"Secret Manager\\uC5D0 \\uC7A5\\uC560\\uAC00 \\uC788\\uC744 \\uB54C \\uBC14\\uB85C \\uC601\\uD5A5\\uC744 \\uBC1B\\uC74C. Google Secret Manager\\uB294 99.95% Uptime SLA\\uB97C \\uC81C\\uACF5\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uD55C\\uB2EC\\uC5D0 \\uC57D 22\\uBD84 \\uC774\\uC0C1\\uC740 downtime\\uC774 \\uBC1C\\uC0DD\\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uD558\\uACE0 \\uC788\\uB2E4.\"})]})]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\".env\"}),\" \\uD30C\\uC77C\\uACFC \\uAC19\\uC774 \\uD30C\\uC77C \\uD615\\uC2DD\\uC73C\\uB85C \\uBD88\\uB7EC\\uC640\\uC11C \\uC0AC\\uC6A9\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Secrets Store CSI Driver\\uB85C Volume Mount\\uB41C \\uD30C\\uC77C\\uC744 \\uADF8\\uB300\\uB85C \\uC0AC\\uC6A9\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"Vault UI\\uB97C \\uD1B5\\uD574\\uC11C Secret\\uC758 key-pair\\uB97C N\\uAC1C \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uACFC \\uBE44\\uAD50\\uD558\\uBA74 \\uBD88\\uD3B8\\uD558\\uB2E4. \\uAD00\\uB9AC\\uD574\\uC57C \\uB418\\uB294 Secret\\uC774 \\uB9CE\\uB2E4\\uBA74, Secrets Store CSI Driver\\uB97C \\uC0AC\\uC6A9\\uD558\\uB354\\uB77C\\uB3C4 Vault provider\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uB354 \\uBC14\\uB78C\\uC9C1\\uD558\\uB2E4\\uACE0 \\uD310\\uB2E8\\uB41C\\uB2E4.\"})]})]}),(0,e.jsxs)(n.li,{children:[\"Kubernetes Secret Object\\uB85C \\uC8FC\\uC785\\uD560 \\uB54C\\uB294 Secret \\uAC2F\\uC218\\uAC00 \\uC801\\uACE0 \\uBCC0\\uACBD\\uC774 \\uC801\\uB2E4\\uBA74 \",(0,e.jsx)(n.a,{href:\"https://external-secrets.io/latest/provider/google-secrets-manager/\",children:\"External Secrets Operator\"}),\"\\uB098 Secrets Store CIS Driver\\uB97C \\uC0AC\\uC6A9\\uD558\\uACE0, Secret \\uAC2F\\uC218\\uAC00 \\uB9CE\\uACE0 \\uBCC0\\uACBD\\uC774 \\uC7A6\\uC73C\\uBA74 Vault\\uB97C \\uC0AC\\uC6A9\",(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Secret \\uAC2F\\uC218\\uAC00 \\uB9CE\\uC544\\uC9C0\\uBA74 Secret Manager\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uBE44\\uC6A9\\uB3C4 \\uC62C\\uB77C\\uAC00\\uACE0, \\uADF8\\uAC83\\uB4E4\\uC744 \\uAD00\\uB9AC\\uD558\\uB294 \\uAC83\\uB3C4 \\uC5B4\\uB824\\uC6CC\\uC9C4\\uB2E4.\"}),(0,e.jsx)(n.li,{children:\"Vault UI Console\\uC5D0\\uC11C Vault Role\\uC744 \\uD1B5\\uD574\\uC11C \\uAC1C\\uBC1C\\uC790\\uC5D0\\uAC8C \\uAD8C\\uD55C\\uC744 \\uC704\\uC784\\uD558\\uB294 \\uAC83\\uC774 \\uD3B8\\uB9AC\\uD558\\uB2E4. \\uBE44\\uBC00\\uAC12\\uC758 \\uBCC0\\uACBD\\uC774 \\uC7A6\\uACE0 \\uAC1C\\uBC1C\\uC790\\uC5D0\\uAC8C \\uAD00\\uB9AC\\uB97C \\uC704\\uC784\\uD574\\uC57C \\uD55C\\uB2E4\\uBA74 Vault\\uAC00 \\uC720\\uB9AC\\uD558\\uB2E4.\"})]})]})]}),(0,e.jsx)(n.p,{children:\"Kubernetes\\uC5D0\\uC11C Application\\uC5D0 \\uD658\\uACBD\\uBCC0\\uC218\\uB85C \\uBE44\\uBC00\\uAC12\\uC744 \\uC8FC\\uC785\\uD574\\uC57C\\uB418\\uB294 \\uC81C\\uC57D\\uC0AC\\uD56D\\uC774 \\uC788\\uB2E4\\uB77C\\uACE0 \\uD558\\uBA74, Application\\uC774 \\uC5EC\\uB7EC \\uAC1C\\uAC00 \\uC874\\uC7AC\\uD558\\uACE0 \\uB2E4\\uC591\\uD55C \\uBE44\\uBC00\\uAC12\\uC774 \\uAD00\\uB9AC\\uB41C\\uB2E4\\uACE0 \\uD558\\uBA74 Vault\\uB97C \\uC9C1\\uC811 \\uC6B4\\uC601\\uD558\\uC5EC \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uBC14\\uB78C\\uC9C1\\uD558\\uB2E4\\uACE0 \\uD310\\uB2E8\\uB41C\\uB2E4. \\uC544\\uC8FC \\uAC04\\uB2E8\\uD558\\uAC8C\\uB9CC \\uC0AC\\uC6A9\\uB420 \\uB54C\\uB9CC Secrets Store CSI driver\\uB97C \\uC0AC\\uC6A9\\uD558\\uB294 \\uAC83\\uC774 \\uC88B\\uACA0\\uB2E4.\"})]})}}var v=S;return b;})();\n;return Component;","toc":[{"value":"GKE Add-on","url":"#gke-add-on","depth":2},{"value":"secrets-store-csi-driver 직접 설치","url":"#secrets-store-csi-driver-직접-설치","depth":2},{"value":"Test","url":"#test","depth":2},{"value":"한계","url":"#한계","depth":2},{"value":"비용","url":"#비용","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"8 min read","minutes":7.065,"time":423900,"words":1413},"slug":"20250105-secrets-store-csi-driver-provider-gcp","fileName":"20250105-secrets-store-csi-driver-provider-gcp.md","title":"secrets-store-csi-driver-provider-gcp 사용해보기","date":"2025-01-05T00:00:00.000Z","tags":["gcp","kubernetes"],"images":["/static/images/social-banner.png"],"summary":"GKE에서 add-on 기능으로 관리형 서비스인 Google Secret Manager을 Kubernetes Secrets Store CSI Driver로 쉽게 사용할 수 있다. 하지만 add-on 버전에서는 Sync as Kubernetes Secret 기능을 제공하지 않기 때문에, Kubernetes Secret을 환경변수로 설정하는데 제약사항이 있다. 직접 Kubernetes Secrets Store CSI driver와 GCP provider driver를 설치하여 Sync as Kubernetes Secret 기능을 사용할 수 있다. 이렇게 Sync된 Kubernetes Secret을 환경변수로 주입하도록 설정할 수 있다. Google Secret Manager는 아쉽게도 하나의 Secret에 복수의 key value를 제공하지 않는다. 이번 글에서는 Google Secret Manager를 Kubernetes Secret Object와 Sync해서 사용하는 것이 바람직할지 고민해본다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Thanos Receiver의 empty attribute value 문제","date":"2024-10-26T00:00:00.000Z","tags":["Thanos","opentelemetry"],"images":["/static/images/social-banner.png"],"summary":"Opentelemetry Instrumentation 라이브러리 중에서 Str(), Empty()로 attribute value를 설정하여 Metric을 보내는 경우가 있었다. 문제는 Thanos Receiver를 통해서 Metric을 저장하려고 할 때, Attribute value 값이 빈문자열이면 에러가 발생하였다. Otel 1.38.0 규격 문서를 확인했을 때 Attribute value는 빈문자열도 의미를 가질 수 있고 정상적으로 저장되어야 하는 것으로 정의되어 있었다. 따라서 Attribute value가 빈문자열이 때도 정상적으로 저장될 수 있도록 Thanos 소스코드를 수정하여 Container Image 빌드하여 사용하였다.","slug":"20241026-thanos-prometheus-remote-write"},"next":{"title":"GCP Secret Manager에서 비밀값을 OpenTofu로 관리하기","date":"2025-01-05T00:00:00.000Z","tags":["gcp","terraform","opentofu"],"images":["/static/images/social-banner.png"],"summary":"GCP Secret Manager를 IaS로 관리할 때, 저장하는 Secret 값을 Key Management Service의 비대칭키와 Terraform의 google_kms_secret_asymmetric data source로 관리할 수 있다. 공개키로 암호화한 비밀 값을 Terraform resource definition에 정의하고, 런타임 과정에서 복호화하여 Secret Manager의 비밀값으로 설정할 수 있다. 따라서 Git에 평서문 대신에 공개키로 암호화한 비밀 값으로 정의한 Terraform 파일을 저장하여 관리할 수 있다. 하지만 해당 비밀 값은 State output 같은 곳에 평서문으로 그대로 노출 될 수 있기 때문에, remote state로 관리할 때는 해당 state 파일이 노출되지 않도록 관리를 잘해야 한다. OpenTofu를 이용할 때는 State 파일을 암호화 하는 옵션을 사용하여 State 파일 자체를 암호화해서 관리할 수도 있다.","slug":"20250105-opentofu"}},"__N_SSG":true}