{"pageProps":{"posts":[{"title":"Cilium CNI와 HostPort","date":"2024-02-07T00:00:00.000Z","tags":["kubernetes","cilium"],"images":["/static/images/social-banner.png"],"summary":"네이버 클라우드 쿠버네티스 서비스에서 HostPort를 설정하였는데, 정상적으로 Node Port를 통해서 Container에 접근할 수가 없었다. Cilium의 기본 설정으로는 HostPort를 지원하지 않았다. Cilium은 eBPF로 HostPort가 동작하도록 지원하는데, 이 기능을 사용하도록 Cilium 설정을 변경했다. 하지만 Worker Node의 커널 버전이 필수 버전보다 낮아서 이 기능을 사용할 수 없었다. 그래서 최종적으로 chainMode를 통해서 portmap CNI plugin을 사용하도록 설정을 하였다. 이번에는 portmap binary file이 Worker Node에 기본적으로 없어서 소스코드로 build해서 집어 넣었다. 최종적으로 Iptable Rule을 통해서 Port binding이 적용된 것을 확인하였다.","slug":"20240207-cilium-host-port"}],"tag":"cilium"},"__N_SSG":true}