{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var t=n=>c(n,\"__esModule\",{value:!0});var N=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),u=(n,s)=>{t(n);for(var l in s)c(n,l,{get:s[l],enumerable:!0})},k=(n,s,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let a of p(s))!m.call(n,a)&&a!==\"default\"&&c(n,a,{get:()=>s[a],enumerable:!(l=d(s,a))||l.enumerable});return n},g=n=>k(t(c(n!=null?r(h(n)):{},\"default\",n&&n.__esModule&&\"default\"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var o=N((V,i)=>{i.exports=_jsx_runtime});var v={};u(v,{default:()=>f,frontmatter:()=>y});var e=g(o()),y={title:\"Vault Audit Log\\uB97C \\uB0A8\\uAE30\\uAE30\",date:\"2024-07-13\",tags:[\"vault\",\"devsecops\"],images:[\"/static/images/social-banner.png\"],summary:\"Vault\\uC5D0\\uC11C \\uB2E4\\uC591\\uD55C credentials\\uB97C \\uBCF4\\uAD00\\uD558\\uAC8C \\uB41C\\uB2E4. \\uB530\\uB77C\\uC11C \\uC5B4\\uB5A4 \\uC811\\uADFC\\uB4E4\\uC774 \\uC788\\uC5C8\\uB294\\uC9C0 Audit Log\\uB4E4\\uC744 \\uB0A8\\uACA8\\uC11C \\uAD00\\uB9AC\\uD558\\uACE0 \\uC2F6\\uC5C8\\uB2E4. Vault\\uC5D0\\uC11C Audit Device \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uC5EC\\uC11C file, syslog, socket\\uB4F1\\uC73C\\uB85C Vault API \\uC694\\uCCAD\\uACFC \\uC751\\uB2F5\\uC744 \\uB85C\\uADF8\\uB85C \\uB0A8\\uAE38 \\uC218 \\uC788\\uB2E4. socket\\uC740 log \\uC190\\uC2E4\\uC758 \\uC704\\uD5D8\\uC774 \\uC788\\uACE0, syslog\\uB294 Vault Pod\\uC5D0\\uC11C \\uCD94\\uAC00\\uC801\\uC778 package\\uC124\\uCE58\\uC640 \\uC124\\uC815\\uC774 \\uD544\\uC694\\uD558\\uB2E4. \\uB530\\uB77C\\uC11C Kubernetes\\uC5D0\\uC11C Vault\\uB97C \\uC6B4\\uC601\\uD558\\uB294 \\uACFC\\uC815\\uC5D0\\uC11C file \\uBC29\\uC2DD\\uC73C\\uB85C Audit log\\uB97C \\uB0A8\\uACA8\\uBCF4\\uC558\\uB2E4.\"};function b(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(l,{})})):l();function l(){let a=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",pre:\"pre\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(a.p,{children:[\"\\uC774\\uBC88\\uC5D0\\uB294 Kubernetes\\uC5D0\\uC11C Vault\\uB97C \\uC6B4\\uC601\\uD560 \\uB54C Audit log\\uB97C \\uB0A8\\uAE30\\uB294 \\uBC29\\uBC95\\uC744 \\uC54C\\uC544\\uBCF8\\uB2E4. Vault\\uC5D0\\uC11C Audit \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uC5EC API \\uC694\\uCCAD\\uACFC \\uC751\\uB2F5\\uC744 Log\\uB85C \\uB0A8\\uAE38 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(a.a,{href:\"https://developer.hashicorp.com/vault/docs/audit\",children:\"Vault \\uACF5\\uC2DD \\uBB38\\uC11C\"}),\"\\uC5D0\\uC11C \\uCE5C\\uC808\\uD558\\uAC8C \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(a.h2,{id:\"file-audit-device-\\uC0AC\\uC6A9\",children:[(0,e.jsx)(a.a,{href:\"#file-audit-device-\\uC0AC\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"File audit device \\uC0AC\\uC6A9\"]}),(0,e.jsxs)(a.p,{children:[(0,e.jsx)(a.a,{href:\"https://github.com/hashicorp/vault-helm/blob/main/values.yaml\",children:\"Vault\\uB97C Helm Chart\"}),\"\\uB85C \\uC124\\uCE58\\uD560 \\uB54C, \",(0,e.jsx)(a.code,{children:\"auditStorage\"}),\"\\uC758 \",(0,e.jsx)(a.code,{children:\"enabled\"}),\"\\uB97C true\\uB85C \\uC124\\uC815\\uD558\\uBA74 PVC\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4. \\uADF8\\uB9AC\\uACE0 mount path\\uB294 \",(0,e.jsx)(a.code,{children:\"/vault/audit\"}),\"\\uC774 \\uB41C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"auditStorage\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean important\",children:\"false\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Size of the PVC created\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"size\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` 10Gi\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Location where the PVC will be mounted.\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"/vault/audit\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Name of the storage class to use.  If null it will use the\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# configured default Storage Class.\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"storageClass\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Access Mode of the storage device being used for the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"accessMode\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Annotations to apply to the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"annotations\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Labels to apply to the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(a.p,{children:[\"vault\\uC5D0\\uC11C audit \\uAE30\\uB2A5\\uC744 \\uC0AC\\uC6A9\\uD558\\uB3C4\\uB85D CLI\\uB85C \\uC124\\uC815\\uD560 \\uB54C \",(0,e.jsx)(a.code,{children:\"file_path\"}),\"\\uB97C \\uC124\\uC815\\uD558\\uAC8C \\uB41C\\uB2E4. \\uC704\\uC5D0\\uC11C mount\\uB41C volume\\uC758 path\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault audit \",(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"enable\"}),\" -path\",(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(a.span,{className:\"token string\",children:'\"vault_audit\"'}),\" \",(0,e.jsx)(a.span,{className:\"token function\",children:\"file\"}),\" \",(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"file_path\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/vault/audit/audit.log\n`]})})}),(0,e.jsx)(a.p,{children:\"audit list \\uBA85\\uB839\\uC5B4\\uB85C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uB4F1\\uB85D\\uB418\\uBA74 \\uC544\\uB798\\uCC98\\uB7FC audit device \\uBAA9\\uB85D\\uC744 \\uBCFC \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(a.span,{className:\"code-line\",children:`$ vault audit list\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`Path              Type    Description\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`----              ----    -----------\n`}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault_audit/    \",(0,e.jsx)(a.span,{className:\"token function\",children:\"file\"}),`    n/a\n`]})]})}),(0,e.jsxs)(a.p,{children:[(0,e.jsx)(a.a,{href:\"https://github.com/hashicorp/vault-helm/blob/main/values.yaml\",children:\"Vault\\uB97C Helm Chart\"}),\"\\uC5D0\\uC11C \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \",(0,e.jsx)(a.code,{children:\"dataStorage\"}),\"\\uC758 \",(0,e.jsx)(a.code,{children:\"enabled\"}),\"\\uAC00 true\\uB85C \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0, PVC\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0 Volume\\uC774 \",(0,e.jsx)(a.code,{children:\"/vault/data\"}),\" \\uACBD\\uB85C\\uC5D0 \\uB9C8\\uC6B4\\uD305 \\uB41C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"dataStorage\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Size of the PVC created\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"size\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` 10Gi\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Location where the PVC will be mounted.\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"/vault/data\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Name of the storage class to use.  If null it will use the\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# configured default Storage Class.\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"storageClass\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token important null\",children:\"null\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Access Mode of the storage device being used for the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"accessMode\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),` ReadWriteOnce\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Annotations to apply to the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"annotations\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token comment\",children:\"# Labels to apply to the PVC\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(a.p,{children:[\"\\uADF8\\uB9AC\\uACE0 Vault\\uC758 High Availability \\uC124\\uC815\\uC744 \\uD558\\uACE0, storage\\uB97C \",(0,e.jsx)(a.code,{children:\"raft\"}),\"\\uB85C \\uC124\\uC815\\uD558\\uBA74 Vault Node\\uB4E4\\uC774 Raft\\uB97C \\uD1B5\\uD574\\uC11C data\\uB4E4\\uC774 \\uBCF5\\uC81C\\uB41C\\uB2E4. Raft\\uC744 \\uD1B5\\uD574\\uC11C data\\uAC00 \\uAC01 Vault Node\\uB4E4\\uC5D0 \\uC800\\uC7A5\\uB418\\uB294 \\uACBD\\uB85C\\uB97C \\uC704\\uC5D0\\uC11C \\uB9C8\\uC6B4\\uD305 \\uB41C Volume \\uACBD\\uB85C\\uC778 \",(0,e.jsx)(a.code,{children:\"/vault/data\"}),\"\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-yaml\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"ha\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"replicas\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token number\",children:\"3\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"raft\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"setNodeId\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsx)(a.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"\t\t\",(0,e.jsx)(a.span,{className:\"token atrule key\",children:\"config\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\t\t\t...\\uC0DD\\uB7B5\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\t\t\tstorage \"raft\" {\n`})}),(0,e.jsx)(a.span,{className:\"code-line\",children:(0,e.jsx)(a.span,{className:\"token string scalar\",children:`\t\t\t\tpath = \"/vault/data\"\n`})}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token string scalar\",children:\"\t\t\t}\"}),`\n`]})]})}),(0,e.jsxs)(a.p,{children:[\"\\uC774\\uB807\\uAC8C \",(0,e.jsx)(a.code,{children:\"replica\"}),\"\\uAC00 \",(0,e.jsx)(a.code,{children:\"3\"}),\"\\uC73C\\uB85C \\uC124\\uC815\\uB418\\uC5C8\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC544\\uB798\\uC758 \\uBA85\\uB839\\uC5B4\\uB85C \\uD655\\uC778\\uD558\\uBA74 \\uC138 \\uAC1C\\uC758 Node\\uAC00 \\uBAA9\\uB85D\\uC5D0 \\uB098\\uC624\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(a.span,{className:\"code-line\",children:`$ vault operator raft list-peers\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`Node       Address                        State       Voter\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`----       -------                        -----       -----\n`}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault-0    vault-0.vault-internal:8201    follower    \",(0,e.jsx)(a.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault-1    vault-1.vault-internal:8201    leader      \",(0,e.jsx)(a.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault-2    vault-2.vault-internal:8201    follower    \",(0,e.jsx)(a.span,{className:\"token boolean\",children:\"true\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"Vault Leader Node\\uAC00 \\uC694\\uCCAD\\uC744 \\uCC98\\uB9AC\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uC704\\uC5D0\\uC11C leader \\uC5ED\\uD560\\uC758 vault-1 Node\\uC5D0 audit log\\uAC00 \\uC800\\uC7A5\\uB41C\\uB2E4. vault-1 container\\uC5D0 \\uC811\\uC18D\\uD558\\uC5EC \\uD30C\\uC77C\\uC744 \\uD655\\uC778\\uD574\\uBCF8\\uB2E4.\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"kubectl \",(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"exec\"}),` -it vault-1 -- /bin/sh\n`]})})}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(a.span,{className:\"token function\",children:\"ls\"}),` /vault/audit/\n`]}),(0,e.jsx)(a.span,{className:\"code-line\",children:`audit.log\n`})]})}),(0,e.jsxs)(a.p,{children:[\"Vault\\uC5D0\\uC11C secret \\uC815\\uBCF4\\uB4E4\\uC744 \\uAC00\\uC838\\uC624\\uBA74 \",(0,e.jsx)(a.code,{children:\"audit.log\"}),\"\\uC5D0 \\uC544\\uB798\\uC640 \\uAC19\\uC740 log\\uAC00 \\uB0A8\\uC740 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4. Log\\uC5D0 \\uB0A8\\uB294 \\uBE44\\uBC00 \\uC815\\uBCF4\\uC758 \\uACBD\\uC6B0\\uC5D0\\uB294 hmac\\uC73C\\uB85C hash \\uCC98\\uB9AC\\uB418\\uC5B4 \\uC788\\uB2E4. (hash\\uAC12\\uC740 \",(0,e.jsx)(a.a,{href:\"https://developer.hashicorp.com/vault/api-docs/system/audit-hash\",children:\"/sys/audit-hash\"}),\" API\\uB97C \\uC0AC\\uC6A9\\uD574\\uC11C \\uCC98\\uB9AC\\uAC00 \\uB418\\uACE0, audit device\\uB97C \\uC0C8\\uB85C \\uC0DD\\uC131\\uD558\\uBA74 \\uC0C8\\uB85C\\uC6B4 salt\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.) \\uADF8\\uB9AC\\uACE0 vault \\uC778\\uC99D \\uBC29\\uBC95\\uC744 userpass\\uB85C \\uD588\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC5B4\\uB5A4 username\\uC73C\\uB85C \\uC811\\uADFC\\uC744 \\uD588\\uB294\\uC9C0\\uB3C4 Log\\uB97C \\uD1B5\\uD574\\uC11C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-json\",children:(0,e.jsxs)(a.code,{className:\"code-highlight language-json\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"time\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"2024-07-12T23:53:50.294066904Z\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"type\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"response\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"auth\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"client_token\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:936a185caaa266bb9cbe981e9e05cb78cd732b0b3280eb944412bb6f8f8f07af\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"accessor\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:bb136af09813f2b2ac32f44a32379d5e66ec62022f4d9f557fdc606f8e35b996\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"display_name\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"userpass-myuser\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"policies\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(a.span,{className:\"token string\",children:'\"default\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"example\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"token_policies\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(a.span,{className:\"token string\",children:'\"default\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"example\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"policy_results\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"allowed\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean\",children:\"true\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"granting_policies\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"name\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"example\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"namespace_id\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"root\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"type\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"acl\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"metadata\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"username\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"myuser\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"entity_id\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"a9fe7d93-2312-38cf-fw83-5e4a1a9c86c8\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"token_type\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"service\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"token_ttl\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token number\",children:\"2764800\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"token_issue_time\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"2024-07-12T23:16:30Z\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"request\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"id\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"cf25e9c9-5e9d-edf6-2b7k-61e9d48d5caa\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"client_id\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"a9fe7d93-2312-38cf-fw83-5e4a1a9c86c8\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"operation\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"read\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_point\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"sample/\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_type\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"kv\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_accessor\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"kv_0d071af0\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_running_version\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"v0.16.1+builtin\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_class\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"secret\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"client_token\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:936a185caaa266bb9cbe981e9e05cb78cd732b0b3280eb944412bb6f8f8f07af\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"client_token_accessor\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:bb136af09813f2b2ac32f44a32379d5e66ec62022f4d9f557fdc606f8e35b996\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"namespace\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"id\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"root\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"path\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"sample/data/hello\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"remote_address\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"10.70.7.27\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"remote_port\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token number\",children:\"40766\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"response\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_point\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"sample/\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_type\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"kv\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_accessor\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"kv_0d071af0\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_running_plugin_version\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"v0.16.1+builtin\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"mount_class\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"secret\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"data\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"data\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"DUMMY\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:77c825c1329848f7ff467567365b15e027be7bcf720d9d1db86a6e4b0187a4a5\"'}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"metadata\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"created_time\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:a1aabe17c371bc59be05e18a7e494078d8ba93aa41346ef3cd07d68c47e7a66d\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"custom_metadata\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token null keyword\",children:\"null\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"deletion_time\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token string\",children:'\"hmac-sha256:764d7c9b6d83d95578dc1f839a386bfee7ad74e8cf5ca19255aa123aa8d63d2f\"'}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"destroyed\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token boolean\",children:\"false\"}),(0,e.jsx)(a.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(a.span,{className:\"token property\",children:'\"version\"'}),(0,e.jsx)(a.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(a.span,{className:\"token number\",children:\"8\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(a.h2,{id:\"container\\uC5D0\\uC11C-audit-log-\\uC218\\uC9D1\",children:[(0,e.jsx)(a.a,{href:\"#container\\uC5D0\\uC11C-audit-log-\\uC218\\uC9D1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"Container\\uC5D0\\uC11C audit log \\uC218\\uC9D1\"]}),(0,e.jsx)(a.p,{children:\"Vault File Audit Device\\uB97C \\uD1B5\\uD574\\uC11C audit log\\uB97C \\uD30C\\uC77C\\uB85C \\uC800\\uC7A5\\uD560 \\uC218 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD558\\uC600\\uB2E4. PVC\\uB97C \\uD1B5\\uD574\\uC11C \\uBCC4\\uB3C4\\uC758 Storage\\uC5D0 \\uD574\\uB2F9 log\\uB97C \\uC800\\uC7A5\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0, \\uD574\\uB2F9 Storage\\uB97C \\uC8FC\\uAE30\\uC801\\uC73C\\uB85C Snapshot\\uD558\\uC5EC \\uBCF4\\uAD00\\uD560 \\uC218 \\uC788\\uB2E4. \\uD558\\uC9C0\\uB9CC \\uC774\\uB807\\uAC8C \\uAD6C\\uC131\\uD588\\uC744 \\uB54C audit log\\uB97C \\uC885\\uD569\\uC801\\uC73C\\uB85C \\uAD00\\uB9AC\\uD558\\uACE0 \\uAC80\\uC0C9\\uD558\\uB294 \\uAC83\\uC774 \\uC5B4\\uB835\\uB2E4.\"}),(0,e.jsxs)(a.p,{children:[\"Kubernetes\\uC5D0\\uC11C \\uC6B4\\uC601\\uD558\\uACE0 \\uC788\\uAE30 \\uB54C\\uBB38\\uC5D0 Pod\\uC758 stdout, stderr\\uB85C \\uBCF4\\uB0B4\\uB294 \\uB85C\\uADF8\\uB4E4\\uC744 \\uB2E4\\uC591\\uD55C Log \\uC218\\uC9D1 Tool\\uC744 \\uD1B5\\uD574\\uC11C \\uC27D\\uAC8C \\uC218\\uC9D1\\uD558\\uACE0 \\uAC80\\uC0C9\\uD560 \\uC218 \\uC788\\uB2E4. \\uB530\\uB77C\\uC11C Vault audit log\\uB97C file\\uB85C \\uC800\\uC7A5\\uD558\\uC9C0 \\uC54A\\uACE0 \\uBC14\\uB85C stdout\\uC73C\\uB85C \\uC124\\uC815\\uD558\\uBA74 \\uC774\\uB7EC\\uD55C \\uBB38\\uC81C\\uB97C \\uD574\\uACB0\\uD560 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(a.code,{children:\"file_path\"}),\" \\uC124\\uC815\\uAC12\\uC744 \",(0,e.jsx)(a.code,{children:\"stdout\"}),\"\\uC73C\\uB85C\\uB9CC \\uBC14\\uAFB8\\uBA74 \\uB41C\\uB2E4.\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"vault audit \",(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"enable\"}),\" -path\",(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(a.span,{className:\"token string\",children:'\"vault_audit_stdout\"'}),\" \",(0,e.jsx)(a.span,{className:\"token function\",children:\"file\"}),\" \",(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"file_path\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`stdout\n`]})})}),(0,e.jsxs)(a.h2,{id:\"\\uACB0\\uB860\",children:[(0,e.jsx)(a.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,e.jsx)(a.p,{children:\"\\uB2E4\\uD589\\uD788 Vault Opensource \\uBC84\\uC804\\uC5D0\\uC11C Audit Log\\uB97C \\uB0A8\\uAE38\\uC218 \\uC788\\uB294 \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. Audit Device\\uB85C file, syslog, socket\\uB4F1\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. Socket\\uC740 log \\uC190\\uC2E4 \\uAC00\\uB2A5\\uC131\\uC774 \\uC788\\uACE0, syslog\\uB294 Vault Pod\\uC5D0\\uC11C \\uCD94\\uAC00\\uC801\\uC778 \\uD328\\uD0A4\\uC9C0 \\uC124\\uCE58\\uC640 \\uC124\\uC815\\uC774 \\uD544\\uC694\\uD558\\uB2E4. \\uB530\\uB77C\\uC11C file\\uB85C audit log\\uB97C \\uB0A8\\uAE30\\uB294 \\uAC83\\uC744 \\uC120\\uD0DD\\uD558\\uC600\\uB2E4. \\uADF8\\uB9AC\\uACE0 \\uC2E4\\uC81C\\uB85C audit.log \\uD30C\\uC77C\\uB85C \\uB0A8\\uAE38\\uB54C disk \\uC6A9\\uB7C9\\uC774 \\uAF49\\uCC28\\uAC8C \\uB418\\uBA74 Vault \\uC7A5\\uC560\\uB97C \\uAC00\\uC838\\uC624\\uAC8C \\uB41C\\uB2E4. Vault\\uC5D0\\uC11C log rotation\\uC740 \\uC81C\\uACF5\\uD558\\uC9C0 \\uC54A\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uBCC4\\uB3C4\\uC758 tool\\uC744 \\uD1B5\\uD574\\uC11C \\uC124\\uC815\\uC744 \\uD574\\uC57C \\uD55C\\uB2E4. Kubernetes\\uC5D0\\uC11C Vault\\uB97C \\uC6B4\\uC601\\uC911\\uD55C\\uB2E4\\uBA74 Log\\uB97C \\uC218\\uC9D1\\uD558\\uACE0 \\uAC80\\uC0C9\\uD558\\uB294 \\uB3C4\\uAD6C\\uB4E4\\uC774 \\uC774\\uBBF8 \\uAC16\\uCDB0\\uC788\\uC744 \\uAC00\\uB2A5\\uC131\\uC774 \\uB192\\uB2E4. \\uB530\\uB77C\\uC11C Vault audit log\\uB97C stdout\\uC73C\\uB85C \\uB0A8\\uACA8\\uC11C \\uC774\\uB7EC\\uD55C \\uB3C4\\uAD6C\\uB4E4\\uC774 \\uC218\\uC9D1\\uD558\\uACE0 \\uC885\\uD569\\uC801\\uC73C\\uB85C \\uAD00\\uB9AC\\uD558\\uB294 \\uBC29\\uC2DD\\uC73C\\uB85C \\uC9C4\\uD589\\uD560 \\uC218 \\uC788\\uB2E4.\"})]})}}var f=b;return v;})();\n;return Component;","toc":[{"value":"File audit device 사용","url":"#file-audit-device-사용","depth":2},{"value":"Container에서 audit log 수집","url":"#container에서-audit-log-수집","depth":2},{"value":"결론","url":"#결론","depth":2}],"frontMatter":{"readingTime":{"text":"7 min read","minutes":6.33,"time":379800,"words":1266},"slug":"20240713-vault-audit","fileName":"20240713-vault-audit.md","title":"Vault Audit Log를 남기기","date":"2024-07-13T00:00:00.000Z","tags":["vault","devsecops"],"images":["/static/images/social-banner.png"],"summary":"Vault에서 다양한 credentials를 보관하게 된다. 따라서 어떤 접근들이 있었는지 Audit Log들을 남겨서 관리하고 싶었다. Vault에서 Audit Device 기능을 제공하여서 file, syslog, socket등으로 Vault API 요청과 응답을 로그로 남길 수 있다. socket은 log 손실의 위험이 있고, syslog는 Vault Pod에서 추가적인 package설치와 설정이 필요하다. 따라서 Kubernetes에서 Vault를 운영하는 과정에서 file 방식으로 Audit log를 남겨보았다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"ModSecurity를 Nginx Ingress Controller에 연동하여 WAF 설정하기","date":"2024-06-15T00:00:00.000Z","tags":["kubernetes","nginx","modsecurity","devsecops"],"images":["/static/images/social-banner.png"],"summary":"ModSecurity는 오픈소스로 제공하는 WAF이다. Nginx connector를 통해서 ModSecurity를 Nginx에 쉽게 연동할 수 있다. Nginx Ingress Controller에서는 해당 설정을 할 수 있도록 Configmap에 설정 옵션들을 제공한다. 해당 옵션들을 설정함으로서 쉽게 Nginx에 WAF를 구현할 수 있다. ModSecurity는 Trustware라는 회사가 관리하다가 2024년 1월에 OWASP foundation으로 넘어가게 되었다. ModSecurity는 오래된 프로젝트이고, Production Ready라고 소개되고 있다. 하지만 ModSecurity가 앞으로도 계속 커뮤니티를 통해서 활발히 관리될지는 지켜봐야겠다.","slug":"20240615-modsecurity"},"next":{"title":"Distroless Image에 Package 추가하기","date":"2024-07-13T00:00:00.000Z","tags":["kubernetes","distroless","devsecops"],"images":["/static/images/social-banner.png"],"summary":"컨테이너 이미지에 최소한으로 필요한 software만 포함하는 것이 보안적으로 모범사례이다. 이러한 모범사례를 따르는 가장 쉽고 합리적인 방법은 구글에서 제공하는 Distroless Image를 활용하는 것이다. Distroless Image는 nonroot, debug, debug-nonroot Tag를 가지고 있다. nonroot은 conatiner에게 root 권한을 주지않고, shell도 없어서 Terminal로 접속이 불가능하다. 그런데 Distroless Image에 추가로 필요한 debian package를 설치하면 어떻게 해야할까? 이번 글에서는 bazel로 빌드할 때 원하는 debian package를 추가하는 방법을 알아 본다.","slug":"20240713-add-package-to-distroless-image"}},"__N_SSG":true}