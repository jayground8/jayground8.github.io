{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var h=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!u.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},S=a=>k(t(l(a!=null?o(m(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var i=h((M,r)=>{r.exports=_jsx_runtime});var v={};N(v,{default:()=>A,frontmatter:()=>g});var e=S(i()),g={title:\"AWS SAM\\uC73C\\uB85C \\uBC30\\uD3EC\\uD55C Lambda\\uC758 \\uD658\\uACBD\\uBCC0\\uC218\\uAC00 \\uBCC0\\uACBD\\uB41C Secret Manager \\uAC12\\uC73C\\uB85C \\uBC18\\uC601\\uC774 \\uC548\\uB418\\uB294 \\uBB38\\uC81C\",date:\"2023-12-17\",tags:[\"AWS\"],images:[\"/static/images/social-banner.png\"],summary:\"AWS Cloudformation\\uC5D0\\uC11C Secret Manager\\uC758 \\uAC12\\uC744 \\uCC38\\uC870\\uD558\\uB3C4\\uB85D \\uD560 \\uC218 \\uC788\\uB2E4. AWS SAM\\uC744 \\uC0AC\\uC6A9\\uD558\\uC5EC \\uBC30\\uD3EC\\uB41C Lambda\\uC758 \\uD658\\uACBD\\uBCC0\\uC218\\uAC00 Secret Manager\\uC758 \\uAC12\\uC744 \\uCC38\\uC870\\uD558\\uB294 \\uACBD\\uC6B0\\uAC00 \\uC788\\uC5C8\\uB2E4. \\uADF8\\uB7F0\\uB370 Secret manager\\uC758 \\uAC12\\uC744 \\uBCC0\\uACBD\\uD558\\uC5EC \\uB2E4\\uC2DC \\uBC30\\uD3EC\\uD558\\uC5EC\\uB3C4 \\uBCC0\\uACBD\\uB41C \\uAC12\\uC774 Lambda \\uD658\\uACBD\\uBCC0\\uC218\\uC5D0 \\uBC18\\uC601\\uC774 \\uB418\\uC9C0 \\uC54A\\uC558\\uB2E4.\\u{1F9D0} AWS SAM\\uC758 \\uB9AC\\uD3EC\\uC5D0 \\uAD00\\uB828\\uB41C Issue\\uAC00 \\uC788\\uC5C8\\uACE0, \\uC81C\\uC548\\uD55C \\uD574\\uACB0\\uBC29\\uBC95\\uC744 \\uC801\\uC6A9\\uD558\\uC600\\uB2E4. \\uC0B4\\uC9DD \\uC0BD\\uC9C8\\uC744 \\uD588\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uAE30\\uB85D\\uC744 \\uB0A8\\uACA8 \\uBCF8\\uB2E4.\\u{1F92A}\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({p:\"p\",a:\"a\",pre:\"pre\",code:\"code\",span:\"span\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"AWS SAM Template\\uC73C\\uB85C Serverless Architecture\\uB97C \\uAD6C\\uC131\\uD560 \\uB54C, Lambda\\uC758 Runtime\\uC911\\uC5D0 AWS Secret Manager\\uC5D0\\uC11C credential\\uC744 \\uAC00\\uC9C0\\uACE0 \\uC624\\uB294 \\uAC83\\uC774 \\uC544\\uB2C8\\uB77C Environment Variable\\uC5D0 crendential\\uC744 \\uB123\\uC5B4\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 \\uACBD\\uC6B0\\uAC00 \\uC788\\uC5C8\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/dynamic-references.html\",children:\"Cloudformation\\uC5D0\\uC11C Secret Manager\\uC5D0 \\uC800\\uC7A5\\uB41C Value\\uB97C \\uCC38\\uC870\\uD574\\uC11C resource\\uB97C \\uC0DD\\uC131\\uD558\\uB294 \\uBC29\\uBC95\"}),\"\\uC744 \\uC81C\\uACF5\\uD55C\\uB2E4. Secret Manager\\uB97C \\uC0AC\\uC6A9\\uD560 \\uACBD\\uC6B0 \\uC544\\uB798\\uCC98\\uB7FC \\uC791\\uC131\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Sample\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" AWS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"Serverless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`Function\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Properties\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"CodeUri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sample/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` app.lambdaHandler\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Runtime\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nodejs18.x\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Architectures\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` x86_64\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Variables\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"SECRET\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'{{resolve:secretsmanager:secretName:SecretString:keyName}}'\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"AWS Secret manager Console\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uB294 secret\\uC758 version ID\\uB97C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4. \",(0,e.jsx)(n.code,{children:\"{{resolve:secretsmanager:secretName:SecretString:keyName}}\"}),\"\\uC5D0\\uC11C version id\\uB97C \\uBA85\\uC2DC\\uC801\\uC73C\\uB85C \\uC815\\uC758\\uD558\\uC9C0 \\uC54A\\uC73C\\uBA74 AWSCURRENT\\uAC00 default\\uB85C \\uC124\\uC815\\uB41C\\uB2E4. \\uB530\\uB77C\\uC11C Secret\\uC758 value\\uB97C \\uC218\\uC815\\uD588\\uC73C\\uBA74, \\uCD5C\\uC2E0\\uC758 \\uC218\\uC815\\uB41C version id\\uAC00 \\uC790\\uB3D9\\uC73C\\uB85C \\uC801\\uC6A9\\uB41C\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/resolve-secret-manager.png\",alt:\"aws secret manager version id\"}),(0,e.jsxs)(n.p,{children:[\"\\uC608\\uB97C \\uB4E4\\uC5B4\\uC11C Secret \",(0,e.jsx)(n.code,{children:\"secretName\"}),\"\\uC758 \",(0,e.jsx)(n.code,{children:\"keyName\"}),\" \\uAC12\\uC744 \\uBCC0\\uACBD\\uD558\\uACE0, SAM Template\\uC744 \\uC801\\uC6A9\\uD558\\uBA74 Lambda\\uC758 Environment Variable\\uC774 \\uBCC0\\uACBD\\uB41C \\uAC12\\uC73C\\uB85C \\uBC18\\uC601\\uB420 \\uAC70\\uB77C \\uAE30\\uB300\\uB97C \\uD588\\uB2E4. \\uADF8\\uB7F0\\uB370 Lambda\\uAC00 Update \\uB418\\uC5C8\\uB294\\uB370\\uB3C4, \\uBCC0\\uACBD\\uB41C Secret \\uAC12\\uC774 \\uBC18\\uC601\\uB418\\uC9C0 \\uC54A\\uACE0 \\uC774\\uC804 \\uAC12\\uACFC \\uB3D9\\uC77C\\uD558\\uAC8C \\uC720\\uC9C0\\uB418\\uC5C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\uCC3E\\uC544\\uBCF4\\uB2C8 \\uAD00\\uB828\\uB41C \",(0,e.jsx)(n.a,{href:\"https://github.com/aws/serverless-application-model/issues/1267\",children:\"SAM Github Repository\\uC5D0 issue\"}),\"\\uAC00 \\uC788\\uC5C8\\uACE0, Secret Manager\\uCC98\\uB7FC \\uCC38\\uC870\\uB41C \\uD658\\uACBD\\uBCC0\\uC218\\uB9CC \\uBCC0\\uACBD\\uB420 \\uACBD\\uC6B0\\uC5D0\\uB294 \\uC0C8\\uB85C\\uC6B4 \\uAC12\\uC774 \\uBC18\\uC601\\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4. \\uD604\\uC7AC\\uC758 \\uD574\\uACB0\\uBC29\\uBC95\\uC73C\\uB85C Environment Variable\\uC5D0 \\uD56D\\uC0C1 \\uBC14\\uB00C\\uB294 \\uAC12\\uC744 \\uC8FC\\uC785\\uD558\\uB294 \\uAC83\\uC744 \\uACF5\\uC720\\uD558\\uACE0 \\uC788\\uB2E4. Github Action\\uC744 \\uC0AC\\uC6A9\\uD560 \\uB54C\\uB294 \",(0,e.jsx)(n.code,{children:\"GITHUB_SHA\"}),\" \\uD658\\uACBD\\uBCC0\\uC218\\uB97C Revision parameter\\uC5D0 \\uC8FC\\uC785\\uD558\\uAC8C \\uB418\\uC5C8\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Parameters\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Revision\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` String\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Sample\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" AWS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"Serverless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`Function\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Properties\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"CodeUri\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sample/\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Handler\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` app.lambdaHandler\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Runtime\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nodejs18.x\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Architectures\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` x86_64\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"Variables\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"SECRET\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'{{resolve:secretsmanager:secretName:SecretString:keyName}}'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"REVISION\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token tag\",children:\"!Ref\"}),` Revision\n`]})]})})]})}}var A=y;return v;})();\n;return Component;","toc":[],"frontMatter":{"readingTime":{"text":"2 min read","minutes":1.98,"time":118800,"words":396},"slug":"20231217-aws-sam-resolve-issue","fileName":"20231217-aws-sam-resolve-issue.md","title":"AWS SAMìœ¼ë¡œ ë°°í¬í•œ Lambdaì˜ í™˜ê²½ë³€ìˆ˜ê°€ ë³€ê²½ëœ Secret Manager ê°’ìœ¼ë¡œ ë°˜ì˜ì´ ì•ˆë˜ëŠ” ë¬¸ì œ","date":"2023-12-17T00:00:00.000Z","tags":["AWS"],"images":["/static/images/social-banner.png"],"summary":"AWS Cloudformationì—ì„œ Secret Managerì˜ ê°’ì„ ì°¸ì¡°í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. AWS SAMì„ ì‚¬ìš©í•˜ì—¬ ë°°í¬ëœ Lambdaì˜ í™˜ê²½ë³€ìˆ˜ê°€ Secret Managerì˜ ê°’ì„ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤. ê·¸ëŸ°ë° Secret managerì˜ ê°’ì„ ë³€ê²½í•˜ì—¬ ë‹¤ì‹œ ë°°í¬í•˜ì—¬ë„ ë³€ê²½ëœ ê°’ì´ Lambda í™˜ê²½ë³€ìˆ˜ì— ë°˜ì˜ì´ ë˜ì§€ ì•Šì•˜ë‹¤.ğŸ§ AWS SAMì˜ ë¦¬í¬ì— ê´€ë ¨ëœ Issueê°€ ìˆì—ˆê³ , ì œì•ˆí•œ í•´ê²°ë°©ë²•ì„ ì ìš©í•˜ì˜€ë‹¤. ì‚´ì§ ì‚½ì§ˆì„ í–ˆê¸° ë•Œë¬¸ì— ê¸°ë¡ì„ ë‚¨ê²¨ ë³¸ë‹¤.ğŸ¤ª"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"Jaemyun Lee","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"Argo CD Notificationìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ Slack ì•Œë¦¼ ë³´ë‚´ê¸°","date":"2023-12-14T00:00:00.000Z","tags":["Kubernetes","ArgoCD"],"images":["/static/images/social-banner.png"],"summary":"Argo CD Notificationê°€ ì´ë¯¸ ìˆì–´ì„œ ì‰½ê²Œ Slack ì•Œë¦¼ì„ ì—°ë™í•  ìˆ˜ ìˆë‹¤. ë©”ë‰´ì–¼ì—ì„œ ì¹œì ˆí•˜ê²Œ ì…‹íŒ… ë°©ë²•ì„ ì„¤ëª…í•˜ê³  ìˆì§€ë§Œ, ì²˜ìŒ ë³´ê³  ì…‹íŒ…í•  ë•Œ ë†“ì¹  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸´ë‹¤.","slug":"20231214-argocd-notification"},"next":{"title":"vault secrets operator ì‚¬ìš©í•´ë³´ê¸°","date":"2023-12-22T00:00:00.000Z","tags":["Kubernetes","vault"],"images":["/static/images/social-banner.png"],"summary":"GitOpsì—ì„œ Secretì„ ì–´ë–»ê²Œ ê´€ë¦¬í• ì§€ ê³ ë¯¼ì„ í•˜ì˜€ê³ , ê°œë°œìë“¤ì˜ ì¸ì§€ë¶€í•˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œ Vault UIë¡œ ìì‹ ì˜ ì•±ì˜ ë¹„ë°€ê°’ì„ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì œì¼ íš¨ìœ¨ì ì´ë¼ëŠ” íŒë‹¨ì„ í–ˆë‹¤. Vault secrets operatorê°€ GAë¡œ ê³µìœ ê°€ ë˜ì—ˆê³ , Secrets Store CSIë‚˜ External secrets í”„ë¡œì íŠ¸ë³´ë‹¤ ê¹”ê¸ˆí•œ ë°©ì‹ì´ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. Vault secrets operatorì˜ CRDë¡œ vault secretê³¼ kubernetes secretì˜ syncë¥¼ ë§ì¶”ê³ , reloaderë¡œ secretì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ë‹¤ì‹œ podë¥¼ ë°°í¬í•˜ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸í•´ë³´ì•˜ë‹¤.","slug":"20231222-vault-on-k8s"}},"__N_SSG":true}