{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=>c(a,\"__esModule\",{value:!0});var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{i(a);for(var l in s)c(a,l,{get:s[l],enumerable:!0})},k=(a,s,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!m.call(a,n)&&n!==\"default\"&&c(a,n,{get:()=>s[n],enumerable:!(l=d(s,n))||l.enumerable});return a},y=a=>k(i(c(a!=null?o(p(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=u((S,t)=>{t.exports=_jsx_runtime});var v={};N(v,{default:()=>f,frontmatter:()=>g});var e=y(r()),g={title:\"Writing Helm Values With Gemini\",date:\"2025-07-19\",tags:[\"kubernetes\",\"heml\",\"Gemini\"],images:[\"/static/images/thumbnail/writing-helm-values-with-gemini.png\"],summary:\"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly.\"};function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",pre:\"pre\",blockquote:\"blockquote\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"installing-sentry-with-helm-chart\",children:[(0,e.jsx)(n.a,{href:\"#installing-sentry-with-helm-chart\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Installing Sentry With Helm Chart\"]}),(0,e.jsx)(n.p,{children:\"Sentry provides a self-hosting option under a license that allows free usage, as long as you\\u2019re not selling a product that includes Sentry. They offer a script and a Docker Compose file that make it easy to install all necessary components on your server.\"}),(0,e.jsxs)(n.p,{children:[\"If you want to run self-hosted Sentry on a Kubernetes cluster, you can use the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml\",children:\"Sentry Helm Chart\"}),\". Thanks to this chart, deploying all components to your cluster is fast and straightforward.\"]}),(0,e.jsxs)(n.h2,{id:\"overriding-helm-values\",children:[(0,e.jsx)(n.a,{href:\"#overriding-helm-values\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Overriding Helm Values\"]}),(0,e.jsxs)(n.p,{children:[\"In my case, I needed to override the Helm values to set tolerations for all components in the self-hosted Sentry setup. If you check the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/values.yaml\",children:\"Sentry Chart values\"}),\", you\\u2019ll find the toleration configuration under the global section. You can add your required tolerations there.\"]}),(0,e.jsxs)(n.p,{children:[\"However, that\\u2019s not the whole story. If you look at the \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/blob/sentry-v26.21.0/charts/sentry/Chart.yaml\",children:\"Chart.yaml\"}),\", you\\u2019ll see that there are many dependent charts. The global configuration doesn\\u2019t automatically override tolerations for all of these dependencies, so you need to define them separately for each one.\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.code,{children:\"chart.yaml\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sentry\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"description\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` A Helm chart for Kubernetes\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` application\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 26.21.0\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"appVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 25.5.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dependencies\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` memcached\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 7.5.2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` sourcemaps.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` redis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 17.11.3\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` redis.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` kafka\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 29.3.14\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` kafka.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` clickhouse\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//sentry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`kubernetes.github.io/charts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3.14.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` clickhouse.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` zookeeper\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 11.4.11\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` zookeeper.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 11.16.2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"alias\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` rabbitmq.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` postgresql\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 12.5.1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` postgresql.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"repository\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" oci\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//registry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`1.docker.io/bitnamicharts\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 18.2.5\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` nginx.enabled\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"maintainers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" sentry\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`kubernetes\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"using-gemini\",children:[(0,e.jsx)(n.a,{href:\"#using-gemini\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Using Gemini\"]}),(0,e.jsx)(n.p,{children:\"Manually checking all the dependent chart values and adding tolerations can be a tedious task. So, I thought\\u2014why not leverage AI to help? I prompted Gemini 2.5 Pro on the Web Console with the following:\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsxs)(n.p,{children:[\"Please provide the values.yaml configuration to add tolerations to all components in the Sentry Helm chart, version 26.21.0. The chart can be found at: \",(0,e.jsx)(n.a,{href:\"https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry\",children:\"https://github.com/sentry-kubernetes/charts/tree/develop/charts/sentry\"}),\".\"]})}),(0,e.jsx)(n.p,{children:\"Gemini generated a fairly good values.yaml, but it wasn\\u2019t perfect. Even though I included the URL in the prompt, it didn\\u2019t seem to thoroughly check all the dependent charts.\"}),(0,e.jsx)(n.p,{children:\"For example, it included tolerations for Kafka like this. However, the Kafka chart doesn\\u2019t actually support a top-level tolerations configuration, so this wouldn\\u2019t work.\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kafka\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'your-key'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Exists'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"It also missed the fact that the global section can be used for all templates provided by the Sentry Helm chart itself, which could simplify the configuration. However, when I used the same prompt with Gemini later, it correctly recognized the global section and simply added the tolerations there.\"}),(0,e.jsxs)(n.h2,{id:\"giving-more-context\",children:[(0,e.jsx)(n.a,{href:\"#giving-more-context\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Giving More Context\"]}),(0,e.jsx)(n.p,{children:\"To address the issues mentioned earlier, I tried providing more context using the Gemini CLI. First, I downloaded the Sentry Helm chart along with all its dependent Helm charts.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-sh\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`helm repo add sentry https://sentry-kubernetes.github.io/charts\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`helm pull sentry/sentry --untar\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`helm dependency build sentry --skip-refresh\n`})]})}),(0,e.jsxs)(n.p,{children:[\"In Gemini CLI, you can include all files in a specific directory by using the \",(0,e.jsx)(n.code,{children:\"@\"}),\" symbol, like this:\"]}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"can you generate helm values.yaml to add tolerations to all compenents in sentry when I install it with sentry helm chart? all helm charts are located in @sentry you can generate\\xA0precise values.yaml with the files.\"})}),(0,e.jsx)(n.p,{children:\"At first, Gemini correctly identified the global configuration option and understood that it could be applied to all templates within the Sentry Helm chart. However, it missed adding tolerations to the dependent Helm charts.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-sh\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:` 1 # This values.yaml adds tolerations to all components deployed by the Sentry Helm chart.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 2 # You can customize the key, value, and effect to match the taints on your nodes.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 3 global:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 4   tolerations:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 5     # This toleration allows pods to be scheduled on nodes with the taint:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 6     # key: \"dedicated\", value: \"sentry\", effect: \"NoSchedule\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 7     - key: \"dedicated\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 8       operator: \"Equal\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:` 9       value: \"sentry\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`10       effect: \"NoSchedule\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`11     # This toleration allows pods to be scheduled on nodes with any taint that has the key \"project\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`12     # regardless of the taint's value, with effect \"NoExecute\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`13     - key: \"project\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`14       operator: \"Exists\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`15       effect: \"NoExecute\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`16\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`17 # You can also add tolerations to specific components if needed.\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`18 # For example, to add a toleration only to the web component:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`19 # sentry:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`20 #   web:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`21 #     tolerations:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`22 #       - key: \"web-only\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`23 #         operator: \"Exists\"\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`24 #         effect: \"NoSchedule\"\n`})]})}),(0,e.jsx)(n.p,{children:\"I then gave a more specific prompt to address that:\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"you need to add tolerations to dependent helm charts too.\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# This values.yaml adds a toleration to all Sentry components and their dependencies.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The toleration allows pods to be scheduled on nodes with the taint:\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:'# key: \"dedicated\", value: \"sentry\", effect: \"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"4\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# This global toleration applies to all Sentry-specific components\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"6\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# (web, workers, cron, relay, snuba, symbolicator, etc.) and hooks.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"7\"}),` global:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"8\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"9\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"11\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"12\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"13\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# The following sections apply the same toleration to each of the dependent charts.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"15\"}),` clickhouse:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"16\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"17\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"18\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"19\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"20\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"21\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"22\"}),` kafka:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"23\"}),`   controller:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"24\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"25\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"26\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"27\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"28\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"29\"}),`   broker:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"30\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"31\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"32\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"33\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"34\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"35\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"36\"}),` memcached:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"37\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"38\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"39\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"40\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"41\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"42\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"43\"}),` nginx:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"44\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"45\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"46\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"47\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"48\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"49\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"50\"}),` postgresql:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"51\"}),`   primary:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"52\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"53\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"54\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"55\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"56\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"57\"}),`   readReplicas:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"58\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"59\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"60\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"61\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"62\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"63\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"64\"}),` rabbitmq:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"65\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"66\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"67\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"68\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"69\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"70\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"71\"}),` redis:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"72\"}),`   master:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"73\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"74\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"75\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"76\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"77\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"78\"}),`   replica:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"79\"}),`     tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),\"       - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"81\"}),\"         operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"82\"}),\"         value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"83\"}),\"         effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"84\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"85\"}),` zookeeper:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"86\"}),`   tolerations:\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"87\"}),\"     - key: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dedicated\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"88\"}),\"       operator: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Equal\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"89\"}),\"       value: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"sentry\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token number\",children:\"90\"}),\"       effect: \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"NoSchedule\"'}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"This time, Gemini correctly set up tolerations for the Kafka dependent chart. I proceeded to install Sentry using the generated values.yaml file. However, the Kafka provisioning job wasn\\u2019t scheduled correctly due to taints on the node.\"}),(0,e.jsx)(n.p,{children:\"I prompted Gemini again to fix the issue, and it finally returned a working values.yaml file with all necessary tolerations correctly applied.\"}),(0,e.jsx)(n.blockquote,{children:(0,e.jsx)(n.p,{children:\"you missed adding tolearations to sentry-kafka-provisioning\"})}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kafka\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"controller\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"broker\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"provisioning\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tolerations\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"key\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'dedicated'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"operator\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Equal'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'sentry'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"effect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'NoSchedule'\"}),`\n`]})]})}),(0,e.jsxs)(n.h2,{id:\"burning-out-tokens\",children:[(0,e.jsx)(n.a,{href:\"#burning-out-tokens\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Burning Out Tokens\"]}),(0,e.jsx)(n.p,{children:\"Well, it didn\\u2019t generate a working values.yaml on the first try. That made me question which approach is more efficient: generating the file with AI or manually configuring it by reviewing each dependent Helm chart.\"}),(0,e.jsx)(n.p,{children:\"Even though Gemini offers a generous token limit, it felt wasteful for this task. it read 595 files!\"}),(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`Successfully read and concatenated content from **593 file(s)**.\n`})})}),(0,e.jsxs)(n.p,{children:[\"I tried reducing the number of files by deleting everything except the \",(0,e.jsx)(n.code,{children:\"values.yaml\"}),\" and \",(0,e.jsx)(n.code,{children:\"Chart.yaml\"}),\" files.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"find\"}),\" ./sentry -type f \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\" -name \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'values.yaml'\"}),\" -o -name \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Chart.yaml'\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),` -delet\n`]})})}),(0,e.jsx)(n.p,{children:\"However, in this case, Gemini didn\\u2019t recognize the global section and kept trying to apply tolerations to each individual component using the global configuration incorrectly. I tried refining the prompt several times, but eventually, I gave up.\"}),(0,e.jsxs)(n.h2,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,e.jsx)(n.p,{children:\"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly.\"}),(0,e.jsx)(n.p,{children:\"However, the generated file wasn\\u2019t accurate, and it took some experimentation to improve the results. I tried adding all the Helm chart files to the context, which did help Gemini provide better answers\\u2014but at the cost of processing a large number of files and consuming a lot of tokens for a relatively simple task.\"}),(0,e.jsx)(n.p,{children:\"I then reduced the number of files, keeping only the values.yaml and Chart.yaml files, and continued experimenting. Unfortunately, the results still didn\\u2019t meet my expectations. In the end, I decided to stop experimenting and leave the issue unresolved for now.\"})]})}}var f=b;return v;})();\n;return Component;","toc":[{"value":"Installing Sentry With Helm Chart","url":"#installing-sentry-with-helm-chart","depth":2},{"value":"Overriding Helm Values","url":"#overriding-helm-values","depth":2},{"value":"Using Gemini","url":"#using-gemini","depth":2},{"value":"Giving More Context","url":"#giving-more-context","depth":2},{"value":"Burning Out Tokens","url":"#burning-out-tokens","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}],"frontMatter":{"readingTime":{"text":"10 min read","minutes":9.77,"time":586200,"words":1954},"slug":"20250719-writing-helm-values-with-gemini","fileName":"20250719-writing-helm-values-with-gemini.md","title":"Writing Helm Values With Gemini","date":"2025-07-19T00:00:00.000Z","tags":["kubernetes","heml","Gemini"],"images":["/static/images/thumbnail/writing-helm-values-with-gemini.png"],"summary":"I often write values.yaml files to install open-source projects on Kubernetes clusters. This time, I needed to add tolerations to ensure all components of Sentry would run on specific nodes. Since Sentry has quite a few components, I decided to leverage Gemini to generate the values.yaml file more quickly."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["default"],"fileName":"default.md","name":"Jay","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"How To Authenticate With Docker API","date":"2025-07-16T00:00:00.000Z","tags":["docker","Gemini","Claude"],"images":["/static/images/thumbnail/write-bash-script.png"],"summary":"I needed to iterate through all image repositories in my private container registry, find the latest build for each, and save them as individual tar files. Although an LLM can generate code for this task quickly, it's worth knowing how to issue an authentication token for the Docker API. This could be important for guiding the LLM to produce a correct final version.","slug":"20250716-docker-v2-api"},"next":null},"__N_SSG":true}