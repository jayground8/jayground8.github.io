{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=c=>s(c,\"__esModule\",{value:!0});var g=(c,a)=>()=>(a||c((a={exports:{}}).exports,a),a.exports),u=(c,a)=>{i(c);for(var l in a)s(c,l,{get:a[l],enumerable:!0})},b=(c,a,l)=>{if(a&&typeof a==\"object\"||typeof a==\"function\")for(let n of o(a))!m.call(c,n)&&n!==\"default\"&&s(c,n,{get:()=>a[n],enumerable:!(l=h(a,n))||l.enumerable});return c},N=c=>b(i(s(c!=null?d(p(c)):{},\"default\",c&&c.__esModule&&\"default\"in c?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c);var t=g((j,r)=>{r.exports=_jsx_runtime});var k={};u(k,{default:()=>x,frontmatter:()=>f});var e=N(t()),f={title:\"\\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC certificate manager\\uC5D0 Lets encrypt \\uC778\\uC99D\\uC11C \\uB4F1\\uB85D\\uD558\\uAE30\",date:\"2023-10-14\",tags:[\"ncloud\"],images:[\"/static/images/social-banner.png\"],summary:\"Lets encrypt\\uB85C \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC5EC \\uC774\\uAC83\\uC744 Naver Cloud Certificate Manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB824\\uACE0 \\uD558\\uC600\\uB2E4. certbot\\uC744 \\uD1B5\\uD574\\uC11C \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uBC1B\\uACE0 \\uD574\\uB2F9 \\uD30C\\uC77C\\uB4E4\\uC744 Certificate manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB824\\uACE0 \\uD558\\uB2C8 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4. \\uC774\\uBC88 \\uBE14\\uB85C\\uADF8 \\uD3EC\\uC2A4\\uD305\\uC740 \\uB450 \\uAC00\\uC9C0\\uC758 \\uC5D0\\uB7EC\\uB97C \\uD574\\uACB0\\uD55C \\uC0BD\\uC9C8\\uAE30\\uC774\\uB2E4.\"};function y(c={}){let{wrapper:a}=c.components||{};return a?(0,e.jsx)(a,Object.assign({},c,{children:(0,e.jsx)(l,{})})):l();function l(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\"},c.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"lets-encrypt\\uB85C-\\uC778\\uC99D\\uC11C-\\uBC1C\\uAE09\",children:[(0,e.jsx)(n.a,{href:\"#lets-encrypt\\uB85C-\\uC778\\uC99D\\uC11C-\\uBC1C\\uAE09\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Let's Encrypt\\uB85C \\uC778\\uC99D\\uC11C \\uBC1C\\uAE09\"]}),(0,e.jsxs)(n.p,{children:[\"Ubuntu20.04 \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uC2A4 \\uC11C\\uBC84\\uC5D0\\uC11C certbot\\uC744 \\uC124\\uCE58\\uD558\\uC5EC Let's encrypt \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC600\\uB2E4. Ubuntu 20.04\\uC5D0\\uC11C \\uC124\\uCE58\\uD558\\uB294 \\uAC83\\uC740 \",(0,e.jsx)(n.a,{href:\"https://www.digitalocean.com/community/tutorials/how-to-use-certbot-standalone-mode-to-retrieve-let-s-encrypt-ssl-certificates-on-ubuntu-20-04\",children:\"\\uC774 \\uAE00\"}),\"\\uC744 \\uCC38\\uACE0\\uD558\\uC600\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),\" snap \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),` --classic certbot\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"sudo\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ln\"}),` -s /snap/bin/certbot /usr/bin/certbot\n`]})]})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`$ certbot --version\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"certbot \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2.7\"}),`.1\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC544\\uB798\\uC640 \\uAC19\\uC774 dns\\uB85C check\\uD558\\uB3C4\\uB85D \\uC124\\uC815\\uD558\\uC5EC \\uC778\\uC99D\\uC11C\\uB97C \\uBC1C\\uAE09\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`certbot certonly --manual -d *.example.com -d example.com --preferred-challenges dns-01\n`})})}),(0,e.jsxs)(n.p,{children:[\"TXT record\\uB97C \\uC548\\uB0B4\\uC5D0 \\uB530\\uB77C\\uC11C \\uC0DD\\uC131\\uD574\\uC8FC\\uBA74 \\uAC80\\uC99D\\uC774 \\uC644\\uB8CC\\uB418\\uC5B4\\uC11C \\uC778\\uC99D\\uC11C \\uBC1C\\uAE09\\uC774 \\uC644\\uB8CC\\uAC00 \\uB41C\\uB2E4. \",(0,e.jsx)(n.code,{children:\"/etc/letsencrypt/live/example.com\"}),\"\\uC5D0\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC0DD\\uC131\\uB41C \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"cert.pem\"}),(0,e.jsx)(n.li,{children:\"chain.pem\"}),(0,e.jsx)(n.li,{children:\"fullchain.pem\"}),(0,e.jsx)(n.li,{children:\"privkey.pem\"})]}),(0,e.jsxs)(n.h2,{id:\"\\uC778\\uC99D\\uC11C-\\uC554\\uD638\\uD654-\\uC54C\\uACE0\\uB9AC\\uC998-\\uAC80\\uC99D-\\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#\\uC778\\uC99D\\uC11C-\\uC554\\uD638\\uD654-\\uC54C\\uACE0\\uB9AC\\uC998-\\uAC80\\uC99D-\\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC778\\uC99D\\uC11C \\uC554\\uD638\\uD654 \\uC54C\\uACE0\\uB9AC\\uC998 \\uAC80\\uC99D \\uC2E4\\uD328\\uC785\\uB2C8\\uB2E4.\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uBC1C\\uAE09\\uB41C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC certificate manager\\uC5D0 \\uB4F1\\uB85D\\uD558\\uB294\\uB370 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4.\"}),(0,e.jsx)(\"img\",{src:\"/static/images/ncloud-certificate-manager-error.png\",alt:\"error to register certificate on naver cloud\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"openssl\"}),\"\\uB85C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uBA74,\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in cert.pem -text -noout\n`})})}),(0,e.jsxs)(n.p,{children:[\"\\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.code,{children:\"id-ecPublicKey\"}),\"\\uB85C \\uC124\\uC815\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Subject Public Key Info:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  Public Key Algorithm: id-ecPublicKey\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      Public-Key: \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"256\"}),\" bit\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`      pub:\n`})]})}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/certificates/\",children:\"Let's encrypt\\uC758 certificate\"}),\"\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uBA74\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in lets-encrypt-r3.pem -text -noout\n`})})}),(0,e.jsx)(n.p,{children:\"\\uC544\\uB798\\uCC98\\uB7FC RSA\\uB85C \\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Subject Public Key Info:\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  Public Key Algorithm: rsaEncryption\n`})]})}),(0,e.jsxs)(n.p,{children:[\"\\uB530\\uB77C\\uC11C \\uC774\\uAC83\\uC744 \\uB3D9\\uC77C\\uD558\\uAC8C \\uB9DE\\uCDB0\\uC8FC\\uAE30 \\uC704\\uD574\\uC11C \",(0,e.jsx)(n.code,{children:\"--key-type\"}),\"\\uC744 RSA\\uB97C \\uD574\\uC900\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"certbot certonly --manual -d *.example.com -d example.com \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  --preferred-challenges dns-01 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"\\\\\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  --key-type rsa\n`})]})}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uD574\\uB2F9 \\uC554\\uD638\\uB294 \\uD574\\uACB0\\uC774 \\uB41C\\uB2E4.\"}),(0,e.jsxs)(n.h2,{id:\"\\uC778\\uC99D\\uC11C\\uAC00-\\uC720\\uD6A8\\uD558\\uC9C0-\\uC54A\\uC2B5\\uB2C8\\uB2E4\",children:[(0,e.jsx)(n.a,{href:\"#\\uC778\\uC99D\\uC11C\\uAC00-\\uC720\\uD6A8\\uD558\\uC9C0-\\uC54A\\uC2B5\\uB2C8\\uB2E4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"]}),(0,e.jsxs)(n.p,{children:[\"\\uC774\\uC81C \\uC55E\\uC758 \\uC5D0\\uB7EC\\uB294 \\uD574\\uACB0\\uD588\\uB294\\uB370, \",(0,e.jsx)(n.code,{children:\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4\"}),\"\\uB77C\\uACE0 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uBA74\\uC11C \\uB4F1\\uB85D\\uC774 \\uB418\\uC9C0 \\uC54A\\uB294\\uB2E4. \\u{1F92A}\"]}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C chain\\uC744 \\uBCF4\\uBA74 \\uB9C8\\uC9C0\\uB9C9\\uC5D0 CA \\uBD80\\uBD84\\uC778\\uB370, \\uADF8 \\uBD80\\uBD84\\uB9CC \\uB530\\uB85C \\uC778\\uC99D\\uC11C \\uC815\\uBCF4\\uB97C \\uD655\\uC778\\uD574\\uBCF4\\uB2C8\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`openssl x509 -in ca_from_chain.pem -text -noout\n`})})}),(0,e.jsxs)(n.p,{children:[\"Issuer\\uAC00 \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uC73C\\uB85C \\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uC5C8\\uB2E4. \",(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/2023/07/10/cross-sign-expiration.html\",children:\"let's encrypt \\uAE00\"}),\"\\uC744 \\uBCF4\\uBA74 \",(0,e.jsx)(n.code,{children:\"DST Root CA X3\"}),\"\\uC740 old version\\uC744 \\uC704\\uD574\\uC11C \\uC720\\uC9C0\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"Issuer: O \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" Digital Signature Trust Co., CN \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` DST Root CA X3\n`]})})}),(0,e.jsxs)(n.p,{children:[\"Certificate Manager\\uC5D0\\uC11C \\uD574\\uB2F9 CA certificate\\uC73C\\uB85C \\uC62C\\uB9B4 \\uB54C\\uB294 \",(0,e.jsx)(n.code,{children:\"\\uC778\\uC99D\\uC11C\\uAC00 \\uC720\\uD6A8\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4\"}),\"\\uB77C\\uB294 \\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC600\\uB2E4. \\uADF8\\uB798\\uC11C chain\\uC758 \\uB9C8\\uC9C0\\uB9C9 Root CA \\uC778\\uC99D\\uC11C\\uB97C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,e.jsx)(n.a,{href:\"https://letsencrypt.org/certificates/\",children:\"Let's encrypt\\uC758 certificate\"}),\"\\uC5D0\\uC11C \\uAC00\\uC838\\uC640\\uC11C \\uBC14\\uAFD4\\uC900\\uB2E4.\"]}),(0,e.jsx)(\"img\",{src:\"/static/images/ncloud-certificate-manager-ca-cert.png\",alt:\"ca certificate from lets encrypt web page\"}),(0,e.jsx)(n.p,{children:\"\\uC774\\uC81C \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uB4F1\\uB85D\\uC774 \\uB41C\\uB2E4.\"})]})}}var x=y;return k;})();\n;return Component;","toc":[{"value":"Let's Encrypt로 인증서 발급","url":"#lets-encrypt로-인증서-발급","depth":2},{"value":"인증서 암호화 알고리즘 검증 실패입니다.","url":"#인증서-암호화-알고리즘-검증-실패입니다","depth":2},{"value":"인증서가 유효하지 않습니다.","url":"#인증서가-유효하지-않습니다","depth":2}],"frontMatter":{"readingTime":{"text":"2 min read","minutes":1.825,"time":109500,"words":365},"slug":"20231014-ncloud-certificate-manater","fileName":"20231014-ncloud-certificate-manater.md","title":"네이버 클라우드 certificate manager에 Lets encrypt 인증서 등록하기","date":"2023-10-14T00:00:00.000Z","tags":["ncloud"],"images":["/static/images/social-banner.png"],"summary":"Lets encrypt로 인증서를 발급하여 이것을 Naver Cloud Certificate Manager에 등록하려고 하였다. certbot을 통해서 인증서를 발급받고 해당 파일들을 Certificate manager에 등록하려고 하니 에러가 발생하였다. 이번 블로그 포스팅은 두 가지의 에러를 해결한 삽질기이다."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"Jaemyun Lee","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"ECR Credential-Provider 사용해보기","date":"2023-09-28T00:00:00.000Z","tags":["kubernetes"],"summary":"Kubeadm으로 만든 Kubernetes Cluster에서 AWS ECR를 private container image repository를 사용하고자 하였다. private repository를 접근하기 위해서 Kubernetes 1.26부터 stable feature로 제공하는 kubelet crendential provider를 사용하였다.","slug":"20230928-ecr-credential-provider"},"next":null},"__N_SSG":true}