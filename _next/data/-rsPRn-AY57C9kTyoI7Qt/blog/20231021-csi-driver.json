{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var m=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},k=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let e of p(s))!h.call(a,e)&&e!==\"default\"&&l(a,e,{get:()=>s[e],enumerable:!(c=d(s,e))||c.enumerable});return a},g=a=>k(t(l(a!=null?r(u(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=m((C,i)=>{i.exports=_jsx_runtime});var f={};N(f,{default:()=>v,frontmatter:()=>b});var n=g(o()),b={title:\"aws-ebs-csi-driver \\uCF54\\uB4DC\\uB85C csi driver \\uC774\\uD574\\uD558\\uAE30\",date:\"2023-10-21\",tags:[\"kubernetes\"],images:[\"/static/images/social-banner.png\"],summary:\"aws-ebs-csi-driver \\uC18C\\uC2A4\\uCF54\\uB4DC\\uB97C \\uBCF4\\uACE0 csi driver\\uAC00 \\uD558\\uB294 \\uC5ED\\uD560\\uC744 \\uC774\\uD574\\uD574\\uBCF4\\uC558\\uB2E4. \\uD06C\\uAC8C Controller plugin\\uACFC Node plugin\\uC73C\\uB85C \\uAD6C\\uC131\\uB418\\uC5B4 \\uC788\\uACE0, \\uB2E4\\uC591\\uD55C sidecar container\\uB4E4\\uC774 \\uC874\\uC7AC\\uD55C\\uB2E4. \\uC774 sidecar container\\uB4E4\\uC774 Volume\\uC744 \\uC0DD\\uC131\\uD558\\uACE0, \\uB178\\uB4DC\\uC5D0 \\uBD80\\uCC29\\uD558\\uACE0, Host \\uD639\\uC740 container directory\\uC5D0 mount\\uD558\\uB294 \\uAC83\\uC744 \\uC9C4\\uD589\\uD55C\\uB2E4. \\uC774\\uACFC\\uC815\\uC5D0\\uC11C CSI driver\\uB85C cloud vendor\\uB9C8\\uB2E4 \\uB2E4\\uB978 \\uB85C\\uC9C1\\uC73C\\uB85C \\uADF8\\uB4E4\\uC758 volume\\uC744 \\uC81C\\uC5B4\\uD558\\uAC8C \\uB41C\\uB2E4. \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC\\uC5D0\\uC11C storage\\uAC00 \\uCC98\\uC74C \\uC0DD\\uC131\\uB420 \\uB54C \\uC11C\\uBC84\\uC5D0 \\uBD80\\uCC29\\uC774 \\uB418\\uC5B4\\uC57C\\uB9CC \\uD558\\uB294 \\uC81C\\uC57D\\uC0AC\\uD56D\\uC774 \\uC788\\uC5B4\\uC11C, PVC\\uB85C PV \\uB3D9\\uC801 \\uD560\\uB2F9\\uC744 \\uD560 \\uB54C volumeBindingMode\\uC774 Immediate\\uC774\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C Node\\uC5D0 \\uBD80\\uCC29\\uC774 \\uB41C\\uB2E4.\"};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",code:\"code\",h3:\"h3\",pre:\"pre\",ul:\"ul\",li:\"li\",h4:\"h4\",blockquote:\"blockquote\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h2,{id:\"aws-ebs-csi-driver\",children:[(0,n.jsx)(e.a,{href:\"#aws-ebs-csi-driver\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"aws ebs csi driver\"]}),(0,n.jsxs)(e.p,{children:[\"Kubernetes\\uC5D0\\uC11C csi driver\\uB294 \\uD06C\\uAC8C deployment\\uB098 statefulset\\uC73C\\uB85C \\uAD00\\uB9AC\\uB418\\uB294 controller plugin\\uACFC daemonset\\uC73C\\uB85C \\uAD00\\uB9AC\\uB418\\uB294 node plugin\\uC73C\\uB85C \\uAD6C\\uC131\\uB418\\uC5B4 \\uC788\\uB2E4. \",(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes/design-proposals-archive/blob/main/storage/container-storage-interface.md#recommended-mechanism-for-deploying-csi-drivers-on-kubernetes\",children:\"Kubernetes\\uC758 design proposals \\uBB38\\uC11C\"}),\"\\uC5D0 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uB2E4\\uC774\\uC544\\uADF8\\uB7A8 \\uC774\\uBBF8\\uC9C0\\uB85C \\uC798 \\uC124\\uBA85\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,n.jsx)(\"img\",{src:\"/static/images/container-storage-interface_diagram1.png\",alt:\"csi diagram\"}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"controller\"}),\"\\uB77C\\uB294 \\uC774\\uB984\\uC5D0\\uC11C \\uC54C \\uC218 \\uC788\\uB4EF\\uC774 controller plugin\\uC740 API server\\uC758 object \\uBCC0\\uACBD\\uC5D0 \\uB530\\uB77C\\uC11C \\uC791\\uC5C5\\uC744 \\uD574\\uC8FC\\uACE0, Node plugin\\uC740 Node\\uC758 kubelet\\uC774 csi driver\\uB97C \\uD1B5\\uD574\\uC11C \\uC791\\uC5C5\\uC744 \\uD560 \\uC218 \\uC788\\uB3C4\\uB85D Daemonset\\uC73C\\uB85C Node\\uB9C8\\uB2E4 \\uC874\\uC7AC\\uD55C\\uB2E4.\"]}),(0,n.jsxs)(e.h3,{id:\"controller-plugin\",children:[(0,n.jsx)(e.a,{href:\"#controller-plugin\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"controller plugin\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/deploy/kubernetes/base/controller.yaml\",children:\"aws-ebs-csi-driver\"}),\"\\uC758 k8s manifest\\uB97C \\uBCF4\\uBA74 \",(0,n.jsx)(e.code,{children:\"Deployment\"}),\" kind\\uB85C \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uC744 \\uBCFC \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`controller\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"labels\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"app.kubernetes.io/name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" aws\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`driver\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"replicas\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uADF8\\uB9AC\\uACE0 \\uC544\\uB798\\uCC98\\uB7FC 6\\uAC00\\uC9C0\\uC758 container\\uB4E4\\uC774 \\uC815\\uC758\\uB418\\uC5B4 \\uC788\\uB294 \\uAC83\\uB3C4 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"ebs-plugin\"}),(0,n.jsx)(e.li,{children:\"csi-provisioner\"}),(0,n.jsx)(e.li,{children:\"csi-attacher\"}),(0,n.jsx)(e.li,{children:\"csi-snapshotter\"}),(0,n.jsx)(e.li,{children:\"csi-resizer\"}),(0,n.jsx)(e.li,{children:\"liveness-probe\"})]}),(0,n.jsxs)(e.h4,{id:\"ebs-plugin\",children:[(0,n.jsx)(e.a,{href:\"#ebs-plugin\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"ebs-plugin\"]}),(0,n.jsxs)(e.p,{children:[\"\\uC774\\uC81C cloud vendor\\uBCC4\\uC758 interface\\uAC00 csi driver\\uC5D0 \\uB4E4\\uC5B4\\uAC00\\uAC8C \\uB418\\uACE0, \",(0,n.jsx)(e.code,{children:\"ebs-plugin\"}),\"\\uC774 \\uADF8 \\uBD80\\uBD84\\uC774\\uB2E4. \",(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/pkg/driver/controller.go\",children:\"aws-ebs-csi-driver\\uC758 controller.go\"}),\" \\uC18C\\uC2A4 \\uCF54\\uB4DC\\uB97C \\uBCF4\\uBA74 \\uC544\\uB798\\uC640 \\uAC19\\uC740 method\\uB4E4\\uC774 \\uBCF4\\uC778\\uB2E4.\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"CreateVolume\"}),(0,n.jsx)(e.li,{children:\"DeleteVolume\"}),(0,n.jsx)(e.li,{children:\"ControllerPublishVolume\"}),(0,n.jsx)(e.li,{children:\"ControllerUnpublishVolume\"}),(0,n.jsx)(e.li,{children:\"ControllerExpandVolume\"}),(0,n.jsx)(e.li,{children:\"CreateSnapshot\"}),(0,n.jsx)(e.li,{children:\"DeleteSnapshot\"})]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/pkg/driver/driver.go\",children:\"aws-ebs-csi-driver\\uC758 driver.go\"}),\" \\uC18C\\uC2A4 \\uCF54\\uB4DC\\uB97C \\uBCF4\\uBA74 \\uC544\\uB798\\uCC98\\uB7FC \",(0,n.jsx)(e.code,{children:\"ControllerMode\"}),\"\\uB85C \\uC124\\uC815\\uC774 \\uB418\\uC5C8\\uC744 \\uB54C \\uC704\\uC758 ControllerService\\uC758 instance\\uB97C \\uB9CC\\uB4DC\\uB294 \\uAC83\\uC744 \\uBCFC \\uC218\\uAC00 \\uC788\\uB2E4. \",(0,n.jsx)(e.code,{children:\"AllMode\"}),\"\\uC77C \\uB54C\\uB294 \\uC544\\uB798\\uCC98\\uB7FC controllerService\\uC640 nodeService \\uBAA8\\uB450 instance\\uB97C \\uB9CC\\uB4E4\\uC5B4\\uC11C \\uC124\\uC815\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"switch\"}),\" driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"mode \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" ControllerMode\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tdriver\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"controllerService \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"newControllerService\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" NodeMode\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tdriver\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"nodeService \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"newNodeService\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"case\"}),\" AllMode\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tdriver\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"controllerService \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"newControllerService\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tdriver\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"nodeService \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"newNodeService\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fmt\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Errorf\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"unknown mode: %s\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" driverOptions\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"mode\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\uADF8\\uB798\\uC11C \",(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/deploy/kubernetes/base/controller.yaml\",children:\"aws-ebs-csi-driver\\uC758 controller.yaml\"}),\"\\uC744 \\uBCF4\\uBA74 \\uC778\\uC790\\uB85C driver\\uC758 mode\\uB97C \\uC124\\uC815\\uD560 \\uC218 \\uC788\\uB2E4. \\uAE30\\uBCF8\\uAC12\\uC774 \",(0,n.jsx)(e.code,{children:\"AllMode\"}),\"\\uC774\\uACE0 controller plugin\\uACFC node plugin\\uC5D0\\uC11C \\uB530\\uB85C \\uC778\\uC790\\uB97C \\uC124\\uC815\\uD558\\uC9C0 \\uC54A\\uACE0 \\uACF5\\uC6A9\\uC73C\\uB85C \\uC4F0\\uACE0 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"containers\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`plugin\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"image\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" public.ecr.aws/ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"driver/aws\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"driver\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`v1.24.0\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"imagePullPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` IfNotPresent\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"args\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# - {all,controller,node} # specify the driver mode\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`endpoint=$(CSI_ENDPOINT)\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"logging\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`format=text\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"user\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"agent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`extra=kustomize\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`v=2\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uC774\\uC81C \\uC704\\uC758 \\uB2E4\\uC774\\uC544\\uADF8\\uB7A8 \\uC774\\uBBF8\\uC9C0\\uC5D0\\uC11C \\uC798 \\uC124\\uBA85\\uD55C \\uAC83\\uCC98\\uB7FC, Node plugin\\uC740 node\\uC5D0 \\uC788\\uB294 kubelet\\uACFC \\uC5F0\\uACB0\\uD558\\uAE30 \\uC704\\uD574\\uC11C hostPath\\uB97C \\uC0AC\\uC6A9\\uD55C\\uB2E4. \\uD558\\uC9C0\\uB9CC controller plugin\\uC740 csi-provisioner, csi-attacher, csi-snapshotter, csi-resizer, liveness-probe\\uB4E4\\uC774 \\uC5F0\\uACB0\\uB418\\uACE0 \\uC774\\uB4E4\\uC774 API server\\uC640 \\uD1B5\\uC2E0\\uD558\\uAE30 \\uB54C\\uBB38\\uC5D0 emptyDir\\uB85C \\uC124\\uC815\\uB41C\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeMounts\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" socket\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`dir\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"mountPath\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` /var/lib/csi/sockets/pluginproxy/\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" socket\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`dir\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"emptyDir\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h4,{id:\"csi-provisioner\",children:[(0,n.jsx)(e.a,{href:\"#csi-provisioner\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"csi-provisioner\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"The external-provisioner is a sidecar container that dynamically provisions volumes by calling \",(0,n.jsx)(e.code,{children:\"CreateVolume\"}),\" and \",(0,n.jsx)(e.code,{children:\"DeleteVolume\"}),\" functions of CSI drivers.\"]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-provisioner/blob/ae4c14dfe82168a00304ebaf0d991ef61869ab78/pkg/controller/controller.go#L1331\",children:\"external-provisioner \\uC18C\\uC2A4\\uCF54\\uB4DC controller.go\"}),\"\\uB97C \\uBCF4\\uBA74 \\uC544\\uB798\\uCC98\\uB7FC csi driver\\uB97C \\uD1B5\\uD574\\uC11C \",(0,n.jsx)(e.code,{children:\"CreateVolume\"}),\"\\uACFC \",(0,n.jsx)(e.code,{children:\"DeleteVolume\"}),\"\\uC744 \\uD638\\uCD9C\\uD558\\uB294 \\uAC83\\uC744 \\uD655\\uC77C \\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsx)(e.code,{className:\"language-go code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"rep\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"csiClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"CreateVolume\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"createCtx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsx)(e.code,{className:\"language-go code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token boolean\",children:\"_\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" p\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"csiClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"DeleteVolume\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"deleteCtx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsxs)(e.h4,{id:\"csi-attacher\",children:[(0,n.jsx)(e.a,{href:\"#csi-attacher\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"csi-attacher\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"The CSI external-attacher is a sidecar container that watches the Kubernetes API server for VolumeAttachment objects and triggers Controller[Publish|Unpublish]Volume operations against a CSI endpoint. \",(0,n.jsx)(e.a,{href:\"https://kubernetes-csi.github.io/docs/external-attacher.html#description\",children:\"from doc\"})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-attacher/blob/e0704123505a9cd034ca4c38745ee9abf3240e7d/pkg/attacher/attacher.go\",children:\"external-attacher \\uC18C\\uC2A4\\uCF54\\uB4DC attacher.go\"}),\"\\uB97C \\uBCF4\\uBA74 \\uC544\\uB798\\uCC98\\uB7FC csi driver\\uB97C \\uD1B5\\uD574\\uC11C \",(0,n.jsx)(e.code,{children:\"ControllerPublishVolume\"}),\", \",(0,n.jsx)(e.code,{children:\"ControllerUnpublishVolume\"}),\" \\uB97C \\uD638\\uCD9C\\uD558\\uB294 \\uAC83\\uC744 \\uD655\\uC778 \\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"attacher\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Attach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" volumeID \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" readOnly \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"bool\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" nodeID \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" caps \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeCapability\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" secrets \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"metadata \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" detached \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"bool\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\treq \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ControllerPublishVolumeRequest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeId\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"         volumeID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tNodeId\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"           nodeID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeCapability\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" caps\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tReadonly\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"         readOnly\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"    context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tSecrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"          secrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\trsp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"client\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ControllerPublishVolume\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"isFinalError\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),` err\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" rsp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"PublishContext\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"attacher\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Detach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" volumeID \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" nodeID \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" secrets \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\treq \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ControllerUnpublishVolumeRequest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeId\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" volumeID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tNodeId\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"   nodeID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tSecrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"  secrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"_\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"client\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ControllerUnpublishVolume\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),` err\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-attacher/blob/master/pkg/controller/controller.go\",children:\"external-attacher \\uC18C\\uC2A4\\uCF54\\uB4DC controller.go\"}),\"\\uB97C \\uBCF4\\uBA74 \\uC544\\uB798\\uCC98\\uB7FC Informer\\uC5D0 VolumeAttachment object\\uAC00 Add, Update, Delete\\uD560 \\uB54C \\uC218\\uD589\\uB420 \\uB85C\\uC9C1\\uC744 \\uCD94\\uAC00\\uD558\\uC600\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"volumeAttachmentInformer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Informer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"AddEventHandler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"cache\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResourceEventHandlerFuncs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  AddFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"    ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"vaAdded\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  UpdateFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"vaUpdated\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  DeleteFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"vaDeleted\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"pvInformer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Informer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"AddEventHandler\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"cache\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResourceEventHandlerFuncs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  AddFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"    ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"pvAdded\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  UpdateFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"pvUpdated\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"//DeleteFunc: ctrl.pvDeleted, TODO: do we need this?\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-attacher/blob/e0704123505a9cd034ca4c38745ee9abf3240e7d/pkg/controller/csi_handler.go\",children:\"external-attacher \\uC18C\\uC2A4\\uCF54\\uB4DC cis_handler.go\"}),\"\\uC5D0\\uC11C \\uCD5C\\uC885\\uC801\\uC73C\\uB85C VolumeAttachment\\uC5D0 DeletetionTimestamp \\uAC12\\uC774 \\uC788\\uC73C\\uBA74 \",(0,n.jsx)(e.code,{children:\"Detach\"}),\"\\uB97C \\uD638\\uCD9C\\uD558\\uAC8C \\uB418\\uACE0, \\uC5C6\\uC73C\\uBA74 \",(0,n.jsx)(e.code,{children:\"Attach\"}),\"\\uB97C \\uD638\\uCD9C\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"h \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"csiHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"SyncNewOrUpdatedVolumeAttachment\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"storage\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeAttachment\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tklog\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"V\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"4\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Infof\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"CSIHandler: processing VA %q\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"var\"}),\" err \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"DeletionTimestamp \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"==\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\terr \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"syncAttach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\terr \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"syncDetach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Re-queue with exponential backoff\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tklog\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"V\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Infof\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"Error processing %q: %s\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\th\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"vaQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"AddRateLimited\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// The operation has finished successfully, reset exponential backoff\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\th\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"vaQueue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Forget\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tklog\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"V\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"4\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Infof\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"CSIHandler: finished processing %q\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"h \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"csiHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"syncAttach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"storage\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeAttachment\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\\uC0DD\\uB7B5\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" metadata\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"csiAttach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\\uC0DD\\uB7B5\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"h \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"csiHandler\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"syncDetach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"storage\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeAttachment\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\\uC0DD\\uB7B5\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" h\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"csiDetach\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"va\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"...\"}),`\\uC0DD\\uB7B5\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.h4,{id:\"csi-snapshotter\",children:[(0,n.jsx)(e.a,{href:\"#csi-snapshotter\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"csi-snapshotter\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsx)(e.code,{className:\"language-go code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"rsp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" client\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"CreateSnapshot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"_\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" client\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"DeleteSnapshot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),` err\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-snapshotter/blob/37c4599885bb4d1e580c76c74190a34b896a9b1f/pkg/common-controller/snapshot_controller_base.go\",children:\"snapshot_controller_base.go\"}),\"\\uC5D0\\uC11C \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C VolumeSnapshot Object\\uAC00 Add, Update, Delete\\uAC00 \\uB418\\uBA74 \",(0,n.jsx)(e.code,{children:\"CreateSnapshot\"}),\"\\uACFC \",(0,n.jsx)(e.code,{children:\"DeleteSnapshot\"}),\"\\uC774 \\uC2E4\\uD589\\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"volumeSnapshotContentInformer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Informer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"AddEventHandlerWithResyncPeriod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  cache\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResourceEventHandlerFuncs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    AddFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"enqueueContentWork\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    UpdateFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"oldObj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" newObj \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Considering the object is modified more than once during the workflow we are not relying on the\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:'// \"AnnVolumeSnapshotBeingCreated\" annotation. Instead we will just check if newobj status has error'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// and avoid the immediate re-queue. This allows the retry to happen with exponential backoff.\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      newSnapContent \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" newObj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"crdv1\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeSnapshotContent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" newSnapContent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Status \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" newSnapContent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Status\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Error \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"enqueueContentWork\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"newObj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    DeleteFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"enqueueContentWork\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"obj\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"resyncPeriod\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.h4,{id:\"external-resizer\",children:[(0,n.jsx)(e.a,{href:\"#external-resizer\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"external-resizer\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/external-resizer/blob/35392a4b8a4dfd7543bd0e3328a524887c1920dd/pkg/csi/client.go\",children:\"client.go\"}),\"\\uC5D0\\uC11C \",(0,n.jsx)(e.code,{children:\"ControllerExpandVolume\"}),\"\\uC774 \\uD638\\uCD9C\\uB418\\uB294 \\uAC78 \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"func\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"c \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"client\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"Expand\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tctx context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"Context\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tvolumeID \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\trequestBytes \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"int64\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tsecrets \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"map\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tcapability \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"VolumeCapability\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"int64\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"bool\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\treq \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ControllerExpandVolumeRequest\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tSecrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"          secrets\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeId\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"         volumeID\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tCapacityRange\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"&\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"CapacityRange\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"RequiredBytes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" requestBytes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\tVolumeCapability\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" capability\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\tresp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\":=\"}),\" c\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ctrlClient\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"ControllerExpandVolume\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" req\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" err \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!=\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),` err\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" resp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"CapacityBytes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" resp\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"NodeExpansionRequired\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"nil\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C Informer\\uC5D0 addEventHandler\\uB85C Add, Update, Delete \\uB420 \\uB54C \\uB85C\\uC9C1\\uC744 \\uCD94\\uAC00\\uD558\\uC600\\uACE0, \\uACB0\\uAD6D\\uC740 Workqueue\\uC5D0 \\uB4E4\\uC5B4\\uAC04 PVC \\uC815\\uBCF4\\uB85C \\uD544\\uC694\\uC2DC\\uC5D0\\uB294 \\uC704\\uC758 \",(0,n.jsx)(e.code,{children:\"Expand\"}),\" \\uBA54\\uC18C\\uB4DC\\uB97C \\uD638\\uCD9C\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-go\",children:(0,n.jsxs)(e.code,{className:\"language-go code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"pvcInformer\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"Informer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"AddEventHandlerWithResyncPeriod\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"cache\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"ResourceEventHandlerFuncs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  AddFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"    ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"addPVC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  UpdateFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"updatePVC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  DeleteFunc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ctrl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"deletePVC\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" resyncPeriod\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.h4,{id:\"election\",children:[(0,n.jsx)(e.a,{href:\"#election\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"election\"]}),(0,n.jsx)(e.p,{children:\"\\uADF8\\uB9AC\\uACE0 controller\\uC758 deployment k8s manifest\\uB97C \\uBCF4\\uBA74 replica\\uAC00 2\\uB85C \\uB418\\uC5B4 \\uC788\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`controller\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"labels\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"app.kubernetes.io/name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" aws\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"ebs\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`driver\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"replicas\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"2\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"\\uADF8\\uB798\\uC11C lead election\\uC744 \\uD1B5\\uD574\\uC11C \\uD558\\uB098\\uC758 pod\\uB9CC active\\uD558\\uAC8C \\uAC01 container\\uC758 option(\",(0,n.jsx)(e.code,{children:\"--leader-election=true\"}),\")\\uC73C\\uB85C \\uC815\\uC758\\uD558\\uACE0 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`provisioner\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"image\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" public.ecr.aws/eks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"distro/kubernetes\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi/external\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"provisioner\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\"v3.5.0\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"eks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"1\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"28\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"6\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"imagePullPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` IfNotPresent\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"args\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`address=$(ADDRESS)\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`v=2\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"feature\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`gates=Topology=true\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"extra\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"create\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`metadata\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"leader\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`election=true\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"default\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`fstype=ext4\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"node-plugin\",children:[(0,n.jsx)(e.a,{href:\"#node-plugin\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"node plugin\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/pkg/driver/node.go\",children:\"aws-ebs-csi-driver\\uC758 node.go\"}),\"\\uC5D0\\uC11C\\uB294\"]}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"NodePublishVolume\"}),(0,n.jsx)(e.li,{children:\"NodeUnpublishVolume\"}),(0,n.jsx)(e.li,{children:\"NodeStageVolume\"}),(0,n.jsx)(e.li,{children:\"NodeUnstageVolume\"})]}),(0,n.jsxs)(e.p,{children:[\"NodePublishVolume\\uACFC NodeStageVolume\\uC774 \\uC5B4\\uB5A4 \\uC77C\\uC744 \\uD558\\uB294\\uC9C0 \",(0,n.jsx)(e.a,{href:\"https://github.com/kubernetes-csi/docs/issues/24#issuecomment-408342071\",children:\"Github issue\"}),\"\\uC5D0 \\uC124\\uBA85\\uC774 \\uB418\\uC5B4 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"ControllerPublishVolume is used to attach disk to a node. NodeStageVolume is used to partition and format the disk and mount the disk on a node global directory. NodePublishVolume is used to bind mount the global directory on a container directory.\"})}),(0,n.jsx)(e.p,{children:\"\\uACB0\\uAD6D\\uC740 pod\\uAC00 \\uC0DD\\uC131\\uB418\\uC5B4\\uC11C kubelet\\uC774 Node host\\uB098 container\\uC5D0 mount\\uB97C \\uD560\\uB54C \\uC0AC\\uC6A9\\uB418\\uB294 \\uAC83\\uC73C\\uB85C \\uBCF4\\uC778\\uB2E4.\"}),(0,n.jsxs)(e.h4,{id:\"node-driver-registrar\",children:[(0,n.jsx)(e.a,{href:\"#node-driver-registrar\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"node-driver-registrar\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"The CSI node-driver-registrar is a sidecar container that fetches driver information (using NodeGetInfo) from a CSI endpoint and registers it with the kubelet on that node using the kubelet plugin registration mechanism.\"})}),(0,n.jsxs)(e.h2,{id:\"\\uACB0\\uB860\",children:[(0,n.jsx)(e.a,{href:\"#\\uACB0\\uB860\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"\\uACB0\\uB860\"]}),(0,n.jsxs)(e.p,{children:[\"Storage Class\\uC5D0 \\uC5F0\\uACB0\\uB41C PVC object\\uB97C \\uC0DD\\uC131\\uD558\\uBA74, PV\\uAC00 \\uC790\\uB3D9\\uC73C\\uB85C \\uC0DD\\uC131\\uB418\\uAC8C \\uB41C\\uB2E4. \",(0,n.jsx)(e.a,{href:\"https://kubernetes-csi.github.io/docs/external-provisioner.html\",children:\"\\uC774 \\uBB38\\uC11C\"}),\"\\uC5D0 \\uB530\\uB974\\uBA74 \",(0,n.jsx)(e.code,{children:\"external-provisioner\"}),\"\\uAC00 CSI driver\\uB85C volume\\uC744 \\uC0DD\\uC131\\uD558\\uACE0 PV object\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4\\uACE0 \\uD55C\\uB2E4. \\u{1F914} \\uADF8\\uB7F0\\uB370 \",(0,n.jsx)(e.code,{children:\"external-provisioner\"}),\" \\uC18C\\uC2A4\\uCF54\\uB4DC\\uB97C \\uBCF4\\uBA74 PV\\uB97C k8s client\\uB85C \\uC0DD\\uC131\\uD558\\uB294 \\uAC83\\uC744 \\uCC3E\\uC744 \\uC218\\uAC00 \\uC5C6\\uB2E4. \\uC774\\uBD80\\uBD84\\uC740 \\uC5B4\\uB5A4 \\uCF54\\uB4DC\\uB97C \\uBD10\\uC57C \\uD558\\uB294 \\uAC78\\uAE4C?\"]}),(0,n.jsxs)(e.p,{children:[\"\\uC774\\uC81C PVC\\uC640 PV\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0 \\uB098\\uACE0, VolumeAttachment object\\uAC00 \\uC0DD\\uC131\\uB418\\uBA74 \\uD574\\uB2F9 volume\\uC774 \\uD2B9\\uC815 node\\uC5D0 attach\\uAC00 \\uB41C\\uB2E4. \",(0,n.jsx)(e.code,{children:\"external-attacher\"}),\" sidecar container\\uAC00 VolumeAttachment object\\uB97C monitoring\\uD558\\uB2E4\\uAC00 CSI driver\\uB85C attach\\uB97C \\uD55C\\uB2E4. \\u{1F914} \\uADF8\\uB7F0\\uB370 PVC\\uC640 PV\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0, pod\\uC5D0 \",(0,n.jsx)(e.code,{children:\"persistentVolumeClaim\"}),\"\\uC73C\\uB85C PVC\\uB97C \\uC124\\uC815\\uD558\\uBA74 VolumeAttachment object\\uAC00 \\uC790\\uB3D9\\uC73C\\uB85C \\uC0DD\\uC131\\uB41C\\uB2E4. pod\\uAC00 \\uC0DD\\uC131\\uB420 \\uB54C pod\\uAC00 \\uB744\\uB294 Node\\uC5D0 attach\\uB420 \\uC218 \\uC788\\uB3C4\\uB85D \",(0,n.jsx)(e.code,{children:\"persistentVolumeClaim\"}),\"\\uC774 \\uC0DD\\uAE30\\uB294\\uB370 \\uC5B4\\uB514\\uC11C \\uC0DD\\uAE30\\uB294\\uAC70\\uC9C0?\"]}),(0,n.jsxs)(e.p,{children:[\"PVC\\uC758 size\\uB97C \\uBCC0\\uACBD\\uD558\\uBA74 \",(0,n.jsx)(e.code,{children:\"external-resizer\"}),\" sidecar container\\uAC00 Volume\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8 \\uD558\\uAC8C \\uB418\\uACE0, \",(0,n.jsx)(e.code,{children:\"VolumeSnapshot\"}),\" object\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 \",(0,n.jsx)(e.code,{children:\"external-snapshotter\"}),\" sidecar container CSI driver\\uB85C snapshot\\uC744 \\uC0DD\\uC131\\uD558\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsxs)(e.p,{children:[\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C kubelet\\uC774 volume\\uC744 Node host\\uB098 container\\uC758 directory\\uC5D0 mount\\uD560 \\uC218 \\uC788\\uB3C4\\uB85D CSI driver\\uB97C \\uC5F0\\uACB0\\uD574\\uC8FC\\uB294 \",(0,n.jsx)(e.code,{children:\"node-driver-registrar\"}),\"\\uAC00 \\uC788\\uB2E4. \\uC774\\uB807\\uAC8C \\uAC01 sidecar container\\uAC00 \\uC5ED\\uD560\\uC744 \\uB9DE\\uC544\\uC11C CSI driver\\uB85C Volume\\uC744 \\uC0DD\\uC131\\uD558\\uACE0 attach/mount\\uB97C \\uD560 \\uC218 \\uC788\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsxs)(e.h2,{id:\"ncloud\\uC5D0\\uC11C\",children:[(0,n.jsx)(e.a,{href:\"#ncloud\\uC5D0\\uC11C\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"NCloud\\uC5D0\\uC11C\"]}),(0,n.jsxs)(e.h3,{id:\"static-pv-provisioning\",children:[(0,n.jsx)(e.a,{href:\"#static-pv-provisioning\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"static PV provisioning\"]}),(0,n.jsxs)(e.p,{children:[\"\\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC \\uCF58\\uC194\\uC5D0\\uC11C Storage\\uB97C \\uD558\\uB098 \\uC0DD\\uC131\\uD55C\\uB2E4. \\uADF8\\uB9AC\\uACE0 \\uC544\\uB798\\uC640 \\uAC19\\uC774 \",(0,n.jsx)(e.code,{children:\"StroageClass\"}),\"\\uB97C \\uC815\\uC758\\uD55C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"namespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" kube\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"annotations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageclass.kubernetes.io/is-default-class\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'true'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blk.csi.ncloud.com\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeBindingMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Immediate\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Retain\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"allowVolumeExpansion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"parameters\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` SSD\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uADF8\\uB2E4\\uC74C\\uC5D0 \\uC0DD\\uC131\\uB41C storage\\uB97C \\uD1B5\\uD574\\uC11C PV\\uB97C \\uC815\\uC758\\uD55C\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolume\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" volume\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"existing\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"01\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"annotations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"pv.kubernetes.io/provisioned-by\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" blk.csi.ncloud.com \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uBE14\\uB85D \\uC2A4\\uD1A0\\uB9AC\\uC9C0\\uC640 \\uC5F0\\uB3D9\\uB420 provisoner \\uC774\\uB984\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"storage \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uBE14\\uB85D \\uC2A4\\uD1A0\\uB9AC\\uC9C0\\uC758 \\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uD074\\uB798\\uC2A4 \\uC774\\uB984\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"persistentVolumeReclaimPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Retain\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"capacity\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" 10Gi \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uBE14\\uB85D \\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uD06C\\uAE30\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"csi\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"driver\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blk.csi.ncloud.com\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"fsType\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` ext4\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeHandle\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'999999'\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Block Storage Instance ID\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeAttributes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"blk.csi.ncloud.com/noformat\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'true'\"}),\" \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# \\uBE14\\uB85D\\uC2A4\\uD1A0\\uB9AC\\uC9C0\\uB97C \\uD3EC\\uB9F7\\uD558\\uC9C0 \\uC54A\\uC74C\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uADF8\\uB9AC\\uACE0 PVC object\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"pod\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"resources\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"requests\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` 10Gi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC\\uC758 storage \\uC815\\uBCF4\\uB97C \\uBCF4\\uBA74, \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uC5F0\\uACB0\\uC815\\uBCF4\\uAC00 \\uC5C6\\uB294 \\uAC83\\uC744 \\uD655\\uC778 \\uD560 \\uC218 \\uC788\\uB2E4.\"}),(0,n.jsx)(\"img\",{src:\"/static/images/naver-cloud-storage-info.png\",alt:\"naver cloud storage console\"}),(0,n.jsxs)(e.p,{children:[\"\\uB9C8\\uC9C0\\uB9C9\\uC73C\\uB85C \",(0,n.jsx)(e.code,{children:\"VolumeAttachment\"}),\" object\\uB97C \\uC0DD\\uC131\\uD574\\uC8FC\\uBA74 \\uC5F0\\uACB0\\uC815\\uBCF4\\uAC00 \",(0,n.jsx)(e.code,{children:\"nodeName\"}),\"\\uB85C \\uC5F0\\uACB0\\uB41C \\uAC83\\uC744 \\uD655\\uC778 \\uD560 \\uC218 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` VolumeAttachment\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` test\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"attacher\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blk.csi.ncloud.com\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"nodeName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" node\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"01\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"persistentVolumeName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" volume\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"existing\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"01\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"dynamic-provisioning\",children:[(0,n.jsx)(e.a,{href:\"#dynamic-provisioning\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"dynamic provisioning\"]}),(0,n.jsx)(e.p,{children:\"StorageClass\\uC758 volumeBindingMode\\uB97C Immediate\\uB85C \\uC124\\uC815\\uD55C\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"namespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" kube\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"annotations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageclass.kubernetes.io/is-default-class\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'true'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blk.csi.ncloud.com\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeBindingMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Immediate\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Retain\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"allowVolumeExpansion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"parameters\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` SSD\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\uADF8\\uB9AC\\uACE0 PVC object\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 dynamic\\uD558\\uAC8C PV\\uAC00 \\uC0DD\\uC131\\uB418\\uACE0, \\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC\\uC5D0 storage\\uAC00 \\uC0DD\\uC131\\uB41C\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` PersistentVolumeClaim\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" csi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"pod\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`pvc\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"accessModes\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),` ReadWriteOnce\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"resources\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"requests\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storage\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` 10Gi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageClassName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]})]})}),(0,n.jsx)(e.p,{children:\"\\u{1F914} \\uADF8\\uB7F0\\uB370 VolumeAttachment object\\uAC00 \\uC5C6\\uB294\\uB370\\uB3C4, storage \\uC5F0\\uACB0\\uC815\\uBCF4\\uC5D0\\uC11C node\\uAC00 \\uC5F0\\uACB0\\uB418\\uC5B4 \\uC788\\uB2E4. \\uC774\\uAC83\\uC774 \\uC758\\uB3C4\\uD55C \\uACB0\\uACFC\\uC778\\uAC00? (\\uB124\\uC774\\uBC84 \\uD074\\uB77C\\uC6B0\\uB4DC\\uC5D0\\uC11C Block storage\\uB97C \\uC0DD\\uC131\\uD560 \\uB54C \\uC11C\\uBC84\\uC5D0 \\uBD80\\uCC29\\uC774 \\uB418\\uC5B4\\uC57C \\uD558\\uB294 \\uC0C1\\uD669\\uC774\\uB77C Immediate\\uB85C PV\\uAC00 \\uC0DD\\uC131\\uB420 \\uB54C \\uC790\\uB3D9\\uC73C\\uB85C Node\\uC5D0 \\uBD80\\uCC29\\uB41C\\uB2E4. \\uD558\\uC9C0\\uB9CC Pod\\uC5D0 PVC\\uB85C \\uC5F0\\uACB0\\uD558\\uBA74 \\uC774\\uC81C \\uD574\\uB2F9 Pod\\uAC00 \\uB3CC\\uACE0 \\uC788\\uB294 \\uB178\\uB4DC\\uB85C \\uB2E4\\uC2DC \\uC7AC\\uBD80\\uCC29\\uC774 \\uB41C\\uB2E4.)\"}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://kubernetes.io/docs/concepts/storage/storage-classes/#volume-binding-mode\",children:\"\\uBB38\\uC11C\"}),\"\\uC5D0 \\uC544\\uB798\\uCC98\\uB7FC \\uC124\\uBA85\\uB418\\uC5B4 \\uC788\\uB2E4.\"]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"The Immediate mode indicates that volume binding and dynamic provisioning occurs once the PersistentVolumeClaim is created.\"})}),(0,n.jsxs)(e.p,{children:[\"\\uC544\\uB798\\uCC98\\uB7FC volumeBindingMode\\uB97C \",(0,n.jsx)(e.code,{children:\"WaitForFirstConsumer\"}),\"\\uB85C \\uC124\\uC815\\uD558\\uBA74, pod\\uAC00 PVC\\uB97C \\uC0AC\\uC6A9\\uD560 \\uB54C\\uAE4C\\uC9C0 Pending \\uC0C1\\uD0DC\\uAC00 \\uC788\\uB2E4\\uAC00 \\uC0AC\\uC6A9\\uD558\\uBA74 pod\\uC758 Node\\uC5D0 \\uBD99\\uAC8C \\uB41C\\uB2E4. PV\\uC640 VolumeAttachment object\\uAC00 \\uAC19\\uC774 \\uC0DD\\uAE30\\uAC8C \\uB41C\\uB2E4.\"]}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` StorageClass\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` storage.k8s.io/v1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" my\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"namespace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" kube\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`system\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"annotations\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"storageclass.kubernetes.io/is-default-class\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'true'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"provisioner\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` blk.csi.ncloud.com\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeBindingMode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` WaitForFirstConsumer\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"reclaimPolicy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Retain\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"allowVolumeExpansion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"parameters\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` SSD\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"snapshot\",children:[(0,n.jsx)(e.a,{href:\"#snapshot\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"snapshot\"]}),(0,n.jsx)(e.p,{children:\"StorageClass\\uC640 \\uB9C8\\uCC2C\\uAC00\\uC9C0\\uB85C VolumeSnapshotClass\\uB3C4 default\\uB85C \\uD558\\uB098 \\uB9CC\\uB4E4\\uC5B4\\uC838 \\uC788\\uB2E4. \\uB530\\uB77C\\uC11C \\uC544\\uB798\\uCC98\\uB7FC object\\uB97C \\uC0DD\\uC131\\uD558\\uBA74 snapshot\\uC774 \\uB9CC\\uB4E4\\uC5B4\\uC9C4\\uB2E4.\"}),(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-yaml\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` snapshot.storage.k8s.io/v1beta1\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"kind\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` VolumeSnapshot\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"metadata\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" new\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"snapshot\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`test\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"spec\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"volumeSnapshotClassName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" nks\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"block\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`storage\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token atrule key\",children:\"persistentVolumeClaimName\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" pvc\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`name\n`]})]})}),(0,n.jsx)(e.p,{children:\"snapshot\\uC744 \\uC8FC\\uAE30\\uC801\\uC73C\\uB85C \\uD558\\uACE0, \\uCD5C\\uC2E0 \\uBA87\\uAC1C\\uB9CC \\uC720\\uC9C0\\uD558\\uACE0 \\uC2F6\\uC740\\uB370 \\uBCF4\\uB2C8\\uAE50 \\uC5EC\\uB7EC \\uC0AC\\uB78C\\uB4E4\\uC774 Custom Controller\\uB85C \\uB9CC\\uB4E0 \\uAC83\\uB4E4\\uC774 \\uBCF4\\uC778\\uB2E4. Custom Controller\\uB97C \\uC9C1\\uC811 \\uB9CC\\uB4E4\\uC5B4 \\uBCF4\\uB294 \\uAC83\\uB3C4 \\uC7AC\\uBBF8\\uC788\\uACA0\\uB2E4. \\u{1F60B}\"})]})}}var v=y;return f;})();\n;return Component;","toc":[{"value":"aws ebs csi driver","url":"#aws-ebs-csi-driver","depth":2},{"value":"controller plugin","url":"#controller-plugin","depth":3},{"value":"ebs-plugin","url":"#ebs-plugin","depth":4},{"value":"csi-provisioner","url":"#csi-provisioner","depth":4},{"value":"csi-attacher","url":"#csi-attacher","depth":4},{"value":"csi-snapshotter","url":"#csi-snapshotter","depth":4},{"value":"external-resizer","url":"#external-resizer","depth":4},{"value":"election","url":"#election","depth":4},{"value":"node plugin","url":"#node-plugin","depth":3},{"value":"node-driver-registrar","url":"#node-driver-registrar","depth":4},{"value":"","url":"#","depth":2},{"value":"NCloud","url":"#ncloud","depth":2},{"value":"static PV provisioning","url":"#static-pv-provisioning","depth":3},{"value":"dynamic provisioning","url":"#dynamic-provisioning","depth":3},{"value":"snapshot","url":"#snapshot","depth":3}],"frontMatter":{"readingTime":{"text":"14 min read","minutes":13.99,"time":839400,"words":2798},"slug":"20231021-csi-driver","fileName":"20231021-csi-driver.md","title":"aws-ebs-csi-driver  csi driver ","date":"2023-10-21T00:00:00.000Z","tags":["kubernetes"],"images":["/static/images/social-banner.png"],"summary":"aws-ebs-csi-driver   csi driver   .  Controller plugin Node plugin  ,  sidecar container .  sidecar container Volume ,  , Host  container directory mount  .  CSI driver cloud vendor    volume  .   storage         , PVC PV     volumeBindingMode Immediate  Node  ."}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"Jaemyun Lee","avatar":"profile.png","occupation":"Software Engineer","date":null}],"prev":{"title":"  certificate manager Lets encrypt  ","date":"2023-10-14T00:00:00.000Z","tags":["ncloud"],"images":["/static/images/social-banner.png"],"summary":"Lets encrypt    Naver Cloud Certificate Manager  . certbot      Certificate manager    .        .","slug":"20231014-ncloud-certificate-manater"},"next":null},"__N_SSG":true}